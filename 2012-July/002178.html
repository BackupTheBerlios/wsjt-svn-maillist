<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [WSJT-SVN] r2486 - branches/jtms3
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/wsjt-svn/2012-July/index.html" >
   <LINK REL="made" HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20r2486%20-%20branches/jtms3&In-Reply-To=%3C20120704182238.E58BA55B0C%40scm.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002177.html">
   <LINK REL="Next"  HREF="002179.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[WSJT-SVN] r2486 - branches/jtms3</H1>
    <B>k1jt at scm.berlios.de</B> 
    <A HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20r2486%20-%20branches/jtms3&In-Reply-To=%3C20120704182238.E58BA55B0C%40scm.berlios.de%3E"
       TITLE="[WSJT-SVN] r2486 - branches/jtms3">k1jt at scm.berlios.de
       </A><BR>
    <I>Wed Jul  4 20:22:38 CEST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="002177.html">[WSJT-SVN] r2485 - branches/jtms3
</A></li>
        <LI>Next message: <A HREF="002179.html">[WSJT-SVN] r2487 - in branches/jtms3: . libm65
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2178">[ date ]</a>
              <a href="thread.html#2178">[ thread ]</a>
              <a href="subject.html#2178">[ subject ]</a>
              <a href="author.html#2178">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: k1jt
Date: 2012-07-04 20:22:38 +0200 (Wed, 04 Jul 2012)
New Revision: 2486

Modified:
   branches/jtms3/devsetup.ui
   branches/jtms3/getfile.cpp
   branches/jtms3/mainwindow.cpp
   branches/jtms3/mainwindow.h
Log:
Clean up the devsetup window.  Some fixes to getfile and savewav.


Modified: branches/jtms3/devsetup.ui
===================================================================
--- branches/jtms3/devsetup.ui	2012-07-04 17:49:53 UTC (rev 2485)
+++ branches/jtms3/devsetup.ui	2012-07-04 18:22:38 UTC (rev 2486)
@@ -6,8 +6,8 @@
    &lt;rect&gt;
     &lt;x&gt;0&lt;/x&gt;
     &lt;y&gt;0&lt;/y&gt;
-    &lt;width&gt;392&lt;/width&gt;
-    &lt;height&gt;379&lt;/height&gt;
+    &lt;width&gt;462&lt;/width&gt;
+    &lt;height&gt;341&lt;/height&gt;
    &lt;/rect&gt;
   &lt;/property&gt;
   &lt;property name=&quot;windowTitle&quot;&gt;
@@ -23,16 +23,16 @@
       &lt;attribute name=&quot;title&quot;&gt;
        &lt;string&gt;Station&lt;/string&gt;
       &lt;/attribute&gt;
-      &lt;widget class=&quot;QWidget&quot; name=&quot;layoutWidget&quot;&gt;
+      &lt;widget class=&quot;QWidget&quot; name=&quot;&quot;&gt;
        &lt;property name=&quot;geometry&quot;&gt;
         &lt;rect&gt;
-         &lt;x&gt;12&lt;/x&gt;
-         &lt;y&gt;33&lt;/y&gt;
-         &lt;width&gt;348&lt;/width&gt;
-         &lt;height&gt;267&lt;/height&gt;
+         &lt;x&gt;10&lt;/x&gt;
+         &lt;y&gt;34&lt;/y&gt;
+         &lt;width&gt;421&lt;/width&gt;
+         &lt;height&gt;216&lt;/height&gt;
         &lt;/rect&gt;
        &lt;/property&gt;
-       &lt;layout class=&quot;QVBoxLayout&quot; name=&quot;verticalLayout_6&quot;&gt;
+       &lt;layout class=&quot;QVBoxLayout&quot; name=&quot;verticalLayout_8&quot;&gt;
         &lt;item&gt;
          &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;horizontalLayout_2&quot;&gt;
           &lt;item&gt;
@@ -121,6 +121,12 @@
             &lt;/item&gt;
             &lt;item&gt;
              &lt;widget class=&quot;QSpinBox&quot; name=&quot;idIntSpinBox&quot;&gt;
+              &lt;property name=&quot;maximumSize&quot;&gt;
+               &lt;size&gt;
+                &lt;width&gt;60&lt;/width&gt;
+                &lt;height&gt;16777215&lt;/height&gt;
+               &lt;/size&gt;
+              &lt;/property&gt;
               &lt;property name=&quot;minimum&quot;&gt;
                &lt;number&gt;-20&lt;/number&gt;
               &lt;/property&gt;
@@ -246,51 +252,45 @@
              &lt;/widget&gt;
             &lt;/item&gt;
             &lt;item&gt;
-             &lt;widget class=&quot;QLabel&quot; name=&quot;label_8&quot;&gt;
-              &lt;property name=&quot;minimumSize&quot;&gt;
-               &lt;size&gt;
-                &lt;width&gt;0&lt;/width&gt;
-                &lt;height&gt;20&lt;/height&gt;
-               &lt;/size&gt;
+             &lt;spacer name=&quot;verticalSpacer&quot;&gt;
+              &lt;property name=&quot;orientation&quot;&gt;
+               &lt;enum&gt;Qt::Vertical&lt;/enum&gt;
               &lt;/property&gt;
-              &lt;property name=&quot;text&quot;&gt;
-               &lt;string&gt;Timeout (min):&lt;/string&gt;
+              &lt;property name=&quot;sizeType&quot;&gt;
+               &lt;enum&gt;QSizePolicy::Expanding&lt;/enum&gt;
               &lt;/property&gt;
-             &lt;/widget&gt;
-            &lt;/item&gt;
-            &lt;item&gt;
-             &lt;widget class=&quot;QLabel&quot; name=&quot;label_9&quot;&gt;
-              &lt;property name=&quot;minimumSize&quot;&gt;
+              &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
                &lt;size&gt;
-                &lt;width&gt;0&lt;/width&gt;
+                &lt;width&gt;20&lt;/width&gt;
                 &lt;height&gt;20&lt;/height&gt;
                &lt;/size&gt;
               &lt;/property&gt;
-              &lt;property name=&quot;text&quot;&gt;
-               &lt;string&gt;Fcal (Hz):&lt;/string&gt;
-              &lt;/property&gt;
-             &lt;/widget&gt;
+             &lt;/spacer&gt;
             &lt;/item&gt;
+           &lt;/layout&gt;
+          &lt;/item&gt;
+          &lt;item&gt;
+           &lt;layout class=&quot;QVBoxLayout&quot; name=&quot;verticalLayout_5&quot;&gt;
             &lt;item&gt;
-             &lt;widget class=&quot;QLabel&quot; name=&quot;label_11&quot;&gt;
-              &lt;property name=&quot;minimumSize&quot;&gt;
+             &lt;widget class=&quot;QLineEdit&quot; name=&quot;dxccEntry&quot;&gt;
+              &lt;property name=&quot;maximumSize&quot;&gt;
                &lt;size&gt;
-                &lt;width&gt;0&lt;/width&gt;
-                &lt;height&gt;20&lt;/height&gt;
+                &lt;width&gt;60&lt;/width&gt;
+                &lt;height&gt;16777215&lt;/height&gt;
                &lt;/size&gt;
               &lt;/property&gt;
               &lt;property name=&quot;text&quot;&gt;
-               &lt;string&gt;Fadd (MHz)&lt;/string&gt;
+               &lt;string&gt;PJ9&lt;/string&gt;
               &lt;/property&gt;
              &lt;/widget&gt;
             &lt;/item&gt;
             &lt;item&gt;
-             &lt;spacer name=&quot;verticalSpacer&quot;&gt;
+             &lt;spacer name=&quot;verticalSpacer_3&quot;&gt;
               &lt;property name=&quot;orientation&quot;&gt;
                &lt;enum&gt;Qt::Vertical&lt;/enum&gt;
               &lt;/property&gt;
               &lt;property name=&quot;sizeType&quot;&gt;
-               &lt;enum&gt;QSizePolicy::Fixed&lt;/enum&gt;
+               &lt;enum&gt;QSizePolicy::Expanding&lt;/enum&gt;
               &lt;/property&gt;
               &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
                &lt;size&gt;
@@ -302,176 +302,133 @@
             &lt;/item&gt;
            &lt;/layout&gt;
           &lt;/item&gt;
+         &lt;/layout&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;spacer name=&quot;verticalSpacer_2&quot;&gt;
+          &lt;property name=&quot;orientation&quot;&gt;
+           &lt;enum&gt;Qt::Vertical&lt;/enum&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;20&lt;/width&gt;
+            &lt;height&gt;40&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+         &lt;/spacer&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;layout class=&quot;QVBoxLayout&quot; name=&quot;verticalLayout_6&quot;&gt;
           &lt;item&gt;
-           &lt;layout class=&quot;QVBoxLayout&quot; name=&quot;verticalLayout_5&quot;&gt;
+           &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;horizontalLayout_3&quot;&gt;
             &lt;item&gt;
-             &lt;widget class=&quot;QLineEdit&quot; name=&quot;dxccEntry&quot;&gt;
+             &lt;widget class=&quot;QLabel&quot; name=&quot;label_6&quot;&gt;
+              &lt;property name=&quot;minimumSize&quot;&gt;
+               &lt;size&gt;
+                &lt;width&gt;50&lt;/width&gt;
+                &lt;height&gt;0&lt;/height&gt;
+               &lt;/size&gt;
+              &lt;/property&gt;
               &lt;property name=&quot;maximumSize&quot;&gt;
                &lt;size&gt;
-                &lt;width&gt;16777215&lt;/width&gt;
+                &lt;width&gt;50&lt;/width&gt;
                 &lt;height&gt;16777215&lt;/height&gt;
                &lt;/size&gt;
               &lt;/property&gt;
               &lt;property name=&quot;text&quot;&gt;
-               &lt;string&gt;PJ9&lt;/string&gt;
+               &lt;string&gt;Audio In:&lt;/string&gt;
               &lt;/property&gt;
              &lt;/widget&gt;
             &lt;/item&gt;
             &lt;item&gt;
-             &lt;widget class=&quot;QSpinBox&quot; name=&quot;timeoutSpinBox&quot;&gt;
-              &lt;property name=&quot;maximum&quot;&gt;
-               &lt;number&gt;20&lt;/number&gt;
+             &lt;widget class=&quot;QComboBox&quot; name=&quot;comboBoxSndIn&quot;&gt;
+              &lt;property name=&quot;enabled&quot;&gt;
+               &lt;bool&gt;true&lt;/bool&gt;
               &lt;/property&gt;
              &lt;/widget&gt;
             &lt;/item&gt;
+           &lt;/layout&gt;
+          &lt;/item&gt;
+          &lt;item&gt;
+           &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;horizontalLayout_4&quot;&gt;
             &lt;item&gt;
-             &lt;widget class=&quot;QSpinBox&quot; name=&quot;fCalSpinBox&quot;&gt;
-              &lt;property name=&quot;minimum&quot;&gt;
-               &lt;number&gt;-2000&lt;/number&gt;
+             &lt;widget class=&quot;QLabel&quot; name=&quot;label_7&quot;&gt;
+              &lt;property name=&quot;sizePolicy&quot;&gt;
+               &lt;sizepolicy hsizetype=&quot;Preferred&quot; vsizetype=&quot;Preferred&quot;&gt;
+                &lt;horstretch&gt;0&lt;/horstretch&gt;
+                &lt;verstretch&gt;0&lt;/verstretch&gt;
+               &lt;/sizepolicy&gt;
               &lt;/property&gt;
-              &lt;property name=&quot;maximum&quot;&gt;
-               &lt;number&gt;2000&lt;/number&gt;
+              &lt;property name=&quot;minimumSize&quot;&gt;
+               &lt;size&gt;
+                &lt;width&gt;50&lt;/width&gt;
+                &lt;height&gt;0&lt;/height&gt;
+               &lt;/size&gt;
               &lt;/property&gt;
-             &lt;/widget&gt;
-            &lt;/item&gt;
-            &lt;item&gt;
-             &lt;widget class=&quot;QLineEdit&quot; name=&quot;faddEntry&quot;&gt;
+              &lt;property name=&quot;maximumSize&quot;&gt;
+               &lt;size&gt;
+                &lt;width&gt;50&lt;/width&gt;
+                &lt;height&gt;16777215&lt;/height&gt;
+               &lt;/size&gt;
+              &lt;/property&gt;
               &lt;property name=&quot;text&quot;&gt;
-               &lt;string&gt;0.0&lt;/string&gt;
+               &lt;string&gt;Audio Out:&lt;/string&gt;
               &lt;/property&gt;
              &lt;/widget&gt;
             &lt;/item&gt;
             &lt;item&gt;
-             &lt;spacer name=&quot;verticalSpacer_3&quot;&gt;
-              &lt;property name=&quot;orientation&quot;&gt;
-               &lt;enum&gt;Qt::Vertical&lt;/enum&gt;
-              &lt;/property&gt;
-              &lt;property name=&quot;sizeType&quot;&gt;
-               &lt;enum&gt;QSizePolicy::Fixed&lt;/enum&gt;
-              &lt;/property&gt;
-              &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
-               &lt;size&gt;
-                &lt;width&gt;20&lt;/width&gt;
-                &lt;height&gt;20&lt;/height&gt;
-               &lt;/size&gt;
-              &lt;/property&gt;
-             &lt;/spacer&gt;
+             &lt;widget class=&quot;QComboBox&quot; name=&quot;comboBoxSndOut&quot;/&gt;
             &lt;/item&gt;
            &lt;/layout&gt;
           &lt;/item&gt;
-         &lt;/layout&gt;
-        &lt;/item&gt;
-        &lt;item&gt;
-         &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;horizontalLayout_3&quot;&gt;
           &lt;item&gt;
-           &lt;widget class=&quot;QLabel&quot; name=&quot;label_10&quot;&gt;
-            &lt;property name=&quot;minimumSize&quot;&gt;
+           &lt;spacer name=&quot;verticalSpacer_4&quot;&gt;
+            &lt;property name=&quot;orientation&quot;&gt;
+             &lt;enum&gt;Qt::Vertical&lt;/enum&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
              &lt;size&gt;
-              &lt;width&gt;75&lt;/width&gt;
-              &lt;height&gt;20&lt;/height&gt;
+              &lt;width&gt;20&lt;/width&gt;
+              &lt;height&gt;40&lt;/height&gt;
              &lt;/size&gt;
             &lt;/property&gt;
-            &lt;property name=&quot;text&quot;&gt;
-             &lt;string&gt;Save Directory:&lt;/string&gt;
-            &lt;/property&gt;
-           &lt;/widget&gt;
+           &lt;/spacer&gt;
           &lt;/item&gt;
           &lt;item&gt;
-           &lt;widget class=&quot;QLineEdit&quot; name=&quot;saveDirEntry&quot;&gt;
-            &lt;property name=&quot;text&quot;&gt;
-             &lt;string&gt;C:\Users\joe\wsjt\map65\save&lt;/string&gt;
-            &lt;/property&gt;
-           &lt;/widget&gt;
+           &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;horizontalLayout&quot;&gt;
+            &lt;item&gt;
+             &lt;widget class=&quot;QLabel&quot; name=&quot;label_10&quot;&gt;
+              &lt;property name=&quot;sizePolicy&quot;&gt;
+               &lt;sizepolicy hsizetype=&quot;Preferred&quot; vsizetype=&quot;Fixed&quot;&gt;
+                &lt;horstretch&gt;0&lt;/horstretch&gt;
+                &lt;verstretch&gt;0&lt;/verstretch&gt;
+               &lt;/sizepolicy&gt;
+              &lt;/property&gt;
+              &lt;property name=&quot;minimumSize&quot;&gt;
+               &lt;size&gt;
+                &lt;width&gt;75&lt;/width&gt;
+                &lt;height&gt;20&lt;/height&gt;
+               &lt;/size&gt;
+              &lt;/property&gt;
+              &lt;property name=&quot;text&quot;&gt;
+               &lt;string&gt;Save Directory:&lt;/string&gt;
+              &lt;/property&gt;
+             &lt;/widget&gt;
+            &lt;/item&gt;
+            &lt;item&gt;
+             &lt;widget class=&quot;QLineEdit&quot; name=&quot;saveDirEntry&quot;&gt;
+              &lt;property name=&quot;text&quot;&gt;
+               &lt;string&gt;C:\Users\joe\wsjt\map65\save&lt;/string&gt;
+              &lt;/property&gt;
+             &lt;/widget&gt;
+            &lt;/item&gt;
+           &lt;/layout&gt;
           &lt;/item&gt;
          &lt;/layout&gt;
         &lt;/item&gt;
        &lt;/layout&gt;
       &lt;/widget&gt;
      &lt;/widget&gt;
-     &lt;widget class=&quot;QWidget&quot; name=&quot;tab_2&quot;&gt;
-      &lt;attribute name=&quot;title&quot;&gt;
-       &lt;string&gt;I/O Devices&lt;/string&gt;
-      &lt;/attribute&gt;
-      &lt;widget class=&quot;QWidget&quot; name=&quot;layoutWidget&quot;&gt;
-       &lt;property name=&quot;geometry&quot;&gt;
-        &lt;rect&gt;
-         &lt;x&gt;1&lt;/x&gt;
-         &lt;y&gt;73&lt;/y&gt;
-         &lt;width&gt;351&lt;/width&gt;
-         &lt;height&gt;151&lt;/height&gt;
-        &lt;/rect&gt;
-       &lt;/property&gt;
-       &lt;layout class=&quot;QVBoxLayout&quot; name=&quot;verticalLayout_7&quot;&gt;
-        &lt;item&gt;
-         &lt;widget class=&quot;QGroupBox&quot; name=&quot;groupBox_2&quot;&gt;
-          &lt;property name=&quot;sizePolicy&quot;&gt;
-           &lt;sizepolicy hsizetype=&quot;Preferred&quot; vsizetype=&quot;Preferred&quot;&gt;
-            &lt;horstretch&gt;0&lt;/horstretch&gt;
-            &lt;verstretch&gt;0&lt;/verstretch&gt;
-           &lt;/sizepolicy&gt;
-          &lt;/property&gt;
-          &lt;property name=&quot;minimumSize&quot;&gt;
-           &lt;size&gt;
-            &lt;width&gt;0&lt;/width&gt;
-            &lt;height&gt;0&lt;/height&gt;
-           &lt;/size&gt;
-          &lt;/property&gt;
-          &lt;property name=&quot;maximumSize&quot;&gt;
-           &lt;size&gt;
-            &lt;width&gt;16777215&lt;/width&gt;
-            &lt;height&gt;55&lt;/height&gt;
-           &lt;/size&gt;
-          &lt;/property&gt;
-          &lt;property name=&quot;title&quot;&gt;
-           &lt;string&gt;Input Device (Rx Audio)&lt;/string&gt;
-          &lt;/property&gt;
-          &lt;widget class=&quot;QComboBox&quot; name=&quot;comboBoxSndIn&quot;&gt;
-           &lt;property name=&quot;enabled&quot;&gt;
-            &lt;bool&gt;true&lt;/bool&gt;
-           &lt;/property&gt;
-           &lt;property name=&quot;geometry&quot;&gt;
-            &lt;rect&gt;
-             &lt;x&gt;15&lt;/x&gt;
-             &lt;y&gt;16&lt;/y&gt;
-             &lt;width&gt;291&lt;/width&gt;
-             &lt;height&gt;22&lt;/height&gt;
-            &lt;/rect&gt;
-           &lt;/property&gt;
-          &lt;/widget&gt;
-         &lt;/widget&gt;
-        &lt;/item&gt;
-        &lt;item&gt;
-         &lt;widget class=&quot;QGroupBox&quot; name=&quot;groupBox&quot;&gt;
-          &lt;property name=&quot;sizePolicy&quot;&gt;
-           &lt;sizepolicy hsizetype=&quot;Preferred&quot; vsizetype=&quot;Preferred&quot;&gt;
-            &lt;horstretch&gt;0&lt;/horstretch&gt;
-            &lt;verstretch&gt;0&lt;/verstretch&gt;
-           &lt;/sizepolicy&gt;
-          &lt;/property&gt;
-          &lt;property name=&quot;maximumSize&quot;&gt;
-           &lt;size&gt;
-            &lt;width&gt;16777215&lt;/width&gt;
-            &lt;height&gt;55&lt;/height&gt;
-           &lt;/size&gt;
-          &lt;/property&gt;
-          &lt;property name=&quot;title&quot;&gt;
-           &lt;string&gt;Output Device (Tx Audio)&lt;/string&gt;
-          &lt;/property&gt;
-          &lt;widget class=&quot;QComboBox&quot; name=&quot;comboBoxSndOut&quot;&gt;
-           &lt;property name=&quot;geometry&quot;&gt;
-            &lt;rect&gt;
-             &lt;x&gt;10&lt;/x&gt;
-             &lt;y&gt;20&lt;/y&gt;
-             &lt;width&gt;291&lt;/width&gt;
-             &lt;height&gt;22&lt;/height&gt;
-            &lt;/rect&gt;
-           &lt;/property&gt;
-          &lt;/widget&gt;
-         &lt;/widget&gt;
-        &lt;/item&gt;
-       &lt;/layout&gt;
-      &lt;/widget&gt;
-     &lt;/widget&gt;
     &lt;/widget&gt;
    &lt;/item&gt;
    &lt;item&gt;

Modified: branches/jtms3/getfile.cpp
===================================================================
--- branches/jtms3/getfile.cpp	2012-07-04 17:49:53 UTC (rev 2485)
+++ branches/jtms3/getfile.cpp	2012-07-04 18:22:38 UTC (rev 2486)
@@ -54,7 +54,7 @@
   }
 }
 
-void savetf2(QString fname, bool xpol)
+void savewav(QString fname)
 {
   /*
   int npts=2*52*96000;

Modified: branches/jtms3/mainwindow.cpp
===================================================================
--- branches/jtms3/mainwindow.cpp	2012-07-04 17:49:53 UTC (rev 2485)
+++ branches/jtms3/mainwindow.cpp	2012-07-04 18:22:38 UTC (rev 2486)
@@ -14,7 +14,7 @@
 int nwave;                            //Length of Tx waveform
 bool btxok;                           //True if OK to transmit
 double outputLatency;                 //Latency in seconds
-qint16 id[4*60*96000];
+qint16 id[30*48000];
 
 WideGraph* g_pWideGraph = NULL;
 QSharedMemory mem_m65(&quot;mem_m65&quot;);
@@ -23,9 +23,6 @@
 QString Program_Title_Version=&quot;  JTMS3   v0.1, r&quot; + rev.mid(6,4) +
                               &quot;    by K1JT&quot;;
 
-extern const int RxDataFrequency = 96000;
-extern const int TxDataFrequency = 11025;
-
 //-------------------------------------------------- MainWindow constructor
 MainWindow::MainWindow(QWidget *parent) :
   QMainWindow(parent),
@@ -206,12 +203,7 @@
   m_diskData=false;
   m_tol=500;
   g_pWideGraph-&gt;setTol(m_tol);
-  g_pWideGraph-&gt;setFcal(m_fCal);
-  if(m_fs96000) g_pWideGraph-&gt;setFsample(96000);
-  if(!m_fs96000) g_pWideGraph-&gt;setFsample(95238);
-  g_pWideGraph-&gt;m_mult570=m_mult570;
-  g_pWideGraph-&gt;m_cal570=m_cal570;
-  if(m_initIQplus) g_pWideGraph-&gt;initIQplus();
+  g_pWideGraph-&gt;setFsample(48000);
 
 // Create &quot;m_worked&quot;, a dictionary of all calls in wsjt.log
   QFile f(&quot;wsjt.log&quot;);
@@ -462,23 +454,19 @@
     n60z=n60;
     n=0;
   }
+*/
 
+  int ihsym=0;
   if(ihsym == 279) {
-    datcom_.newdat=1;
-    datcom_.nagain=0;
     QDateTime t = QDateTime::currentDateTimeUtc();
     m_dateTime=t.toString(&quot;yyyy-MMM-dd hh:mm&quot;);
-    decode();                                           //Start the decoder
     if(m_saveAll) {
       QString fname=m_saveDir + &quot;/&quot; + t.date().toString(&quot;yyMMdd&quot;) + &quot;_&quot; +
-          t.time().toString(&quot;hhmm&quot;);
-      if(m_xpol) fname += &quot;.tf2&quot;;
-      if(!m_xpol) fname += &quot;.iq&quot;;
-      *future2 = QtConcurrent::run(savetf2, fname, m_xpol);
+          t.time().toString(&quot;hhmm&quot;) + &quot;.wav&quot;;
+      *future2 = QtConcurrent::run(savewav, fname);
       watcher2-&gt;setFuture(*future2);
     }
   }
-  */
   soundInThread.m_dataSinkBusy=false;
 }
 
@@ -838,11 +826,12 @@
 
 void MainWindow::diskDat()                                   //diskDat()
 {
-  double hsym;
   //These may be redundant??
   m_diskData=true;
 //  datcom_.newdat=1;
 
+  /*
+  double hsym;
   if(m_fs96000) hsym=2048.0*96000.0/11025.0;   //Samples per JT65 half-symbol
   if(!m_fs96000) hsym=2048.0*95238.1/11025.0;
   for(int i=0; i&lt;281; i++) {              // Do the half-symbol FFTs
@@ -850,6 +839,7 @@
     dataSink(k);
     if(i%10 == 0) qApp-&gt;processEvents();   //Keep the GUI responsive
   }
+  */
 }
 
 void MainWindow::diskWriteFinished()                       //diskWriteFinished

Modified: branches/jtms3/mainwindow.h
===================================================================
--- branches/jtms3/mainwindow.h	2012-07-04 17:49:53 UTC (rev 2485)
+++ branches/jtms3/mainwindow.h	2012-07-04 18:22:38 UTC (rev 2486)
@@ -239,7 +239,7 @@
 };
 
 extern void getfile(QString fname, bool xpol, int idInt);
-extern void savetf2(QString fname, bool xpol);
+extern void savewav(QString fname);
 extern int killbyname(const char* progName);
 extern void getDev(int* numDevices,char hostAPI_DeviceName[][50],
                    int minChan[], int maxChan[],

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002177.html">[WSJT-SVN] r2485 - branches/jtms3
</A></li>
	<LI>Next message: <A HREF="002179.html">[WSJT-SVN] r2487 - in branches/jtms3: . libm65
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2178">[ date ]</a>
              <a href="thread.html#2178">[ thread ]</a>
              <a href="subject.html#2178">[ subject ]</a>
              <a href="author.html#2178">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/wsjt-svn">More information about the wsjt-svn
mailing list</a><br>
</body></html>
