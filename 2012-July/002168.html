<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [WSJT-SVN] r2475 - branches/jtms3
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/wsjt-svn/2012-July/index.html" >
   <LINK REL="made" HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20r2475%20-%20branches/jtms3&In-Reply-To=%3C20120702153333.AC15755B0C%40scm.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002166.html">
   <LINK REL="Next"  HREF="002167.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[WSJT-SVN] r2475 - branches/jtms3</H1>
    <B>k1jt at scm.berlios.de</B> 
    <A HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20r2475%20-%20branches/jtms3&In-Reply-To=%3C20120702153333.AC15755B0C%40scm.berlios.de%3E"
       TITLE="[WSJT-SVN] r2475 - branches/jtms3">k1jt at scm.berlios.de
       </A><BR>
    <I>Mon Jul  2 17:33:33 CEST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="002166.html">[WSJT-SVN] r2474 - branches
</A></li>
        <LI>Next message: <A HREF="002167.html">[WSJT-SVN] r2476 - branches/jtms3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2168">[ date ]</a>
              <a href="thread.html#2168">[ thread ]</a>
              <a href="subject.html#2168">[ subject ]</a>
              <a href="author.html#2168">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: k1jt
Date: 2012-07-02 17:33:33 +0200 (Mon, 02 Jul 2012)
New Revision: 2475

Added:
   branches/jtms3/jtms3.iss
   branches/jtms3/jtms3.pro
   branches/jtms3/jtms3.rc
Removed:
   branches/jtms3/astro.cpp
   branches/jtms3/astro.h
   branches/jtms3/astro.ui
   branches/jtms3/bandmap.cpp
   branches/jtms3/bandmap.h
   branches/jtms3/bandmap.ui
   branches/jtms3/map65.iss
   branches/jtms3/map65.pro
   branches/jtms3/map65.rc
   branches/jtms3/messages.cpp
   branches/jtms3/messages.h
   branches/jtms3/messages.ui
Modified:
   branches/jtms3/mainwindow.cpp
   branches/jtms3/mainwindow.h
Log:
JTMS3 now compiles and runs, although most of its functions are still
those of MAP65.  Have removed the Astro, BandMap, and Messages windows.


Deleted: branches/jtms3/astro.cpp
===================================================================
--- branches/jtms3/astro.cpp	2012-07-02 14:50:41 UTC (rev 2474)
+++ branches/jtms3/astro.cpp	2012-07-02 15:33:33 UTC (rev 2475)
@@ -1,103 +0,0 @@
-#include &quot;astro.h&quot;
-#include &quot;ui_astro.h&quot;
-#include &lt;QDebug&gt;
-#include &lt;QFile&gt;
-#include &lt;QMessageBox&gt;
-#include &lt;stdio.h&gt;
-#include &quot;commons.h&quot;
-
-Astro::Astro(QWidget *parent) :
-  QWidget(parent),
-  ui(new Ui::Astro)
-{
-  ui-&gt;setupUi(this);
-  ui-&gt;astroTextBrowser-&gt;setStyleSheet(
-        &quot;QTextBrowser { background-color : cyan; color : black; }&quot;);
-  ui-&gt;astroTextBrowser-&gt;clear();
-}
-
-Astro::~Astro()
-{
-    delete ui;
-}
-
-void Astro::astroUpdate(QDateTime t, QString mygrid, QString hisgrid,
-                        int fQSO, int nsetftx, int ntxFreq, QString azelDir)
-{
-  static int ntxFreq0=-99;
-  static bool astroBusy=false;
-  char cc[300];
-  double azsun,elsun,azmoon,elmoon,azmoondx,elmoondx;
-  double ramoon,decmoon,dgrd,poloffset,xnr;
-  int ntsky,ndop,ndop00;
-  QString date = t.date().toString(&quot;yyyy MMM dd&quot;);
-  QString utc = t.time().toString();
-  int nyear=t.date().year();
-  int month=t.date().month();
-  int nday=t.date().day();
-  int nhr=t.time().hour();
-  int nmin=t.time().minute();
-  double sec=t.time().second() + 0.001*t.time().msec();
-  int isec=sec;
-  double uth=nhr + nmin/60.0 + sec/3600.0;
-  int nfreq=(int)datcom_.fcenter;
-  if(nfreq&lt;10 or nfreq &gt; 50000) nfreq=144;
-
-  if(!astroBusy) {
-    astroBusy=true;
-    astrosub_(&amp;nyear, &amp;month, &amp;nday, &amp;uth, &amp;nfreq, mygrid.toAscii(),
-            hisgrid.toAscii(), &amp;azsun, &amp;elsun, &amp;azmoon, &amp;elmoon,
-            &amp;azmoondx, &amp;elmoondx, &amp;ntsky, &amp;ndop, &amp;ndop00,&amp;ramoon, &amp;decmoon,
-            &amp;dgrd, &amp;poloffset, &amp;xnr, 6, 6);
-    astroBusy=false;
-  }
-
-  sprintf(cc,
-          &quot;Az:    %6.1f\n&quot;
-          &quot;El:    %6.1f\n&quot;
-          &quot;MyDop: %6d\n&quot;
-          &quot;DxAz:  %6.1f\n&quot;
-          &quot;DxEl:  %6.1f\n&quot;
-          &quot;DxDop: %6d\n&quot;
-          &quot;Dec:   %6.1f\n&quot;
-          &quot;SunAz: %6.1f\n&quot;
-          &quot;SunEl: %6.1f\n&quot;
-          &quot;Tsky:  %6d\n&quot;
-          &quot;MNR:   %6.1f\n&quot;
-          &quot;Dgrd:  %6.1f&quot;,
-          azmoon,elmoon,ndop00,azmoondx,elmoondx,ndop,decmoon,azsun,elsun,
-          ntsky,xnr,dgrd);
-  ui-&gt;astroTextBrowser-&gt;setText(&quot; &quot;+ date + &quot;\nUTC: &quot; + utc + &quot;\n&quot; + cc);
-
-  QString fname=azelDir+&quot;/azel.dat&quot;;
-  QFile f(fname);
-  if(!f.open(QIODevice::WriteOnly | QIODevice::Text)) {
-    QMessageBox mb;
-    mb.setText(&quot;Cannot open &quot; + fname);
-    mb.exec();
-    return;
-  }
-  int ndiff=0;
-  if(ntxFreq != ntxFreq0) ndiff=1;
-  ntxFreq0=ntxFreq;
-  QTextStream out(&amp;f);
-  sprintf(cc,&quot;%2.2d:%2.2d:%2.2d,%5.1f,%5.1f,Moon\n&quot;
-          &quot;%2.2d:%2.2d:%2.2d,%5.1f,%5.1f,Sun\n&quot;
-          &quot;%2.2d:%2.2d:%2.2d,%5.1f,%5.1f,Source\n&quot;
-          &quot;%4d,%6d,Doppler\n&quot;
-          &quot;%3d,%1d,fQSO\n&quot;
-          &quot;%3d,%1d,fQSO2\n&quot;,
-          nhr,nmin,isec,azmoon,elmoon,
-          nhr,nmin,isec,azsun,elsun,
-          nhr,nmin,isec,0.0,0.0,
-          nfreq,ndop,
-          fQSO,nsetftx,
-          ntxFreq,ndiff);
-  out &lt;&lt; cc;
-  f.close();
-}
-
-void Astro::setFontSize(int n)
-{
-  ui-&gt;astroTextBrowser-&gt;setFontPointSize(n);
-}

Deleted: branches/jtms3/astro.h
===================================================================
--- branches/jtms3/astro.h	2012-07-02 14:50:41 UTC (rev 2474)
+++ branches/jtms3/astro.h	2012-07-02 15:33:33 UTC (rev 2475)
@@ -1,35 +0,0 @@
-#ifndef ASTRO_H
-#define ASTRO_H
-
-#include &lt;QWidget&gt;
-#include &lt;QDateTime&gt;
-
-namespace Ui {
-  class Astro;
-}
-
-class Astro : public QWidget
-{
-  Q_OBJECT
-
-public:
-  explicit Astro(QWidget *parent = 0);
-  void astroUpdate(QDateTime t, QString mygrid, QString hisgrid,
-                   int fQSO, int nsetftx, int ntxFreq, QString azelDir);
-  void setFontSize(int n);
-  ~Astro();
-
-private:
-    Ui::Astro *ui;
-};
-
-extern &quot;C&quot; {
-  void astrosub_(int* nyear, int* month, int* nday, double* uth, int* nfreq,
-     const char* mygrid, const char* hisgrid, double* azsun,
-     double* elsun, double* azmoon, double* elmoon, double* azmoondx,
-     double* elmoondx, int* ntsky, int* ndop, int* ndop00,
-     double* ramoon, double* decmoon, double* dgrd, double* poloffset,
-     double* xnr, int len1, int len2);
-}
-
-#endif // ASTRO_H

Deleted: branches/jtms3/astro.ui
===================================================================
--- branches/jtms3/astro.ui	2012-07-02 14:50:41 UTC (rev 2474)
+++ branches/jtms3/astro.ui	2012-07-02 15:33:33 UTC (rev 2475)
@@ -1,37 +0,0 @@
-&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
-&lt;ui version=&quot;4.0&quot;&gt;
- &lt;class&gt;Astro&lt;/class&gt;
- &lt;widget class=&quot;QWidget&quot; name=&quot;Astro&quot;&gt;
-  &lt;property name=&quot;geometry&quot;&gt;
-   &lt;rect&gt;
-    &lt;x&gt;0&lt;/x&gt;
-    &lt;y&gt;0&lt;/y&gt;
-    &lt;width&gt;262&lt;/width&gt;
-    &lt;height&gt;427&lt;/height&gt;
-   &lt;/rect&gt;
-  &lt;/property&gt;
-  &lt;property name=&quot;windowTitle&quot;&gt;
-   &lt;string&gt;Form&lt;/string&gt;
-  &lt;/property&gt;
-  &lt;widget class=&quot;QTextBrowser&quot; name=&quot;astroTextBrowser&quot;&gt;
-   &lt;property name=&quot;geometry&quot;&gt;
-    &lt;rect&gt;
-     &lt;x&gt;0&lt;/x&gt;
-     &lt;y&gt;10&lt;/y&gt;
-     &lt;width&gt;256&lt;/width&gt;
-     &lt;height&gt;411&lt;/height&gt;
-    &lt;/rect&gt;
-   &lt;/property&gt;
-   &lt;property name=&quot;font&quot;&gt;
-    &lt;font&gt;
-     &lt;family&gt;Courier New&lt;/family&gt;
-     &lt;pointsize&gt;20&lt;/pointsize&gt;
-     &lt;weight&gt;75&lt;/weight&gt;
-     &lt;bold&gt;true&lt;/bold&gt;
-    &lt;/font&gt;
-   &lt;/property&gt;
-  &lt;/widget&gt;
- &lt;/widget&gt;
- &lt;resources/&gt;
- &lt;connections/&gt;
-&lt;/ui&gt;

Deleted: branches/jtms3/bandmap.cpp
===================================================================
--- branches/jtms3/bandmap.cpp	2012-07-02 14:50:41 UTC (rev 2474)
+++ branches/jtms3/bandmap.cpp	2012-07-02 15:33:33 UTC (rev 2475)
@@ -1,89 +0,0 @@
-#include &quot;bandmap.h&quot;
-#include &quot;ui_bandmap.h&quot;
-#include &lt;QDebug&gt;
-
-BandMap::BandMap(QWidget *parent) :
-  QWidget(parent),
-  ui(new Ui::BandMap)
-{
-  ui-&gt;setupUi(this);
-  ui-&gt;bmTextBrowser-&gt;setStyleSheet(
-        &quot;QTextBrowser { background-color : #000066; color : red; }&quot;);
-  m_bandMapText=&quot;&quot;;
-  ui-&gt;bmTextBrowser-&gt;clear();
-}
-
-BandMap::~BandMap()
-{
-  delete ui;
-}
-
-void BandMap::setText(QString t)
-{
-  m_bandMapText=t;
-  int w=ui-&gt;bmTextBrowser-&gt;size().width();
-  int ncols=1;
-  if(w&gt;220) ncols=2;
-  QString s=&quot;QTextBrowser{background-color: &quot;+m_colorBackground+&quot;}&quot;;
-  ui-&gt;bmTextBrowser-&gt;setStyleSheet(s);
-  QString t0=&quot;&lt;html style=\&quot; font-family:'Courier New';&quot;
-      &quot;font-size:9pt; background-color:#000066\&quot;&gt;&quot;
-      &quot;&lt;table border=0 cellspacing=7&gt;&lt;tr&gt;&lt;td&gt;\n&quot;;
-  QString tfreq,tspace,tcall;
-  QString s0,s1,s2,s3,bg;
-  bg=&quot;&lt;span style=color:&quot;+m_colorBackground+&quot;;&gt;.&lt;/span&gt;&quot;;
-  s0=&quot;&lt;span style=color:&quot;+m_color0+&quot;;&gt;&quot;;
-  s1=&quot;&lt;span style=color:&quot;+m_color1+&quot;;&gt;&quot;;
-  s2=&quot;&lt;span style=color:&quot;+m_color2+&quot;;&gt;&quot;;
-  s3=&quot;&lt;span style=color:&quot;+m_color3+&quot;;&gt;&quot;;
-
-  ui-&gt;bmTextBrowser-&gt;clear();
-  QStringList lines = t.split( &quot;\n&quot;, QString::SkipEmptyParts );
-  int nrows=(lines.length()+ncols-1)/ncols;
-
-  for(int i=0; i&lt;nrows; i++) {
-    tfreq=lines[i].mid(0,3);
-    tspace=lines[i].mid(4,1);
-    if(tspace==&quot; &quot;) tspace=bg;
-    tcall=lines[i].mid(5,7);
-    int n=lines[i].mid(13,1).toInt();
-    if(n==0) t0 += s0;
-    if(n==1) t0 += s1;
-    if(n==2) t0 += s2;
-    if(n&gt;=3) t0 += s3;
-    t0 += (tfreq + tspace + tcall + &quot;&lt;/span&gt;&lt;br&gt;\n&quot;);
-  }
-
-  if(ncols==2) {                                  //2-column display
-    t0 += &quot;&lt;td&gt;&lt;br&gt;&lt;td&gt;\n&quot;;
-    for(int i=nrows; i&lt;lines.length(); i++) {
-      tfreq=lines[i].mid(0,3);
-      tspace=lines[i].mid(4,1);
-      if(tspace==&quot;  &quot;) tspace=bg;
-      tcall=lines[i].mid(5,7);
-      int n=lines[i].mid(13,1).toInt();
-      if(n==0) t0 += s0;
-      if(n==1) t0 += s1;
-      if(n==2) t0 += s2;
-      if(n&gt;=3) t0 += s3;
-      t0 += (tfreq + tspace + tcall + &quot;&lt;/span&gt;&lt;br&gt;\n&quot;);
-    }
-    if(2*nrows&gt;lines.length()) t0 += (s0 + &quot;&lt;/span&gt;&lt;br&gt;\n&quot;);
-  }
-  ui-&gt;bmTextBrowser-&gt;setHtml(t0);
-}
-
-void BandMap::resizeEvent(QResizeEvent* )
-{
-  setText(m_bandMapText);
-}
-
-void BandMap::setColors(QString t)
-{
-  m_colorBackground = &quot;#&quot;+t.mid(0,6);
-  m_color0 = &quot;#&quot;+t.mid(6,6);
-  m_color1 = &quot;#&quot;+t.mid(12,6);
-  m_color2 = &quot;#&quot;+t.mid(18,6);
-  m_color3 = &quot;#&quot;+t.mid(24,6);
-  setText(m_bandMapText);
-}

Deleted: branches/jtms3/bandmap.h
===================================================================
--- branches/jtms3/bandmap.h	2012-07-02 14:50:41 UTC (rev 2474)
+++ branches/jtms3/bandmap.h	2012-07-02 15:33:33 UTC (rev 2475)
@@ -1,34 +0,0 @@
-#ifndef BANDMAP_H
-#define BANDMAP_H
-
-#include &lt;QWidget&gt;
-
-namespace Ui {
-    class BandMap;
-}
-
-class BandMap : public QWidget
-{
-    Q_OBJECT
-
-public:
-  explicit BandMap(QWidget *parent = 0);
-  void setText(QString t);
-  void setColors(QString t);
-
-  ~BandMap();
-
-protected:
-  void resizeEvent(QResizeEvent* event);
-
-private:
-    Ui::BandMap *ui;
-    QString m_bandMapText;
-    QString m_colorBackground;
-    QString m_color0;
-    QString m_color1;
-    QString m_color2;
-    QString m_color3;
-};
-
-#endif // BANDMAP_H

Deleted: branches/jtms3/bandmap.ui
===================================================================
--- branches/jtms3/bandmap.ui	2012-07-02 14:50:41 UTC (rev 2474)
+++ branches/jtms3/bandmap.ui	2012-07-02 15:33:33 UTC (rev 2475)
@@ -1,43 +0,0 @@
-&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
-&lt;ui version=&quot;4.0&quot;&gt;
- &lt;class&gt;BandMap&lt;/class&gt;
- &lt;widget class=&quot;QWidget&quot; name=&quot;BandMap&quot;&gt;
-  &lt;property name=&quot;geometry&quot;&gt;
-   &lt;rect&gt;
-    &lt;x&gt;0&lt;/x&gt;
-    &lt;y&gt;0&lt;/y&gt;
-    &lt;width&gt;329&lt;/width&gt;
-    &lt;height&gt;379&lt;/height&gt;
-   &lt;/rect&gt;
-  &lt;/property&gt;
-  &lt;property name=&quot;minimumSize&quot;&gt;
-   &lt;size&gt;
-    &lt;width&gt;0&lt;/width&gt;
-    &lt;height&gt;0&lt;/height&gt;
-   &lt;/size&gt;
-  &lt;/property&gt;
-  &lt;property name=&quot;windowTitle&quot;&gt;
-   &lt;string&gt;Form&lt;/string&gt;
-  &lt;/property&gt;
-  &lt;layout class=&quot;QGridLayout&quot; name=&quot;gridLayout&quot;&gt;
-   &lt;item row=&quot;0&quot; column=&quot;0&quot;&gt;
-    &lt;widget class=&quot;QTextBrowser&quot; name=&quot;bmTextBrowser&quot;&gt;
-     &lt;property name=&quot;minimumSize&quot;&gt;
-      &lt;size&gt;
-       &lt;width&gt;107&lt;/width&gt;
-       &lt;height&gt;0&lt;/height&gt;
-      &lt;/size&gt;
-     &lt;/property&gt;
-     &lt;property name=&quot;font&quot;&gt;
-      &lt;font&gt;
-       &lt;family&gt;Courier New&lt;/family&gt;
-       &lt;pointsize&gt;9&lt;/pointsize&gt;
-      &lt;/font&gt;
-     &lt;/property&gt;
-    &lt;/widget&gt;
-   &lt;/item&gt;
-  &lt;/layout&gt;
- &lt;/widget&gt;
- &lt;resources/&gt;
- &lt;connections/&gt;
-&lt;/ui&gt;

Copied: branches/jtms3/jtms3.iss (from rev 2474, branches/jtms3/map65.iss)
===================================================================
--- branches/jtms3/jtms3.iss	                        (rev 0)
+++ branches/jtms3/jtms3.iss	2012-07-02 15:33:33 UTC (rev 2475)
@@ -0,0 +1,31 @@
+[Setup]
+AppName=MAP65
+AppVerName=MAP65 Version 2.3.0 r2471
+AppCopyright=Copyright (C) 2001-2012 by Joe Taylor, K1JT
+DefaultDirName=c:\MAP65
+DefaultGroupName=MAP65
+
+[Files]
+Source: &quot;c:\Users\joe\wsjt\map65_install\m65.exe&quot;;           DestDir: &quot;{app}&quot;
+Source: &quot;c:\Users\joe\wsjt\map65_install\map65.exe&quot;;         DestDir: &quot;{app}&quot;
+Source: &quot;c:\Users\joe\wsjt\map65_install\wsjt.ico&quot;;          DestDir: &quot;{app}&quot;
+Source: &quot;c:\Users\joe\wsjt\map65_install\kvasd.exe&quot;;         DestDir: &quot;{app}&quot;
+Source: &quot;c:\Users\joe\wsjt\map65_install\CALL3.TXT&quot;;         DestDir: &quot;{app}&quot;; Flags: onlyifdoesntexist
+Source: &quot;c:\Users\joe\wsjt\map65_install\fftwf-wisdom.exe&quot;;  DestDir: &quot;{app}&quot;; Flags: onlyifdoesntexist
+Source: &quot;c:\Users\joe\wsjt\map65_install\wisdom1.bat&quot;;       DestDir: &quot;{app}&quot;;
+Source: &quot;c:\Users\joe\wsjt\map65_install\wisdom2.bat&quot;;       DestDir: &quot;{app}&quot;;
+Source: &quot;c:\Users\joe\wsjt\map65_install\afmhot.dat&quot;;        DestDir: &quot;{app}&quot;;
+Source: &quot;c:\Users\joe\wsjt\map65_install\blue.dat&quot;;          DestDir: &quot;{app}&quot;;
+Source: &quot;c:\Users\joe\wsjt\map65_install\qthid.exe&quot;;         DestDir: &quot;{app}&quot;;
+
+Source: &quot;c:\Users\joe\wsjt\QtSupport\*.dll&quot;;                 DestDir: &quot;{sys}&quot;;  Flags: onlyifdoesntexist
+
+Source: &quot;c:\Users\joe\wsjt\map65_install\save\dummy&quot;;        DestDir: &quot;{app}\save&quot;;
+
+[Icons]
+Name: &quot;{group}\MAP65&quot;;        Filename: &quot;{app}\map65.exe&quot;;   WorkingDir: {app}; IconFilename: {app}\wsjt.ico
+Name: &quot;{userdesktop}\MAP65&quot;;  Filename: &quot;{app}\map65.exe&quot;;   WorkingDir: {app}; IconFilename: {app}\wsjt.ico
+
+[Run]
+Filename: &quot;{app}\wisdom1.bat&quot;; Description: &quot;Optimize plans for FFTs (takes a few minutes)&quot;; Flags: postinstall
+Filename: &quot;{app}\wisdom2.bat&quot;; Description: &quot;Patiently optimize plans for FFTs (up to one hour)&quot;; Flags: postinstall unchecked

Copied: branches/jtms3/jtms3.pro (from rev 2474, branches/jtms3/map65.pro)
===================================================================
--- branches/jtms3/jtms3.pro	                        (rev 0)
+++ branches/jtms3/jtms3.pro	2012-07-02 15:33:33 UTC (rev 2475)
@@ -0,0 +1,76 @@
+#-------------------------------------------------
+#
+# Project created by QtCreator 2011-07-07T08:39:24
+#
+#-------------------------------------------------
+
+QT       += core gui network
+CONFIG   += qwt thread
+#CONFIG   += console
+
+TARGET = jtms3
+VERSION = 0.1
+TEMPLATE = app
+
+win32 {
+DEFINES = WIN32
+DESTDIR = ../jtms3_install
+F90 = g95
+g95.output = ${QMAKE_FILE_BASE}.o
+g95.commands = $$F90 -c -O2 -o ${QMAKE_FILE_OUT} ${QMAKE_FILE_NAME}
+g95.input = F90_SOURCES
+QMAKE_EXTRA_COMPILERS += g95
+}
+
+unix {
+DEFINES = UNIX
+DESTDIR = ../jtms3_install
+F90 = gfortran
+gfortran.output = ${QMAKE_FILE_BASE}.o
+gfortran.commands = $$F90 -c -O2 -o ${QMAKE_FILE_OUT} ${QMAKE_FILE_NAME}
+gfortran.input = F90_SOURCES
+QMAKE_EXTRA_COMPILERS += gfortran
+}
+
+SOURCES += main.cpp mainwindow.cpp plotter.cpp about.cpp \
+    soundin.cpp soundout.cpp devsetup.cpp \
+    widegraph.cpp getfile.cpp \
+    displaytext.cpp getdev.cpp
+
+win32 {
+SOURCES += killbyname.cpp     set570.cpp
+}
+
+HEADERS  += mainwindow.h plotter.h soundin.h soundout.h \
+            about.h devsetup.h widegraph.h getfile.h \
+            commons.h sleep.h displaytext.h \
+
+DEFINES += __cplusplus
+
+FORMS    += mainwindow.ui about.ui devsetup.ui widegraph.ui
+
+RC_FILE = jtms3.rc
+
+unix {
+INCLUDEPATH += $$quote(/usr/include/qwt-qt4)
+LIBS += -lfftw3f /usr/lib/libgfortran.so.3
+LIBS += ../jtms3/libm65/libm65.a
+LIBS += /usr/lib/libqwt-qt4.so
+LIBS += -lportaudio
+#LIBS +- -lusb
+}
+
+win32 {
+INCLUDEPATH += c:/qwt-6.0.1/include
+LIBS += ../jtms3/libm65/libm65.a
+LIBS += ../jtms3/libfftw3f_win.a
+LIBS += ../QtSupport/palir-02.dll
+LIBS += libwsock32
+LIBS += C:/MinGW/lib/libf95.a
+CONFIG(release) {
+   LIBS += C:/qwt-6.0.1/lib/qwt.dll
+} else {
+   LIBS += C:/qwt-6.0.1/lib/qwtd.dll
+}
+LIBS += -lusb
+}

Copied: branches/jtms3/jtms3.rc (from rev 2474, branches/jtms3/map65.rc)
===================================================================
--- branches/jtms3/jtms3.rc	                        (rev 0)
+++ branches/jtms3/jtms3.rc	2012-07-02 15:33:33 UTC (rev 2475)
@@ -0,0 +1 @@
+IDI_ICON1       ICON    DISCARDABLE     &quot;wsjt.ico&quot;

Modified: branches/jtms3/mainwindow.cpp
===================================================================
--- branches/jtms3/mainwindow.cpp	2012-07-02 14:50:41 UTC (rev 2474)
+++ branches/jtms3/mainwindow.cpp	2012-07-02 15:33:33 UTC (rev 2475)
@@ -4,10 +4,7 @@
 #include &quot;devsetup.h&quot;
 #include &quot;plotter.h&quot;
 #include &quot;about.h&quot;
-#include &quot;astro.h&quot;
 #include &quot;widegraph.h&quot;
-#include &quot;messages.h&quot;
-#include &quot;bandmap.h&quot;
 #include &quot;sleep.h&quot;
 #include &lt;portaudio.h&gt;
 
@@ -19,14 +16,11 @@
 double outputLatency;                 //Latency in seconds
 qint16 id[4*60*96000];
 
-Astro*     g_pAstro = NULL;
 WideGraph* g_pWideGraph = NULL;
-Messages*  g_pMessages = NULL;
-BandMap*   g_pBandMap = NULL;
 QSharedMemory mem_m65(&quot;mem_m65&quot;);
 
 QString rev=&quot;$Rev$&quot;;
-QString Program_Title_Version=&quot;  MAP65   v2.3.0, r&quot; + rev.mid(6,4) +
+QString Program_Title_Version=&quot;  JTMS3   v0.1, r&quot; + rev.mid(6,4) +
                               &quot;    by K1JT&quot;;
 
 extern const int RxDataFrequency = 96000;
@@ -115,8 +109,7 @@
   m_myCall=&quot;K1JT&quot;;
   m_myGrid=&quot;FN20qi&quot;;
   m_appDir = QApplication::applicationDirPath();
-  m_saveDir=&quot;/users/joe/map65/install/save&quot;;
-  m_azelDir=&quot;/users/joe/map65/install/&quot;;
+  m_saveDir=&quot;/users/joe/jtms3/install/save&quot;;
   m_txFreq=125;
   m_setftx=0;
   m_loopall=false;
@@ -126,7 +119,7 @@
   m_sec0=-1;
   m_hsym0=-1;
   m_palette=&quot;CuteSDR&quot;;
-  m_map65RxLog=1;                     //Write Date and Time to all65.txt
+  m_jtms3RxLog=1;                     //Write Date and Time to RxLog
   m_nutc0=9999;
   m_kb8rq=false;
   m_NB=false;
@@ -173,7 +166,7 @@
   lockFile.open(QIODevice::ReadWrite);
   QFile quitFile(m_appDir + &quot;/.lock&quot;);
   quitFile.remove();
-  proc_m65.start(QDir::toNativeSeparators(m_appDir + &quot;/m65 -s&quot;));
+//  proc_m65.start(QDir::toNativeSeparators(m_appDir + &quot;/m65 -s&quot;));
 
   m_pbdecoding_style1=&quot;QPushButton{background-color: cyan; \
       border-style: outset; border-width: 1px; border-radius: 5px; \
@@ -187,13 +180,7 @@
 
   genStdMsgs(&quot;&quot;);
 
-  on_actionAstro_Data_triggered();           //Create the other windows
   on_actionWide_Waterfall_triggered();
-  on_actionMessages_triggered();
-  on_actionBand_Map_triggered();
-  g_pMessages-&gt;setColors(m_colors);
-  g_pBandMap-&gt;setColors(m_colors);
-  g_pAstro-&gt;setFontSize(m_astroFont);
   if(m_mode==&quot;JT65A&quot;) on_actionJT65A_triggered();
   if(m_mode==&quot;JT65B&quot;) on_actionJT65B_triggered();
   if(m_mode==&quot;JT65C&quot;) on_actionJT65C_triggered();
@@ -276,7 +263,7 @@
 //-------------------------------------------------------- writeSettings()
 void MainWindow::writeSettings()
 {
-  QString inifile = m_appDir + &quot;/map65.ini&quot;;
+  QString inifile = m_appDir + &quot;/jtms3.ini&quot;;
   QSettings settings(inifile, QSettings::IniFormat);
 
   settings.beginGroup(&quot;MainWindow&quot;);
@@ -286,23 +273,11 @@
   settings.setValue(&quot;DXcall&quot;,ui-&gt;dxCallEntry-&gt;text());
   settings.setValue(&quot;DXgrid&quot;,ui-&gt;dxGridEntry-&gt;text());
 
-  if(g_pAstro-&gt;isVisible()) {
-    m_astroGeom = g_pAstro-&gt;geometry();
-    settings.setValue(&quot;AstroGeom&quot;,m_astroGeom);
-  }
-
   if(g_pWideGraph-&gt;isVisible()) {
     m_wideGraphGeom = g_pWideGraph-&gt;geometry();
     settings.setValue(&quot;WideGraphGeom&quot;,m_wideGraphGeom);
   }
-  if(g_pMessages-&gt;isVisible()) {
-    m_messagesGeom = g_pMessages-&gt;geometry();
-    settings.setValue(&quot;MessagesGeom&quot;,m_messagesGeom);
-  }
-  if(g_pBandMap-&gt;isVisible()) {
-    m_bandMapGeom = g_pBandMap-&gt;geometry();
-    settings.setValue(&quot;BandMapGeom&quot;,m_bandMapGeom);
-  }
+
   settings.endGroup();
 
   settings.beginGroup(&quot;Common&quot;);
@@ -310,7 +285,6 @@
   settings.setValue(&quot;MyGrid&quot;,m_myGrid);
   settings.setValue(&quot;IDint&quot;,m_idInt);
   settings.setValue(&quot;PTTport&quot;,m_pttPort);
-  settings.setValue(&quot;AstroFont&quot;,m_astroFont);
   settings.setValue(&quot;Xpol&quot;,m_xpol);
   settings.setValue(&quot;XpolX&quot;,m_xpolx);
   settings.setValue(&quot;SaveDir&quot;,m_saveDir);
@@ -358,21 +332,14 @@
 //---------------------------------------------------------- readSettings()
 void MainWindow::readSettings()
 {
-  QString inifile = m_appDir + &quot;/map65.ini&quot;;
+  QString inifile = m_appDir + &quot;/jtms3.ini&quot;;
   QSettings settings(inifile, QSettings::IniFormat);
   settings.beginGroup(&quot;MainWindow&quot;);
   restoreGeometry(settings.value(&quot;geometry&quot;).toByteArray());
   ui-&gt;dxCallEntry-&gt;setText(settings.value(&quot;DXcall&quot;,&quot;&quot;).toString());
   ui-&gt;dxGridEntry-&gt;setText(settings.value(&quot;DXgrid&quot;,&quot;&quot;).toString());
-
-  m_astroGeom = settings.value(&quot;AstroGeom&quot;, QRect(71,390,227,403)).toRect();
-
   m_wideGraphGeom = settings.value(&quot;WideGraphGeom&quot;, \
                                    QRect(45,30,1023,340)).toRect();
-  m_messagesGeom = settings.value(&quot;MessagesGeom&quot;, \
-                                  QRect(800,400,381,400)).toRect();
-  m_bandMapGeom = settings.value(&quot;BandMapGeom&quot;, \
-                                  QRect(280,400,142,400)).toRect();
   m_path = settings.value(&quot;MRUdir&quot;, m_appDir + &quot;/save&quot;).toString();
   m_txFirst = settings.value(&quot;TxFirst&quot;,false).toBool();
   ui-&gt;txFirstCheckBox-&gt;setChecked(m_txFirst);
@@ -383,7 +350,6 @@
   m_myGrid=settings.value(&quot;MyGrid&quot;,&quot;&quot;).toString();
   m_idInt=settings.value(&quot;IDint&quot;,0).toInt();
   m_pttPort=settings.value(&quot;PTTport&quot;,0).toInt();
-  m_astroFont=settings.value(&quot;AstroFont&quot;,20).toInt();
   m_xpol=settings.value(&quot;Xpol&quot;,false).toBool();
   ui-&gt;actionFind_Delta_Phi-&gt;setEnabled(m_xpol);
   m_xpolx=settings.value(&quot;XpolX&quot;,false).toBool();
@@ -574,7 +540,6 @@
   dlg.m_myGrid=m_myGrid;
   dlg.m_idInt=m_idInt;
   dlg.m_pttPort=m_pttPort;
-  dlg.m_astroFont=m_astroFont;
   dlg.m_xpol=m_xpol;
   dlg.m_xpolx=m_xpolx;
   dlg.m_saveDir=m_saveDir;
@@ -602,8 +567,6 @@
     m_myGrid=dlg.m_myGrid;
     m_idInt=dlg.m_idInt;
     m_pttPort=dlg.m_pttPort;
-    m_astroFont=dlg.m_astroFont;
-    if(g_pAstro-&gt;isVisible()) g_pAstro-&gt;setFontSize(m_astroFont);
     m_xpol=dlg.m_xpol;
     ui-&gt;actionFind_Delta_Phi-&gt;setEnabled(m_xpol);
     m_xpolx=dlg.m_xpolx;
@@ -626,8 +589,6 @@
     m_10db=dlg.m_10db;
     m_initIQplus=dlg.m_initIQplus;
     m_colors=dlg.m_colors;
-    g_pMessages-&gt;setColors(m_colors);
-    g_pBandMap-&gt;setColors(m_colors);
     m_cal570=dlg.m_cal570;
     m_mult570=dlg.m_mult570;
     g_pWideGraph-&gt;m_mult570=m_mult570;
@@ -875,23 +836,10 @@
 void MainWindow::on_actionOnline_Users_Guide_triggered()      //Display manual
 {
   QDesktopServices::openUrl(QUrl(
-  &quot;<A HREF="http://www.physics.princeton.edu/pulsar/K1JT/MAP65_Users_Guide.pdf">http://www.physics.princeton.edu/pulsar/K1JT/MAP65_Users_Guide.pdf</A>&quot;,
+  &quot;<A HREF="http://www.physics.princeton.edu/pulsar/K1JT/JTMS3_Users_Guide.pdf">http://www.physics.princeton.edu/pulsar/K1JT/JTMS3_Users_Guide.pdf</A>&quot;,
                               QUrl::TolerantMode));
 }
 
-void MainWindow::on_actionAstro_Data_triggered()             //Display Astro
-{
-  if(g_pAstro==NULL) {
-    g_pAstro = new Astro(0);
-    g_pAstro-&gt;setWindowTitle(&quot;Astronomical Data&quot;);
-    Qt::WindowFlags flags = Qt::Dialog | Qt::WindowCloseButtonHint |
-        Qt::WindowMinimizeButtonHint;
-    g_pAstro-&gt;setWindowFlags(flags);
-    g_pAstro-&gt;setGeometry(m_astroGeom);
-  }
-  g_pAstro-&gt;show();
-}
-
 void MainWindow::on_actionWide_Waterfall_triggered()      //Display Waterfalls
 {
   if(g_pWideGraph==NULL) {
@@ -909,46 +857,13 @@
   g_pWideGraph-&gt;show();
 }
 
-void MainWindow::on_actionBand_Map_triggered()              //Display BandMap
-{
-  if(g_pBandMap==NULL) {
-    g_pBandMap = new BandMap(0);
-    g_pBandMap-&gt;setWindowTitle(&quot;Band Map&quot;);
-    Qt::WindowFlags flags = Qt::Dialog | Qt::WindowCloseButtonHint |
-        Qt::WindowMinimizeButtonHint;
-    g_pBandMap-&gt;setWindowFlags(flags);
-    g_pBandMap-&gt;setGeometry(m_bandMapGeom);
-  }
-  g_pBandMap-&gt;show();
-}
-
-void MainWindow::on_actionMessages_triggered()              //Display Messages
-{
-  if(g_pMessages==NULL) {
-    g_pMessages = new Messages(0);
-    g_pMessages-&gt;setWindowTitle(&quot;Messages&quot;);
-    Qt::WindowFlags flags = Qt::Dialog | Qt::WindowCloseButtonHint |
-        Qt::WindowMinimizeButtonHint;
-    g_pMessages-&gt;setWindowFlags(flags);
-    g_pMessages-&gt;setGeometry(m_messagesGeom);
-    connect(g_pMessages, SIGNAL(click2OnCallsign(QString, QString)),this,
-            SLOT(doubleClickOnMessages(QString, QString)));
-  }
-  g_pMessages-&gt;show();
-}
-
 void MainWindow::on_actionOpen_triggered()                     //Open File
 {
   m_monitoring=false;
   soundInThread.setMonitoring(m_monitoring);
   QString fname;
-  if(m_xpol) {
-    fname=QFileDialog::getOpenFileName(this, &quot;Open File&quot;, m_path,
-                                       &quot;MAP65 Files (*.tf2)&quot;);
-  } else {
-    fname=QFileDialog::getOpenFileName(this, &quot;Open File&quot;, m_path,
-                                       &quot;MAP65 Files (*.iq)&quot;);
-  }
+  fname=QFileDialog::getOpenFileName(this, &quot;Open File&quot;, m_path,
+                                       &quot;JTMS3 Files (*.wav)&quot;);
   if(fname != &quot;&quot;) {
     m_path=fname;
     int i;
@@ -1050,17 +965,10 @@
     }
   }
 }
-                                          //Clear BandMap and Messages windows
-void MainWindow::on_actionErase_Band_Map_and_Messages_triggered()
-{
-  g_pBandMap-&gt;setText(&quot;&quot;);
-  g_pMessages-&gt;setText(&quot;&quot;);
-  m_map65RxLog |= 4;
-}
 
 void MainWindow::on_actionFind_Delta_Phi_triggered()              //Find dPhi
 {
-  m_map65RxLog |= 8;
+  m_jtms3RxLog |= 8;
   on_DecodeButton_clicked();
 }
 
@@ -1186,9 +1094,9 @@
   datcom_.ntol=m_tol;
   datcom_.nxant=0;
   if(m_xpolx) datcom_.nxant=1;
-  if(datcom_.nutc &lt; m_nutc0) m_map65RxLog |= 1;  //Date and Time to all65.txt
+  if(datcom_.nutc &lt; m_nutc0) m_jtms3RxLog |= 1;  //Date and Time to all65.txt
   m_nutc0=datcom_.nutc;
-  datcom_.map65RxLog=m_map65RxLog;
+//  datcom_.jtms3RxLog=m_jtms3RxLog;
   datcom_.nfsample=96000;
   if(!m_fs96000) datcom_.nfsample=95238;
   datcom_.nxpol=0;
@@ -1251,15 +1159,13 @@
     QByteArray t=proc_m65.readLine();
     if(t.indexOf(&quot;&lt;m65aFinished&gt;&quot;) &gt;= 0) {
       if(m_widebandDecode) {
-        g_pMessages-&gt;setText(m_messagesText);
-        g_pBandMap-&gt;setText(m_bandmapText);
         m_widebandDecode=false;
       }
       QFile lockFile(m_appDir + &quot;/.lock&quot;);
       lockFile.open(QIODevice::ReadWrite);
       ui-&gt;DecodeButton-&gt;setStyleSheet(&quot;&quot;);
       decodeBusy(false);
-      m_map65RxLog=0;
+      m_jtms3RxLog=0;
       m_startAnother=m_loopall;
       return;
     }
@@ -1270,12 +1176,10 @@
       if(n&lt;30) ui-&gt;decodedTextBrowser-&gt;append(t.mid(1,n-3));
       n=ui-&gt;decodedTextBrowser-&gt;verticalScrollBar()-&gt;maximum();
       ui-&gt;decodedTextBrowser-&gt;verticalScrollBar()-&gt;setValue(n);
-      m_messagesText=&quot;&quot;;
-      m_bandmapText=&quot;&quot;;
     }
 
     if(t.indexOf(&quot;@&quot;) &gt;= 0) {
-      m_messagesText += t.mid(1);
+//      m_messagesText += t.mid(1);
       m_widebandDecode=true;
     }
 
@@ -1289,7 +1193,7 @@
         } else {
           q=q.mid(1,4) + &quot; *&quot; + q.mid(5);
         }
-        m_bandmapText += q;
+//        m_bandmapText += q;
       }
     }
   }
@@ -1373,7 +1277,7 @@
     msgsent[22]=0;
 
     if(m_restart) {
-      QFile f(&quot;map65_tx.log&quot;);
+      QFile f(&quot;jtms3_tx.log&quot;);
       f.open(QIODevice::WriteOnly | QIODevice::Text | QIODevice::Append);
       QTextStream out(&amp;f);
       out &lt;&lt; QDateTime::currentDateTimeUtc().toString(&quot;yyyy-MMM-dd hh:mm&quot;)
@@ -1395,7 +1299,7 @@
     btxok=true;
     m_transmitting=true;
 
-    QFile f(&quot;map65_tx.log&quot;);
+    QFile f(&quot;jtms3_tx.log&quot;);
     f.open(QIODevice::WriteOnly | QIODevice::Text | QIODevice::Append);
     QTextStream out(&amp;f);
     out &lt;&lt; QDateTime::currentDateTimeUtc().toString(&quot;yyyy-MMM-dd hh:mm&quot;)
@@ -1485,8 +1389,6 @@
 
     QDateTime t = QDateTime::currentDateTimeUtc();
     int fQSO=g_pWideGraph-&gt;QSOfreq();
-    g_pAstro-&gt;astroUpdate(t, m_myGrid, m_hisGrid, fQSO, m_setftx,
-                          m_txFreq, m_azelDir);
     m_setftx=0;
     QString utc = &quot; &quot; + t.time().toString() + &quot; &quot;;
     ui-&gt;labUTC-&gt;setText(utc);
@@ -1607,26 +1509,6 @@
     ui-&gt;txrb1-&gt;setChecked(true);
   }
 }
-                                                      //doubleClickOnMessages
-void MainWindow::doubleClickOnMessages(QString hiscall, QString t2)
-{
-  if(m_worked[hiscall]) {
-    msgBox(&quot;Possible dupe: &quot; + hiscall + &quot; already in log.&quot;);
-  }
-  ui-&gt;dxCallEntry-&gt;setText(hiscall);
-  int n = 60*t2.mid(13,2).toInt() + t2.mid(15,2).toInt();
-  m_txFirst = ((n%2) == 1);
-  ui-&gt;txFirstCheckBox-&gt;setChecked(m_txFirst);
-  lookup();
-  genStdMsgs(&quot;&quot;);
-  if(t2.indexOf(m_myCall)&gt;0) {
-    m_ntx=2;
-    ui-&gt;txrb2-&gt;setChecked(true);
-  } else {
-    m_ntx=1;
-    ui-&gt;txrb1-&gt;setChecked(true);
-  }
-}
 
 void MainWindow::genStdMsgs(QString rpt)                       //genStdMsgs()
 {
@@ -1894,23 +1776,25 @@
   m_worked[m_hisCall]=true;
 }
 
-void MainWindow::on_actionErase_map65_rx_log_triggered()     //Erase Rx log
+/*
+void MainWindow::on_actionErase_jtms3_rx_log_triggered()     //Erase Rx log
 {
   int ret = QMessageBox::warning(this, &quot;Confirm Erase&quot;,
-      &quot;Are you sure you want to erase file map65_rx.log ?&quot;,
+      &quot;Are you sure you want to erase file jtms3_rx.log ?&quot;,
        QMessageBox::Yes | QMessageBox::No, QMessageBox::Yes);
   if(ret==QMessageBox::Yes) {
-    m_map65RxLog |= 2;                      // Rewind map65_rx.log
+    m_jtms3RxLog |= 2;                      // Rewind jtms3_rx.log
   }
 }
+*/
 
-void MainWindow::on_actionErase_map65_tx_log_triggered()     //Erase Tx log
+void MainWindow::on_actionErase_jtms3_tx_log_triggered()     //Erase Tx log
 {
   int ret = QMessageBox::warning(this, &quot;Confirm Erase&quot;,
-      &quot;Are you sure you want to erase file map65_tx.log ?&quot;,
+      &quot;Are you sure you want to erase file jtms3_tx.log ?&quot;,
        QMessageBox::Yes | QMessageBox::No, QMessageBox::Yes);
   if(ret==QMessageBox::Yes) {
-    QFile f(&quot;map65_tx.log&quot;);
+    QFile f(&quot;jtms3_tx.log&quot;);
     f.remove();
   }
 }

Modified: branches/jtms3/mainwindow.h
===================================================================
--- branches/jtms3/mainwindow.h	2012-07-02 14:50:41 UTC (rev 2474)
+++ branches/jtms3/mainwindow.h	2012-07-02 15:33:33 UTC (rev 2475)
@@ -39,7 +39,6 @@
   void m65_error();
   void guiUpdate();
   void doubleClickOnCall(QString hiscall, bool ctrl);
-  void doubleClickOnMessages(QString hiscall, QString t2);
 
 protected:
   virtual void keyPressEvent( QKeyEvent *e );
@@ -63,17 +62,13 @@
   void on_autoButton_clicked();
   void on_stopTxButton_clicked();
   void on_tolSpinBox_valueChanged(int arg1);
-  void on_actionAstro_Data_triggered();
   void on_stopButton_clicked();
   void on_actionOnline_Users_Guide_triggered();
   void on_actionWide_Waterfall_triggered();
-  void on_actionBand_Map_triggered();
-  void on_actionMessages_triggered();
   void on_actionOpen_triggered();
   void on_actionOpen_next_in_directory_triggered();
   void on_actionDecode_remaining_files_in_directory_triggered();
   void on_actionDelete_all_tf2_files_in_SaveDir_triggered();
-  void on_actionErase_Band_Map_and_Messages_triggered();
   void on_actionFind_Delta_Phi_triggered();
   void on_actionF4_sets_Tx6_triggered();
   void on_actionOnly_EME_calls_triggered();
@@ -107,8 +102,8 @@
   void on_genStdMsgsPushButton_clicked();
   void bumpDF(int n);
   void on_logQSOButton_clicked();
-  void on_actionErase_map65_rx_log_triggered();
-  void on_actionErase_map65_tx_log_triggered();
+//  void on_actionErase_jtms3_rx_log_triggered();
+  void on_actionErase_jtms3_tx_log_triggered();
   void on_NBcheckBox_toggled(bool checked);
   void on_actionJT65A_triggered();
   void on_actionJT65B_triggered();
@@ -134,7 +129,6 @@
     qint32  m_QSOfreq0;
     qint32  m_ntx;
     qint32  m_pttPort;
-    qint32  m_astroFont;
     qint32  m_timeout;
     qint32  m_dPhi;
     qint32  m_fCal;
@@ -142,7 +136,7 @@
     qint32  m_setftx;
     qint32  m_ndepth;
     qint32  m_sec0;
-    qint32  m_map65RxLog;
+    qint32  m_jtms3RxLog;
     qint32  m_nutc0;
     qint32  m_mode65;
     qint32  m_nrx;
@@ -190,10 +184,7 @@
     float   m_phasey;
     float   m_pctZap;
 
-    QRect   m_astroGeom;
     QRect   m_wideGraphGeom;
-    QRect   m_messagesGeom;
-    QRect   m_bandMapGeom;
 
     QLabel* lab1;                            // labels in status bar
     QLabel* lab2;
@@ -216,8 +207,6 @@
     QString m_pbdecoding_style1;
     QString m_pbmonitor_style;
     QString m_pbAutoOn_style;
-    QString m_messagesText;
-    QString m_bandmapText;
     QString m_myCall;
     QString m_myGrid;
     QString m_hisCall;

Deleted: branches/jtms3/map65.iss
===================================================================
--- branches/jtms3/map65.iss	2012-07-02 14:50:41 UTC (rev 2474)
+++ branches/jtms3/map65.iss	2012-07-02 15:33:33 UTC (rev 2475)
@@ -1,31 +0,0 @@
-[Setup]
-AppName=MAP65
-AppVerName=MAP65 Version 2.3.0 r2471
-AppCopyright=Copyright (C) 2001-2012 by Joe Taylor, K1JT
-DefaultDirName=c:\MAP65
-DefaultGroupName=MAP65
-
-[Files]
-Source: &quot;c:\Users\joe\wsjt\map65_install\m65.exe&quot;;           DestDir: &quot;{app}&quot;
-Source: &quot;c:\Users\joe\wsjt\map65_install\map65.exe&quot;;         DestDir: &quot;{app}&quot;
-Source: &quot;c:\Users\joe\wsjt\map65_install\wsjt.ico&quot;;          DestDir: &quot;{app}&quot;
-Source: &quot;c:\Users\joe\wsjt\map65_install\kvasd.exe&quot;;         DestDir: &quot;{app}&quot;
-Source: &quot;c:\Users\joe\wsjt\map65_install\CALL3.TXT&quot;;         DestDir: &quot;{app}&quot;; Flags: onlyifdoesntexist
-Source: &quot;c:\Users\joe\wsjt\map65_install\fftwf-wisdom.exe&quot;;  DestDir: &quot;{app}&quot;; Flags: onlyifdoesntexist
-Source: &quot;c:\Users\joe\wsjt\map65_install\wisdom1.bat&quot;;       DestDir: &quot;{app}&quot;;
-Source: &quot;c:\Users\joe\wsjt\map65_install\wisdom2.bat&quot;;       DestDir: &quot;{app}&quot;;
-Source: &quot;c:\Users\joe\wsjt\map65_install\afmhot.dat&quot;;        DestDir: &quot;{app}&quot;;
-Source: &quot;c:\Users\joe\wsjt\map65_install\blue.dat&quot;;          DestDir: &quot;{app}&quot;;
-Source: &quot;c:\Users\joe\wsjt\map65_install\qthid.exe&quot;;         DestDir: &quot;{app}&quot;;
-
-Source: &quot;c:\Users\joe\wsjt\QtSupport\*.dll&quot;;                 DestDir: &quot;{sys}&quot;;  Flags: onlyifdoesntexist
-
-Source: &quot;c:\Users\joe\wsjt\map65_install\save\dummy&quot;;        DestDir: &quot;{app}\save&quot;;
-
-[Icons]
-Name: &quot;{group}\MAP65&quot;;        Filename: &quot;{app}\map65.exe&quot;;   WorkingDir: {app}; IconFilename: {app}\wsjt.ico
-Name: &quot;{userdesktop}\MAP65&quot;;  Filename: &quot;{app}\map65.exe&quot;;   WorkingDir: {app}; IconFilename: {app}\wsjt.ico
-
-[Run]
-Filename: &quot;{app}\wisdom1.bat&quot;; Description: &quot;Optimize plans for FFTs (takes a few minutes)&quot;; Flags: postinstall
-Filename: &quot;{app}\wisdom2.bat&quot;; Description: &quot;Patiently optimize plans for FFTs (up to one hour)&quot;; Flags: postinstall unchecked

Deleted: branches/jtms3/map65.pro
===================================================================
--- branches/jtms3/map65.pro	2012-07-02 14:50:41 UTC (rev 2474)
+++ branches/jtms3/map65.pro	2012-07-02 15:33:33 UTC (rev 2475)
@@ -1,77 +0,0 @@
-#-------------------------------------------------
-#
-# Project created by QtCreator 2011-07-07T08:39:24
-#
-#-------------------------------------------------
-
-QT       += core gui network
-CONFIG   += qwt thread
-#CONFIG   += console
-
-TARGET = map65
-VERSION = 2.3.0
-TEMPLATE = app
-
-win32 {
-DEFINES = WIN32
-DESTDIR = ../map65_install
-F90 = g95
-g95.output = ${QMAKE_FILE_BASE}.o
-g95.commands = $$F90 -c -O2 -o ${QMAKE_FILE_OUT} ${QMAKE_FILE_NAME}
-g95.input = F90_SOURCES
-QMAKE_EXTRA_COMPILERS += g95
-}
-
-unix {
-DEFINES = UNIX
-DESTDIR = ../map65_install
-F90 = gfortran
-gfortran.output = ${QMAKE_FILE_BASE}.o
-gfortran.commands = $$F90 -c -O2 -o ${QMAKE_FILE_OUT} ${QMAKE_FILE_NAME}
-gfortran.input = F90_SOURCES
-QMAKE_EXTRA_COMPILERS += gfortran
-}
-
-SOURCES += main.cpp mainwindow.cpp plotter.cpp about.cpp \
-    soundin.cpp soundout.cpp devsetup.cpp \
-    widegraph.cpp getfile.cpp messages.cpp bandmap.cpp \
-    astro.cpp displaytext.cpp getdev.cpp
-
-win32 {
-SOURCES += killbyname.cpp     set570.cpp
-}
-
-HEADERS  += mainwindow.h plotter.h soundin.h soundout.h \
-            about.h devsetup.h widegraph.h getfile.h messages.h \
-            bandmap.h commons.h sleep.h astro.h displaytext.h \
-
-DEFINES += __cplusplus
-
-FORMS    += mainwindow.ui about.ui devsetup.ui widegraph.ui \
-    messages.ui bandmap.ui astro.ui
-
-RC_FILE = map65.rc
-
-unix {
-INCLUDEPATH += $$quote(/usr/include/qwt-qt4)
-LIBS += -lfftw3f /usr/lib/libgfortran.so.3
-LIBS += ../map65/libm65/libm65.a
-LIBS += /usr/lib/libqwt-qt4.so
-LIBS += -lportaudio
-#LIBS +- -lusb
-}
-
-win32 {
-INCLUDEPATH += c:/qwt-6.0.1/include
-LIBS += ../map65/libm65/libm65.a
-LIBS += ../map65/libfftw3f_win.a
-LIBS += ../QtSupport/palir-02.dll
-LIBS += libwsock32
-LIBS += C:/MinGW/lib/libf95.a
-CONFIG(release) {
-   LIBS += C:/qwt-6.0.1/lib/qwt.dll
-} else {
-   LIBS += C:/qwt-6.0.1/lib/qwtd.dll
-}
-LIBS += -lusb
-}

Deleted: branches/jtms3/map65.rc
===================================================================
--- branches/jtms3/map65.rc	2012-07-02 14:50:41 UTC (rev 2474)
+++ branches/jtms3/map65.rc	2012-07-02 15:33:33 UTC (rev 2475)
@@ -1 +0,0 @@
-IDI_ICON1       ICON    DISCARDABLE     &quot;wsjt.ico&quot;

Deleted: branches/jtms3/messages.cpp
===================================================================
--- branches/jtms3/messages.cpp	2012-07-02 14:50:41 UTC (rev 2474)
+++ branches/jtms3/messages.cpp	2012-07-02 15:33:33 UTC (rev 2475)
@@ -1,81 +0,0 @@
-#include &quot;messages.h&quot;
-#include &quot;ui_messages.h&quot;
-#include &quot;mainwindow.h&quot;
-
-Messages::Messages(QWidget *parent) :
-  QDialog(parent),
-  ui(new Ui::Messages)
-{
-  ui-&gt;setupUi(this);
-  ui-&gt;messagesTextBrowser-&gt;setStyleSheet( \
-          &quot;QTextBrowser { background-color : #000066; color : red; }&quot;);
-  ui-&gt;messagesTextBrowser-&gt;clear();
-  m_cqOnly=false;
-  connect(ui-&gt;messagesTextBrowser,SIGNAL(selectCallsign(bool)),this,
-          SLOT(selectCallsign2(bool)));
-}
-
-Messages::~Messages()
-{
-  delete ui;
-}
-
-void Messages::setText(QString t)
-{
-  QString cfreq,cfreq0;
-  m_t=t;
-
-  QString s=&quot;QTextBrowser{background-color: &quot;+m_colorBackground+&quot;}&quot;;
-  ui-&gt;messagesTextBrowser-&gt;setStyleSheet(s);
-
-  ui-&gt;messagesTextBrowser-&gt;clear();
-  QStringList lines = t.split( &quot;\n&quot;, QString::SkipEmptyParts );
-  foreach( QString line, lines ) {
-    QString t1=line.mid(0,48);
-    if(m_cqOnly and t1.indexOf(&quot; CQ &quot;) &lt; 0) continue;
-    int n=line.mid(48,2).toInt();
-    if(n==0) ui-&gt;messagesTextBrowser-&gt;setTextColor(m_color0);
-    if(n==1) ui-&gt;messagesTextBrowser-&gt;setTextColor(m_color1);
-    if(n==2) ui-&gt;messagesTextBrowser-&gt;setTextColor(m_color2);
-    if(n&gt;=3) ui-&gt;messagesTextBrowser-&gt;setTextColor(m_color3);
-    cfreq=t1.mid(0,3);
-    if(cfreq == cfreq0) {
-      t1=&quot;   &quot; + t1.mid(3,-1);
-    }
-    cfreq0=cfreq;
-    ui-&gt;messagesTextBrowser-&gt;append(t1);
-  }
-}
-
-void Messages::selectCallsign2(bool ctrl)
-{
-  QString t = ui-&gt;messagesTextBrowser-&gt;toPlainText();   //Full contents
-  int i=ui-&gt;messagesTextBrowser-&gt;textCursor().position();
-  int i0=t.lastIndexOf(&quot; &quot;,i);
-  int i1=t.indexOf(&quot; &quot;,i);
-  QString hiscall=t.mid(i0+1,i1-i0-1);
-  if(hiscall!=&quot;&quot;) {
-    if(hiscall.length() &lt; 13) {
-      QString t1 = t.mid(0,i);              //contents up to text cursor
-      int i1=t1.lastIndexOf(&quot;\n&quot;) + 1;
-      QString t2 = t1.mid(i1,i-i1);         //selected line
-      emit click2OnCallsign(hiscall,t2);
-    }
-  }
-}
-
-void Messages::on_checkBox_stateChanged(int n)
-{
-  m_cqOnly = (n!=0);
-  setText(m_t);
-}
-
-void Messages::setColors(QString t)
-{
-  m_colorBackground = &quot;#&quot;+t.mid(0,6);
-  m_color0 = &quot;#&quot;+t.mid(6,6);
-  m_color1 = &quot;#&quot;+t.mid(12,6);
-  m_color2 = &quot;#&quot;+t.mid(18,6);
-  m_color3 = &quot;#&quot;+t.mid(24,6);
-  setText(m_t);
-}

Deleted: branches/jtms3/messages.h
===================================================================
--- branches/jtms3/messages.h	2012-07-02 14:50:41 UTC (rev 2474)
+++ branches/jtms3/messages.h	2012-07-02 15:33:33 UTC (rev 2475)
@@ -1,40 +0,0 @@
-#ifndef MESSAGES_H
-#define MESSAGES_H
-
-#include &lt;QDialog&gt;
-
-namespace Ui {
-  class Messages;
-}
-
-class Messages : public QDialog
-{
-  Q_OBJECT
-
-public:
-  explicit Messages(QWidget *parent = 0);
-  void setText(QString t);
-  void setColors(QString t);
-
-    ~Messages();
-
-signals:
-  void click2OnCallsign(QString hiscall, QString t2);
-
-private slots:
-  void selectCallsign2(bool ctrl);
-  void on_checkBox_stateChanged(int arg1);
-
-private:
-    Ui::Messages *ui;
-    QString m_t;
-    QString m_colorBackground;
-    QString m_color0;
-    QString m_color1;
-    QString m_color2;
-    QString m_color3;
-
-    bool m_cqOnly;
-};
-
-#endif // MESSAGES_H

Deleted: branches/jtms3/messages.ui
===================================================================
--- branches/jtms3/messages.ui	2012-07-02 14:50:41 UTC (rev 2474)
+++ branches/jtms3/messages.ui	2012-07-02 15:33:33 UTC (rev 2475)
@@ -1,100 +0,0 @@
-&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
-&lt;ui version=&quot;4.0&quot;&gt;
- &lt;class&gt;Messages&lt;/class&gt;
- &lt;widget class=&quot;QDialog&quot; name=&quot;Messages&quot;&gt;
-  &lt;property name=&quot;geometry&quot;&gt;
-   &lt;rect&gt;
-    &lt;x&gt;0&lt;/x&gt;
-    &lt;y&gt;0&lt;/y&gt;
-    &lt;width&gt;399&lt;/width&gt;
-    &lt;height&gt;595&lt;/height&gt;
-   &lt;/rect&gt;
-  &lt;/property&gt;
-  &lt;property name=&quot;sizePolicy&quot;&gt;
-   &lt;sizepolicy hsizetype=&quot;Preferred&quot; vsizetype=&quot;Expanding&quot;&gt;
-    &lt;horstretch&gt;0&lt;/horstretch&gt;
-    &lt;verstretch&gt;0&lt;/verstretch&gt;
-   &lt;/sizepolicy&gt;
-  &lt;/property&gt;
-  &lt;property name=&quot;windowTitle&quot;&gt;
-   &lt;string&gt;Dialog&lt;/string&gt;
-  &lt;/property&gt;
-  &lt;layout class=&quot;QGridLayout&quot; name=&quot;gridLayout&quot;&gt;
-   &lt;item row=&quot;0&quot; column=&quot;0&quot;&gt;
-    &lt;layout class=&quot;QVBoxLayout&quot; name=&quot;verticalLayout&quot;&gt;
-     &lt;property name=&quot;sizeConstraint&quot;&gt;
-      &lt;enum&gt;QLayout::SetDefaultConstraint&lt;/enum&gt;
-     &lt;/property&gt;
-     &lt;item&gt;
-      &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;horizontalLayout&quot;&gt;
-       &lt;item&gt;
-        &lt;widget class=&quot;QLabel&quot; name=&quot;lab1&quot;&gt;
-         &lt;property name=&quot;sizePolicy&quot;&gt;
-          &lt;sizepolicy hsizetype=&quot;Preferred&quot; vsizetype=&quot;Preferred&quot;&gt;
-           &lt;horstretch&gt;0&lt;/horstretch&gt;
-           &lt;verstretch&gt;0&lt;/verstretch&gt;
-          &lt;/sizepolicy&gt;
-         &lt;/property&gt;
-         &lt;property name=&quot;text&quot;&gt;
-          &lt;string&gt; Freq     DF     Pol     UTC       dB&lt;/string&gt;
-         &lt;/property&gt;
-        &lt;/widget&gt;
-       &lt;/item&gt;
-       &lt;item&gt;
-        &lt;spacer name=&quot;horizontalSpacer&quot;&gt;
-         &lt;property name=&quot;orientation&quot;&gt;
-          &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
-         &lt;/property&gt;
-         &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
-          &lt;size&gt;
-           &lt;width&gt;40&lt;/width&gt;
-           &lt;height&gt;20&lt;/height&gt;
-          &lt;/size&gt;
-         &lt;/property&gt;
-        &lt;/spacer&gt;
-       &lt;/item&gt;
-       &lt;item&gt;
-        &lt;widget class=&quot;QCheckBox&quot; name=&quot;checkBox&quot;&gt;
-         &lt;property name=&quot;text&quot;&gt;
-          &lt;string&gt;CQ Only&lt;/string&gt;
-         &lt;/property&gt;
-        &lt;/widget&gt;
-       &lt;/item&gt;
-      &lt;/layout&gt;
-     &lt;/item&gt;
-     &lt;item&gt;
-      &lt;widget class=&quot;DisplayText&quot; name=&quot;messagesTextBrowser&quot;&gt;
-       &lt;property name=&quot;sizePolicy&quot;&gt;
-        &lt;sizepolicy hsizetype=&quot;MinimumExpanding&quot; vsizetype=&quot;MinimumExpanding&quot;&gt;
-         &lt;horstretch&gt;0&lt;/horstretch&gt;
-         &lt;verstretch&gt;0&lt;/verstretch&gt;
-        &lt;/sizepolicy&gt;
-       &lt;/property&gt;
-       &lt;property name=&quot;minimumSize&quot;&gt;
-        &lt;size&gt;
-         &lt;width&gt;340&lt;/width&gt;
-         &lt;height&gt;0&lt;/height&gt;
-        &lt;/size&gt;
-       &lt;/property&gt;
-       &lt;property name=&quot;font&quot;&gt;
-        &lt;font&gt;
-         &lt;family&gt;Courier New&lt;/family&gt;
-         &lt;pointsize&gt;9&lt;/pointsize&gt;
-        &lt;/font&gt;
-       &lt;/property&gt;
-      &lt;/widget&gt;
-     &lt;/item&gt;
-    &lt;/layout&gt;
-   &lt;/item&gt;
-  &lt;/layout&gt;
- &lt;/widget&gt;
- &lt;customwidgets&gt;
-  &lt;customwidget&gt;
-   &lt;class&gt;DisplayText&lt;/class&gt;
-   &lt;extends&gt;QTextBrowser&lt;/extends&gt;
-   &lt;header&gt;displaytext.h&lt;/header&gt;
-  &lt;/customwidget&gt;
- &lt;/customwidgets&gt;
- &lt;resources/&gt;
- &lt;connections/&gt;
-&lt;/ui&gt;

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002166.html">[WSJT-SVN] r2474 - branches
</A></li>
	<LI>Next message: <A HREF="002167.html">[WSJT-SVN] r2476 - branches/jtms3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2168">[ date ]</a>
              <a href="thread.html#2168">[ thread ]</a>
              <a href="subject.html#2168">[ subject ]</a>
              <a href="author.html#2168">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/wsjt-svn">More information about the wsjt-svn
mailing list</a><br>
</body></html>
