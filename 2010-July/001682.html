<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [WSJT-SVN] r1990 - in wsjt7a: . WsjtMod
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/wsjt-svn/2010-July/index.html" >
   <LINK REL="made" HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20r1990%20-%20in%20wsjt7a%3A%20.%20WsjtMod&In-Reply-To=%3C20100715131825.ECED7480C94%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001681.html">
   <LINK REL="Next"  HREF="001683.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[WSJT-SVN] r1990 - in wsjt7a: . WsjtMod</H1>
    <B>k1jt at mail.berlios.de</B> 
    <A HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20r1990%20-%20in%20wsjt7a%3A%20.%20WsjtMod&In-Reply-To=%3C20100715131825.ECED7480C94%40sheep.berlios.de%3E"
       TITLE="[WSJT-SVN] r1990 - in wsjt7a: . WsjtMod">k1jt at mail.berlios.de
       </A><BR>
    <I>Thu Jul 15 15:18:25 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001681.html">[WSJT-SVN] r1989 - wsjt7a
</A></li>
        <LI>Next message: <A HREF="001683.html">[WSJT-SVN] r1991 - wsjt7a
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1682">[ date ]</a>
              <a href="thread.html#1682">[ thread ]</a>
              <a href="subject.html#1682">[ subject ]</a>
              <a href="author.html#1682">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: k1jt
Date: 2010-07-15 15:18:25 +0200 (Thu, 15 Jul 2010)
New Revision: 1990

Added:
   wsjt7a/geniscat.f90
   wsjt7a/iscat.f90
Removed:
   wsjt7a/gen41.f90
   wsjt7a/jt41.f90
   wsjt7a/t1.f90
Modified:
   wsjt7a/WsjtMod/specjt.py
   wsjt7a/astro0.f90
   wsjt7a/audio_init.f90
   wsjt7a/decode1.f90
   wsjt7a/decode3.f90
   wsjt7a/fivehz.f90
   wsjt7a/savedata.f90
   wsjt7a/spec.f90
   wsjt7a/t74.f90
   wsjt7a/wsjt.py
   wsjt7a/wsjt1.f90
   wsjt7a/wsjtgen.f90
Log:
Added '-' to characters supported in JT41 mode.
Changed name JT41 to 'ISCAT' (or temporarily, 'ISCAT_2').


Modified: wsjt7a/WsjtMod/specjt.py
===================================================================
--- wsjt7a/WsjtMod/specjt.py	2010-07-13 20:41:20 UTC (rev 1989)
+++ wsjt7a/WsjtMod/specjt.py	2010-07-15 13:18:25 UTC (rev 1990)
@@ -152,8 +152,7 @@
 
 #---------------------------------------------------- set_freezedf
 def set_freezedf(event):
-    if g.mode[:4]=='JT65' or \
-       (g.mode[:3]=='JT4' and g.mode[:4]!='JT41'):
+    if g.mode[:4]=='JT65' or g.mode[:3]=='JT4':
         n=int(df*(event.x-288.7) + fmid - 1500)
         if nfr.get()==2: n=int(2*df*(event.x-375.5) + fmid - 1270.5)
 #        if n&lt;-600: n=-600
@@ -183,8 +182,7 @@
 # Mark sync tone and top JT65 tone (green) and shorthand tones (red)
         if(frange==2000):
             dx=288.7 + (1500-fmid)/df
-            if g.mode[:4]==&quot;JT65&quot; or \
-               (g.mode[:3]==&quot;JT4&quot; and g.mode[:4]!='JT41'):
+            if g.mode[:4]==&quot;JT65&quot; or g.mode[:3]==&quot;JT4&quot;:
                 color='green'
                 n=1
                 if g.mode[:4]==&quot;JT65&quot;:
@@ -202,8 +200,7 @@
                     color='red'
         if(frange==4000):
             dx=375 + (1270.5-fmid)/(2*df)
-            if g.mode[:4]==&quot;JT65&quot; or \
-               (g.mode[:3]==&quot;JT4&quot; and g.mode[:4]!='JT41'):
+            if g.mode[:4]==&quot;JT65&quot; or g.mode[:3]==&quot;JT4&quot;:
                 color='green'
                 n=1
                 if g.mode[:4]==&quot;JT65&quot;:
@@ -274,8 +271,7 @@
 
 #---------------------------------------------------- freeze_decode
 def freeze_decode(event):
-    if g.mode[:4]=='JT65' or \
-        (g.mode[:3]=='JT4' and g.mode[:4]!='JT41') and nspeed0.get()&lt;6:
+    if (g.mode[:4]=='JT65' or g.mode[:3]=='JT4') and nspeed0.get()&lt;6:
 # If decoder is busy or we are not monitoring, ignore request
         if Audio.gcom2.ndecoding==0 or Audio.gcom2.monitoring==0:
             set_freezedf(event)
@@ -366,8 +362,7 @@
         newMinute=0
 
     if (Audio.gcom2.mousedf != mousedf0 or Audio.gcom2.dftolerance != tol0) \
-            and (g.mode[:4]=='JT65' or \
-                 (g.mode[:3]=='JT4' and g.mode[:4]!='JT41')):
+            and (g.mode[:4]=='JT65' or g.mode[:3]=='JT4'):
         df_mark()
         
 # The following int() calls are to ensure that the values copied to
@@ -381,12 +376,11 @@
         nfreeze0=int(Audio.gcom2.nfreeze)
 
     if g.mode!=mode0:
-        if g.mode[:4]==&quot;JT65&quot; or \
-            (g.mode[:3]==&quot;JT4&quot; and g.mode[:4]=='JT41') \
+        if (g.mode[:4]==&quot;JT65&quot; or g.mode[:3]==&quot;JT4&quot;) \
            and nspeed0.get()&gt;5: nspeed0.set(3)
         if g.mode==&quot;FSK441&quot; and nspeed0.get()&lt;6: nspeed0.set(6)
         if g.mode==&quot;JT6M&quot; and nspeed0.get()&lt;6: nspeed0.set(6)
-        if g.mode==&quot;JT41&quot; and nspeed0.get()&lt;6: nspeed0.set(6)
+        if g.mode==&quot;ISCAT&quot; and nspeed0.get()&lt;6: nspeed0.set(6)
         draw_axis()
         mode0=g.mode
 
@@ -442,8 +436,7 @@
                     c.create_text(x,y,text=str(ix))
                 c.create_line(i,25,i,j,fill='black')
                 
-        if g.mode[:4]==&quot;JT65&quot; or \
-           (g.mode[:3]==&quot;JT4&quot; and g.mode[:4]!='JT41'):
+        if g.mode[:4]==&quot;JT65&quot; or g.mode[:3]==&quot;JT4&quot;:
             dx=288.7 + (1500-fmid)/df
             dff=df
             if frange==4000:

Modified: wsjt7a/astro0.f90
===================================================================
--- wsjt7a/astro0.f90	2010-07-13 20:41:20 UTC (rev 1989)
+++ wsjt7a/astro0.f90	2010-07-15 13:18:25 UTC (rev 1990)
@@ -48,11 +48,8 @@
   if(mode(1:4).eq.'Echo') nmode=3
   if(mode(1:4).eq.'JT6M') nmode=4
   if(mode(1:2).eq.'CW') nmode=5
-  if(mode(1:4).eq.'JT41') then
-     nmode=9
-  else if(mode(1:3).eq.'JT4') then
-     nmode=7
-  endif
+  if(mode(1:3).eq.'JT4') nmode=7
+  if(mode(1:5).eq.'ISCAT') nmode=9
 
   uth=uth8
   call cs_unlock

Modified: wsjt7a/audio_init.f90
===================================================================
--- wsjt7a/audio_init.f90	2010-07-13 20:41:20 UTC (rev 1989)
+++ wsjt7a/audio_init.f90	2010-07-15 13:18:25 UTC (rev 1990)
@@ -16,11 +16,9 @@
   if(mode(1:4).eq.'Echo') nmode=3
   if(mode(1:4).eq.'JT6M') nmode=4
   if(mode(1:2).eq.'CW') nmode=5
-  if(mode(1:4).eq.'JT41') then
-     nmode=9
-  else if(mode(1:3).eq.'JT4') then
-     nmode=7
-  endif
+  if(mode(1:3).eq.'JT4') nmode=7
+  if(mode(1:5).eq.'ISCAT') nmode=9
+
   ndevin=ndin
   ndevout=ndout
   TxOK=0

Modified: wsjt7a/decode1.f90
===================================================================
--- wsjt7a/decode1.f90	2010-07-13 20:41:20 UTC (rev 1989)
+++ wsjt7a/decode1.f90	2010-07-15 13:18:25 UTC (rev 1990)
@@ -21,8 +21,7 @@
   sendingsh0=-3
 
 10 ltrace=ndebug
-  if(mode(1:4).eq.'JT65' .or.                                    &amp;
-       (mode(1:3).eq.'JT4' .and. mode(1:4).ne.'JT41')            &amp;
+  if(mode(1:4).eq.'JT65' .or. mode(1:3).eq.'JT4'                &amp;
        .or. mode(1:2).eq.'CW') then
      if(rxdone) then
         call savedata

Modified: wsjt7a/decode3.f90
===================================================================
--- wsjt7a/decode3.f90	2010-07-13 20:41:20 UTC (rev 1989)
+++ wsjt7a/decode3.f90	2010-07-15 13:18:25 UTC (rev 1990)
@@ -22,11 +22,8 @@
   if(mode(1:4).eq.'Echo') nmode=3
   if(mode(1:4).eq.'JT6M') nmode=4
   if(mode(1:2).eq.'CW') nmode=5
-  if(mode(1:4).eq.'JT41') then
-     nmode=9
-  else if(mode(1:3).eq.'JT4') then
-     nmode=7
-  endif
+  if(mode(1:3).eq.'JT4') nmode=7
+  if(mode(1:5).eq.'ISCAT') nmode=9
   sum=0.
   do i=1,jz
      sum=sum+d2(i)
@@ -83,9 +80,9 @@
   nagain=0
   if(mode(1:4).eq.'JT65') then
      call pix2d65(d2d,jz)
-  else if(mode.eq.'FSK441' .or. mode(1:4).eq.'JT41') then
+  else if(mode.eq.'FSK441' .or. mode(1:5).eq.'ISCAT') then
      nz=s2(1,1)
-     if(mode(1:4).eq.'JT41') nz=498                       !### temporary! ###
+     if(mode(1:5).eq.'ISCAT') nz=498                       !### temporary! ###
      call pix2d(d2d,jz,mousebutton,MouseDF,NFreeze,mode,s2,64,nz,b)
   else if(mode(1:4).eq.'JT6M' .and. mousebutton.eq.0) then
      nz=s2(1,1)

Modified: wsjt7a/fivehz.f90
===================================================================
--- wsjt7a/fivehz.f90	2010-07-13 20:41:20 UTC (rev 1989)
+++ wsjt7a/fivehz.f90	2010-07-15 13:18:25 UTC (rev 1990)
@@ -69,8 +69,7 @@
   if(trperiod.le.0) trperiod=30
   tx1=0.0                              !Time to start a TX sequence
   tx2=trperiod-(tlatency+txdelay)      !Time to turn TX off
-  if(mode(1:4).eq.'JT65' .or.                                     &amp;
-       (mode(1:3).eq.'JT4' .and. mode(1:4).ne.'JT41')) then
+  if(mode(1:4).eq.'JT65' .or. mode(1:3).eq.'JT4') then
      if(nwave.lt.126*4096) nwave=126*4096
      tx2=txdelay + nwave/11025.0
      if(tx2.gt.(trperiod-2.0)) tx2=trperiod-tlatency-1.0
@@ -151,9 +150,8 @@
   if(nbufs.lt.0) nbufs=nbufs+1024
   tdata=nbufs*2048.0/11025.0
 
-  if((mode(1:4).eq.'JT65' .or.                                     &amp;
-       (mode(1:3).eq.'JT4' .and. mode(1:4).ne.'JT41')              &amp;
-       .or. mode(1:2).eq.'CW') .and. monitoring.eq.1 &amp;
+  if((mode(1:4).eq.'JT65' .or. mode(1:3).eq.'JT4'                      &amp;
+       .or. mode(1:2).eq.'CW') .and. monitoring.eq.1                   &amp;
        .and. tdata.gt.float(ntdecode) .and. ibuf0.ne.ibuf00) then
      rxdone=.true.
      ibuf00=ibuf0

Deleted: wsjt7a/gen41.f90
===================================================================
--- wsjt7a/gen41.f90	2010-07-13 20:41:20 UTC (rev 1989)
+++ wsjt7a/gen41.f90	2010-07-15 13:18:25 UTC (rev 1990)
@@ -1,98 +0,0 @@
-subroutine gen41(msg,nmsg,iwave,nwave,sendingsh,msgsent)
-
-  parameter (NMAX=30*11025,NSZ=1291,NSPS=256)
-  character msg*28,msgsent*22
-  integer*2 iwave(NMAX)
-  integer sendingsh
-  logical first
-  integer imsg(30)
-  integer itone(NSZ)
-  character c*41
-  real*8 twopi,dt,f0,f,df,pha,dpha
-  integer icos(4)
-  integer irpt(31)
-  data icos/0,1,3,2/
-  data nsync/4/,nlen/2/,ndat/18/,jz/645/
-  data c/'0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ /.?@'/
-  data irpt/1,2,3,4,6,7,8,9,11,12,13,14,15,16,17,18,19,21,22,23,24,     &amp;
-       25,26,27,28,29,31,32,33,34,35/
-
-  twopi=8.d0*atan(1.d0)
-  df=11025.d0/NSPS
-  dt=1.d0/11025.d0
-  f0=13*df
-  nsym=NMAX/NSPS
-  sendingsh=0
-
-! Check for shorthand message
-  if(nmsg.gt.4 .or. (msg(1:1).ne.'R' .and. msg(1:1).ne.'7')) go to 10
-
-  n=0
-  m=0
-  if(nmsg.eq.2 .and. msg(1:3).eq.'RO') n=5
-  if(nmsg.eq.3 .and. msg(1:3).eq.'R26') n=10
-  if(nmsg.eq.3 .and. msg(1:3).eq.'R27') n=20
-  if(nmsg.eq.3 .and. msg(1:3).eq.'RRR') n=30
-  if(nmsg.eq.2 .and. msg(1:2).eq.'73') n=40
-  if(n.eq.0 .and. msg(1:1).eq.'R') then
-     read(msg(2:4),*,err=10) m
-     if(m.lt.-20) m=-20
-     if(m.gt.10) m=10
-     n=irpt(m+21)
-  endif
-
-  if(n.eq.0) go to 10
-  do i=1,nsym-1,2
-     itone(i)=0
-     itone(i+1)=n
-  enddo
-  sendingsh=1
-  go to 20
-
-10 nblk=nsync+nlen+ndat
-  msglen=nmsg+1
-  k=0
-  kk=1
-  imsg(1)=40
-  do i=1,nmsg
-     imsg(i+1)=36
-     do j=1,41
-        if(msg(i:i).eq.c(j:j)) imsg(i+1)=j-1
-     enddo
-  enddo
-
-  do i=1,nsym
-     j=mod(i-1,nblk)+1
-     if(j.le.nsync) then
-        itone(i)=icos(j)
-     else if(j.gt.nsync .and. j.le.nsync+nlen) then
-        itone(i)=msglen
-        if(j.ge.nsync+2) then
-           n=msglen + 5*(j-nsync-1)
-           if(n.gt.40) n=n-41
-           itone(i)=n
-        endif
-     else
-        k=k+1
-        kk=mod(k-1,msglen)+1
-        itone(i)=imsg(kk)
-     endif
-  enddo
-
-! Generate iwave
-20 k=0
-  pha=0.
-  do m=1,nsym
-     f=f0 + itone(m)*df
-     dpha=twopi*f*dt
-     do i=1,NSPS
-        k=k+1
-        pha=pha+dpha
-        iwave(k)=nint(32767.0*sin(pha))
-     enddo
-  enddo
-  nwave=k
-  msgsent=msg
-
-  return
-end subroutine gen41

Copied: wsjt7a/geniscat.f90 (from rev 1989, wsjt7a/gen41.f90)
===================================================================
--- wsjt7a/geniscat.f90	                        (rev 0)
+++ wsjt7a/geniscat.f90	2010-07-15 13:18:25 UTC (rev 1990)
@@ -0,0 +1,98 @@
+subroutine geniscat(msg,nmsg,iwave,nwave,sendingsh,msgsent)
+
+  parameter (NMAX=30*11025,NSZ=1291,NSPS=256)
+  character msg*28,msgsent*22
+  integer*2 iwave(NMAX)
+  integer sendingsh
+  logical first
+  integer imsg(30)
+  integer itone(NSZ)
+  character c*42
+  real*8 twopi,dt,f0,f,df,pha,dpha
+  integer icos(4)
+  integer irpt(31)
+  data icos/0,1,3,2/
+  data nsync/4/,nlen/2/,ndat/18/,jz/645/
+  data c/'0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ /.?@-'/
+  data irpt/1,2,3,4,6,7,8,9,11,12,13,14,15,16,17,18,19,21,22,23,24,     &amp;
+       25,26,27,28,29,31,32,33,34,35/
+
+  twopi=8.d0*atan(1.d0)
+  df=11025.d0/NSPS
+  dt=1.d0/11025.d0
+  f0=13*df
+  nsym=NMAX/NSPS
+  sendingsh=0
+
+! Check for shorthand message
+  if(nmsg.gt.4 .or. (msg(1:1).ne.'R' .and. msg(1:1).ne.'7')) go to 10
+
+  n=0
+  m=0
+  if(nmsg.eq.2 .and. msg(1:3).eq.'RO') n=5
+  if(nmsg.eq.3 .and. msg(1:3).eq.'R26') n=10
+  if(nmsg.eq.3 .and. msg(1:3).eq.'R27') n=20
+  if(nmsg.eq.3 .and. msg(1:3).eq.'RRR') n=30
+  if(nmsg.eq.2 .and. msg(1:2).eq.'73') n=40
+  if(n.eq.0 .and. msg(1:1).eq.'R') then
+     read(msg(2:4),*,err=10) m
+     if(m.lt.-20) m=-20
+     if(m.gt.10) m=10
+     n=irpt(m+21)
+  endif
+
+  if(n.eq.0) go to 10
+  do i=1,nsym-1,2
+     itone(i)=0
+     itone(i+1)=n
+  enddo
+  sendingsh=1
+  go to 20
+
+10 nblk=nsync+nlen+ndat
+  msglen=nmsg+1
+  k=0
+  kk=1
+  imsg(1)=40
+  do i=1,nmsg
+     imsg(i+1)=36
+     do j=1,42
+        if(msg(i:i).eq.c(j:j)) imsg(i+1)=j-1
+     enddo
+  enddo
+
+  do i=1,nsym
+     j=mod(i-1,nblk)+1
+     if(j.le.nsync) then
+        itone(i)=icos(j)
+     else if(j.gt.nsync .and. j.le.nsync+nlen) then
+        itone(i)=msglen
+        if(j.ge.nsync+2) then
+           n=msglen + 5*(j-nsync-1)
+           if(n.gt.41) n=n-42
+           itone(i)=n
+        endif
+     else
+        k=k+1
+        kk=mod(k-1,msglen)+1
+        itone(i)=imsg(kk)
+     endif
+  enddo
+
+! Generate iwave
+20 k=0
+  pha=0.
+  do m=1,nsym
+     f=f0 + itone(m)*df
+     dpha=twopi*f*dt
+     do i=1,NSPS
+        k=k+1
+        pha=pha+dpha
+        iwave(k)=nint(32767.0*sin(pha))
+     enddo
+  enddo
+  nwave=k
+  msgsent=msg
+
+  return
+end subroutine geniscat

Copied: wsjt7a/iscat.f90 (from rev 1989, wsjt7a/jt41.f90)
===================================================================
--- wsjt7a/iscat.f90	                        (rev 0)
+++ wsjt7a/iscat.f90	2010-07-15 13:18:25 UTC (rev 1990)
@@ -0,0 +1,241 @@
+subroutine iscat(dat,npts,cfile6,MinSigdB,DFTolerance,NFreeze,MouseDF,ccf,psavg)
+
+! Decoder for ISCAT_2
+
+  parameter (NMAX=512*1024)
+  parameter (NSZ=4*1292)
+  real dat(NMAX)                          !Raw signal, 30 s at 11025 sps
+  character cfile6*6                      !File time
+  character c42*42
+  character msg*28,msg1*28
+  real x(NSZ),x2(NSZ)
+  complex c(0:512)
+  real s0(128,NSZ)
+  real fs0(128,108)                       !108 = 96 + 3*4
+  real fs1(0:41,30)
+  real savg(128)
+  real savg2(128)
+  real b(128)
+  real ccfred(-10:10)
+  real ccfblue(0:95)
+  real ccf(-5:540)
+  real psavg(450)         !Average spectrum of the whole file
+  integer dftolerance
+  integer icos(4)
+  equivalence (x,c)
+  data icos/0,1,3,2/
+  data nsps/256/,nsync/4/,nlen/2/,ndat/18/
+  data c42/'0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ /.?@-'/
+  
+  nsym=npts/nsps
+  nblk=nsync+nlen+ndat
+  nfft=512                             !FFTs at twice the symbol length
+  kstep=nsps/4                         !Step by 1/4 symbol
+  nh=nfft/2
+  nq=nfft/4
+  df=11025.0/nfft
+  fac=1.0/1000.0                      !Somewhat arbitrary
+  savg=0.
+
+  ia=1-kstep
+  do j=1,4*nsym
+     ia=ia+kstep
+     ib=ia+nsps-1
+     if(ib.gt.npts) go to 10
+     x(1:nsps)=fac*dat(ia:ib)
+     x(nsps+1:nfft)=0.
+     call four2a(x,nfft,1,-1,0)
+     do i=1,nq
+        s0(i,j)=real(c(i))**2 + aimag(c(i))**2
+        savg(i)=savg(i) + s0(i,j)
+     enddo
+  enddo
+
+10 jsym=j-1
+
+  savg=savg/jsym
+  do i=1,nq
+     x(1:jsym)=s0(i,1:jsym)
+     call pctile(x,x2,jsym,30,b(i))
+  enddo
+  b(1:10)=b(11)
+  do i=1,nq/2
+     psavg(i)=2*db(savg(2*i)) + 10.0
+  enddo
+
+!  rewind 53
+!  do i=1,nq
+!     savg2(i)=savg(i)/b(i)
+!     write(53,3001) i*df,savg(i),b(i),savg2(i)
+!3001 format(4f10.3)
+!  enddo
+!  call flush(53)
+
+  do j=1,jsym
+     s0(1:nq,j)=s0(1:nq,j)/b(1:nq)
+  enddo
+
+  fs0=0.
+  jb=(jsym-4*nblk+1)/4
+  jb=4*jb
+  do j=1,jb                                  !Fold s0 modulo 4*nblk into fs0
+     k=mod(j-1,4*nblk)+1
+     fs0(1:nq,k)=fs0(1:nq,k) + s0(1:nq,j)
+  enddo
+
+  do j=1,12
+     fs0(1:nq,96+j)=fs0(1:nq,j)
+  enddo
+
+  i0=2*13
+  smax=0.
+  ipk=9999
+  jpk=9999
+  ia=-10
+  ib=10
+  if(nfreeze.eq.1) then
+     ia=(mousedf-dftolerance)/df
+     ib=(mousedf+dftolerance)/df
+  endif
+
+  do j=0,4*nblk-1                            !Find sync pattern, lags 0-95
+     do i=ia,ib
+        ss=0.
+        do n=1,4
+           k=j+4*n-3
+           if(k.gt.4*nblk) k=k-4*nblk
+           ss=ss + fs0(i0+i+2*icos(n),k)
+        enddo
+        if(ss.gt.smax) then
+           smax=ss
+           ipk=i0+i                          !Frequency offset, DF
+           jpk=j+1                           !Time offset, DT
+        endif
+     enddo
+  enddo
+
+  ref=fs0(ipk+2,jpk) + fs0(ipk+4,jpk) + fs0(ipk+6,jpk)  +        &amp;
+      fs0(ipk,jpk+4) + fs0(ipk+4,jpk+4) + fs0(ipk+6,jpk+4) +     &amp;
+      fs0(ipk,jpk+8) + fs0(ipk+2,jpk+8) + fs0(ipk+4,jpk+8) +     &amp;
+      fs0(ipk,jpk+12) + fs0(ipk+2,jpk+12) + fs0(ipk+6,jpk+12)
+  ref=ref/3.0
+
+  kk=0
+!  rewind 54
+  do j=0,4*nblk-1
+     ss=0.
+     do n=1,4
+        k=j+4*n-3
+        if(k.gt.4*nblk) k=k-4*nblk
+        ss=ss + fs0(ipk+2*icos(n),k)
+     enddo
+     kk=kk+1
+     ccf(kk)=ss/ref
+!     write(54,3101) kk,ss/ref
+!3101 format(i5,f12.3)
+  enddo
+!  call flush(54)
+
+  tping=jpk*kstep/11025.0
+  xsync=smax/ref
+  nsig=nint(db(smax/ref - 1.0) -15.0)
+  if(nsig.lt.-20) nsig=-20
+  ndf0=nint((ipk-i0) * 11025.0/nfft)
+  if(nsig.lt.MinSigdB) go to 800
+
+  if(ipk.gt.100 .or. jpk.gt.96) then
+     print*,'ipk:',ipk,'   jpk:',jpk
+     go to 900
+  endif
+  smax=0.
+  ja=jpk+16
+  if(ja.gt.4*nblk) ja=ja-4*nblk
+  jb=jpk+20
+  if(jb.gt.4*nblk) jb=jb-4*nblk
+  do i=ipk,ipk+60,2                         !Find User's message length
+     ss=fs0(i,ja) + fs0(i+10,jb)
+     if(ss.gt.smax) then
+        smax=ss
+        ipk2=i
+     endif
+  enddo
+
+  msglen=(ipk2-ipk)/2
+  if(msglen.lt.1 .or. msglen.gt.28) msglen=2         !### tests only ###
+!  if(msglen.lt.1 .or. msglen.gt.28) then
+!     print*,'msglen:',msglen
+!     go to 900
+!  endif
+
+  fs1=0.
+  jb=(jsym-4*nblk+1)/4
+  jb=4*jb
+  k=0
+  n=0
+  do j=jpk,jsym,4                         !Fold information symbols into fs1
+     k=k+1
+     if(mod(k-1,nblk)+1.gt.6) then
+        n=n+1
+        m=mod(n-1,msglen)+1
+        do i=0,41
+           fs1(i,m)=fs1(i,m) + s0(ipk+2*i,j)
+        enddo
+     endif
+  enddo
+
+! Read out the message:
+  msg1='                            '
+  mpk=0
+  worst=9999.
+  sum=0.
+  do m=1,msglen
+     smax=0.
+     smax2=0.
+     do i=0,41
+        if(fs1(i,m).gt.smax) then
+           smax=fs1(i,m)
+           ipk3=i
+        endif
+     enddo
+     do i=0,41
+        if(fs1(i,m).gt.smax2 .and. i.ne.ipk3) smax2=fs1(i,m)
+     enddo
+     rr=smax/smax2
+     sum=sum + rr
+     if(rr.lt.worst) worst=rr
+     if(ipk3.eq.40) mpk=m
+     msg1(m:m)=c42(ipk3+1:ipk3+1)
+  enddo
+
+  avg=sum/msglen
+  if(mpk.eq.1) then
+     msg=msg1(2:)
+  else if(mpk.lt.msglen) then
+     msg=msg1(mpk+1:msglen)//msg1(1:mpk-1)
+  else
+     msg=msg1(1:msglen-1)
+  endif
+
+800 continue
+  if(nsig.lt.MinSigdB) then
+     msglen=0
+     worst=1.
+     avg=1.
+  endif
+  nworst=10.0*(worst-1.0)
+  navg=10.0*(avg-1.0)
+  if(nworst.gt.10) nworst=10
+  if(navg.gt.10) navg=10
+  xsync=xsync-0.3
+  isync=xsync
+  if(navg.le.0) msg=' '
+
+!  write(*,1020)  cfile6,isync,width,nsig,ndf0,msg,msglen,nworst,navg
+  write(11,1020) cfile6,nsig,ndf0,msg,msglen,nworst,navg
+  write(21,1020) cfile6,nsig,ndf0,msg,msglen,nworst,navg
+1020 format(a6,i5,i5,6x,a28,i4,2i3)
+  call flush(11)
+  call flush(21)
+
+900 return
+end subroutine iscat

Deleted: wsjt7a/jt41.f90
===================================================================
--- wsjt7a/jt41.f90	2010-07-13 20:41:20 UTC (rev 1989)
+++ wsjt7a/jt41.f90	2010-07-15 13:18:25 UTC (rev 1990)
@@ -1,241 +0,0 @@
-subroutine jt41(dat,npts,cfile6,MinSigdB,DFTolerance,NFreeze,MouseDF,ccf,psavg)
-
-! Decoder for JT41 
-
-  parameter (NMAX=512*1024)
-  parameter (NSZ=4*1292)
-  real dat(NMAX)                          !Raw signal, 30 s at 11025 sps
-  character cfile6*6                      !File time
-  character c41*41
-  character msg*28,msg1*28
-  real x(NSZ),x2(NSZ)
-  complex c(0:512)
-  real s0(128,NSZ)
-  real fs0(128,108)                       !108 = 96 + 3*4
-  real fs1(0:40,30)
-  real savg(128)
-  real savg2(128)
-  real b(128)
-  real ccfred(-10:10)
-  real ccfblue(0:95)
-  real ccf(-5:540)
-  real psavg(450)         !Average spectrum of the whole file
-  integer dftolerance
-  integer icos(4)
-  equivalence (x,c)
-  data icos/0,1,3,2/
-  data nsps/256/,nsync/4/,nlen/2/,ndat/18/
-  data c41/'0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ /.?@'/
-  
-  nsym=npts/nsps
-  nblk=nsync+nlen+ndat
-  nfft=512                             !FFTs at twice the symbol length
-  kstep=nsps/4                         !Step by 1/4 symbol
-  nh=nfft/2
-  nq=nfft/4
-  df=11025.0/nfft
-  fac=1.0/1000.0                      !Somewhat arbitrary
-  savg=0.
-
-  ia=1-kstep
-  do j=1,4*nsym
-     ia=ia+kstep
-     ib=ia+nsps-1
-     if(ib.gt.npts) go to 10
-     x(1:nsps)=fac*dat(ia:ib)
-     x(nsps+1:nfft)=0.
-     call four2a(x,nfft,1,-1,0)
-     do i=1,nq
-        s0(i,j)=real(c(i))**2 + aimag(c(i))**2
-        savg(i)=savg(i) + s0(i,j)
-     enddo
-  enddo
-
-10 jsym=j-1
-
-  savg=savg/jsym
-  do i=1,nq
-     x(1:jsym)=s0(i,1:jsym)
-     call pctile(x,x2,jsym,30,b(i))
-  enddo
-  b(1:10)=b(11)
-  do i=1,nq/2
-     psavg(i)=2*db(savg(2*i)) + 10.0
-  enddo
-
-!  rewind 53
-!  do i=1,nq
-!     savg2(i)=savg(i)/b(i)
-!     write(53,3001) i*df,savg(i),b(i),savg2(i)
-!3001 format(4f10.3)
-!  enddo
-!  call flush(53)
-
-  do j=1,jsym
-     s0(1:nq,j)=s0(1:nq,j)/b(1:nq)
-  enddo
-
-  fs0=0.
-  jb=(jsym-4*nblk+1)/4
-  jb=4*jb
-  do j=1,jb                                  !Fold s0 modulo 4*nblk into fs0
-     k=mod(j-1,4*nblk)+1
-     fs0(1:nq,k)=fs0(1:nq,k) + s0(1:nq,j)
-  enddo
-
-  do j=1,12
-     fs0(1:nq,96+j)=fs0(1:nq,j)
-  enddo
-
-  i0=2*13
-  smax=0.
-  ipk=9999
-  jpk=9999
-  ia=-10
-  ib=10
-  if(nfreeze.eq.1) then
-     ia=(mousedf-dftolerance)/df
-     ib=(mousedf+dftolerance)/df
-  endif
-
-  do j=0,4*nblk-1                            !Find sync pattern, lags 0-95
-     do i=ia,ib
-        ss=0.
-        do n=1,4
-           k=j+4*n-3
-           if(k.gt.4*nblk) k=k-4*nblk
-           ss=ss + fs0(i0+i+2*icos(n),k)
-        enddo
-        if(ss.gt.smax) then
-           smax=ss
-           ipk=i0+i                          !Frequency offset, DF
-           jpk=j+1                           !Time offset, DT
-        endif
-     enddo
-  enddo
-
-  ref=fs0(ipk+2,jpk) + fs0(ipk+4,jpk) + fs0(ipk+6,jpk)  +        &amp;
-      fs0(ipk,jpk+4) + fs0(ipk+4,jpk+4) + fs0(ipk+6,jpk+4) +     &amp;
-      fs0(ipk,jpk+8) + fs0(ipk+2,jpk+8) + fs0(ipk+4,jpk+8) +     &amp;
-      fs0(ipk,jpk+12) + fs0(ipk+2,jpk+12) + fs0(ipk+6,jpk+12)
-  ref=ref/3.0
-
-  kk=0
-!  rewind 54
-  do j=0,4*nblk-1
-     ss=0.
-     do n=1,4
-        k=j+4*n-3
-        if(k.gt.4*nblk) k=k-4*nblk
-        ss=ss + fs0(ipk+2*icos(n),k)
-     enddo
-     kk=kk+1
-     ccf(kk)=ss/ref
-!     write(54,3101) kk,ss/ref
-!3101 format(i5,f12.3)
-  enddo
-!  call flush(54)
-
-  tping=jpk*kstep/11025.0
-  xsync=smax/ref
-  nsig=nint(db(smax/ref - 1.0) -15.0)
-  if(nsig.lt.-20) nsig=-20
-  ndf0=nint((ipk-i0) * 11025.0/nfft)
-  if(nsig.lt.MinSigdB) go to 800
-
-  if(ipk.gt.100 .or. jpk.gt.96) then
-     print*,'ipk:',ipk,'   jpk:',jpk
-     go to 900
-  endif
-  smax=0.
-  ja=jpk+16
-  if(ja.gt.4*nblk) ja=ja-4*nblk
-  jb=jpk+20
-  if(jb.gt.4*nblk) jb=jb-4*nblk
-  do i=ipk,ipk+60,2                         !Find User's message length
-     ss=fs0(i,ja) + fs0(i+10,jb)
-     if(ss.gt.smax) then
-        smax=ss
-        ipk2=i
-     endif
-  enddo
-
-  msglen=(ipk2-ipk)/2
-  if(msglen.lt.1 .or. msglen.gt.28) msglen=2         !### tests only ###
-!  if(msglen.lt.1 .or. msglen.gt.28) then
-!     print*,'msglen:',msglen
-!     go to 900
-!  endif
-
-  fs1=0.
-  jb=(jsym-4*nblk+1)/4
-  jb=4*jb
-  k=0
-  n=0
-  do j=jpk,jsym,4                         !Fold information symbols into fs1
-     k=k+1
-     if(mod(k-1,nblk)+1.gt.6) then
-        n=n+1
-        m=mod(n-1,msglen)+1
-        do i=0,40
-           fs1(i,m)=fs1(i,m) + s0(ipk+2*i,j)
-        enddo
-     endif
-  enddo
-
-! Read out the message:
-  msg1='                            '
-  mpk=0
-  worst=9999.
-  sum=0.
-  do m=1,msglen
-     smax=0.
-     smax2=0.
-     do i=0,40
-        if(fs1(i,m).gt.smax) then
-           smax=fs1(i,m)
-           ipk3=i
-        endif
-     enddo
-     do i=0,40
-        if(fs1(i,m).gt.smax2 .and. i.ne.ipk3) smax2=fs1(i,m)
-     enddo
-     rr=smax/smax2
-     sum=sum + rr
-     if(rr.lt.worst) worst=rr
-     if(ipk3.eq.40) mpk=m
-     msg1(m:m)=c41(ipk3+1:ipk3+1)
-  enddo
-
-  avg=sum/msglen
-  if(mpk.eq.1) then
-     msg=msg1(2:)
-  else if(mpk.lt.msglen) then
-     msg=msg1(mpk+1:msglen)//msg1(1:mpk-1)
-  else
-     msg=msg1(1:msglen-1)
-  endif
-
-800 continue
-  if(nsig.lt.MinSigdB) then
-     msglen=0
-     worst=1.
-     avg=1.
-  endif
-  nworst=10.0*(worst-1.0)
-  navg=10.0*(avg-1.0)
-  if(nworst.gt.10) nworst=10
-  if(navg.gt.10) navg=10
-  xsync=xsync-0.3
-  isync=xsync
-  if(navg.le.0) msg=' '
-
-!  write(*,1020)  cfile6,isync,width,nsig,ndf0,msg,msglen,nworst,navg
-  write(11,1020) cfile6,nsig,ndf0,msg,msglen,nworst,navg
-  write(21,1020) cfile6,nsig,ndf0,msg,msglen,nworst,navg
-1020 format(a6,i5,i5,6x,a28,i4,2i3)
-  call flush(11)
-  call flush(21)
-
-900 return
-end subroutine jt41

Modified: wsjt7a/savedata.f90
===================================================================
--- wsjt7a/savedata.f90	2010-07-13 20:41:20 UTC (rev 1989)
+++ wsjt7a/savedata.f90	2010-07-15 13:18:25 UTC (rev 1990)
@@ -10,8 +10,7 @@
   equivalence (nfmt2,n4)
   save
 
-  if(mode(1:4).eq.'JT65' .or.                                       &amp;
-       (mode(1:3).eq.'JT4' .and. mode(1:4).ne.'JT41')               &amp;
+  if(mode(1:4).eq.'JT65' .or. mode(1:3).eq.'JT4'                    &amp;
        .or. mode(1:2).eq.'CW') then
      call get_fname(hiscall,iyr,imo,ida,ntime,lauto,fname0)
      ibuf1=ibuf0
@@ -32,11 +31,9 @@
   if(jza.lt.110250) go to 999           !Don't save files less than 10 s
   if(jza.gt.120*11025) go to 999         !Don't save if something's fishy
   k=2048*(ibuf1-1)
-  if(mode(1:4).ne.'JT65' .and.                                      &amp;
-       (mode(1:3).ne.'JT4' .or. mode(1:4).eq.'JT41')                &amp;
+  if(mode(1:4).ne.'JT65' .and. mode(1:3).ne.'JT4'                   &amp;
        .and. mode(1:2).ne.'CW') k=k+3*2048
-  if(mode(1:4).ne.'JT65' .and.                                      &amp;
-       (mode(1:3).ne.'JT4' .or. mode(1:4).eq.'JT41')                &amp;
+  if(mode(1:4).ne.'JT65' .and. mode(1:3).ne.'JT4'                   &amp;
        .and. mode(1:2).ne.'CW' .and. jza.gt.30*11025) then
      k=k + (jza-30*11025)
      if(k.gt.NRxMax) k=k-NRxMax
@@ -141,8 +138,7 @@
      call cs_unlock
   endif
 
-999 if(mode(1:4).ne.'JT65' .and.                                          &amp;
-         (mode(1:3).ne.'JT4' .or. mode(1:4).eq.'JT41')                    &amp;
+999 if(mode(1:4).ne.'JT65' .and. mode(1:3).ne.'JT4'                    &amp;
          .and. mode(1:2).ne.'CW') then
      ibuf0z=ibuf0
      call get_fname(hiscall,iyr,imo,ida,ntime,lauto,fname0)

Modified: wsjt7a/spec.f90
===================================================================
--- wsjt7a/spec.f90	2010-07-13 20:41:20 UTC (rev 1989)
+++ wsjt7a/spec.f90	2010-07-15 13:18:25 UTC (rev 1990)
@@ -57,11 +57,8 @@
   if(mode(1:4).eq.'Echo') nmode=3
   if(mode(1:4).eq.'JT6M') nmode=4
   if(mode(1:2).eq.'CW') nmode=5
-  if(mode(1:4).eq.'JT41') then
-     nmode=9
-  else if(mode(1:3).eq.'JT4') then
-     nmode=7
-  endif
+  if(mode(1:3).eq.'JT4') nmode=7
+  if(mode(1:5).eq.'ISCAT') nmode=9
 
   nlines=0
   newdat=0

Deleted: wsjt7a/t1.f90
===================================================================
--- wsjt7a/t1.f90	2010-07-13 20:41:20 UTC (rev 1989)
+++ wsjt7a/t1.f90	2010-07-15 13:18:25 UTC (rev 1990)
@@ -1,14 +0,0 @@
-program t1
-
-  character*28 msg
-  integer itone(645)
-
-  call getarg(1,msg)
-  call genscat6(msg,itone)
-
-  write(*,3001) itone
-3001 format(21i3)
-
-
-
-end program t1

Modified: wsjt7a/t74.f90
===================================================================
--- wsjt7a/t74.f90	2010-07-13 20:41:20 UTC (rev 1989)
+++ wsjt7a/t74.f90	2010-07-15 13:18:25 UTC (rev 1990)
@@ -1,6 +1,6 @@
 program t74
 
-! Tests experimental JT41 decoder
+! Tests experimental ISCAT_2 decoder
 
   parameter (NMAX=512*1024)
   real dat(NMAX)                          !Raw signal, 30 s at 11025 sps
@@ -30,7 +30,7 @@
      read(74,end=999) jz,cfile6,(dat(j),j=1,jz)
      if(irec.ne.nrec .and. nrec.ne.999) go to 900
 
-     call jt41(dat,jz,cfile6,MinSigdB,DFTolerance,NFreeze,MouseDF,ccf,psavg)
+     call iscat(dat,jz,cfile6,MinSigdB,DFTolerance,NFreeze,MouseDF,ccf,psavg)
 900  continue
   enddo
 

Modified: wsjt7a/wsjt.py
===================================================================
--- wsjt7a/wsjt.py	2010-07-13 20:41:20 UTC (rev 1989)
+++ wsjt7a/wsjt.py	2010-07-15 13:18:25 UTC (rev 1990)
@@ -234,7 +234,7 @@
 #------------------------------------------------------ dbl_click3_text
 def dbl_click3_text(event):
     if mode.get()[:4]=='JT65' or mode.get()[:3]=='JT4' \
-           or mode.get()[:4]=='JT41':
+           or mode.get()[:5]=='ISCAT':
         t=text.get('1.0',END)           #Entire contents of text box
         t1=text.get('1.0',CURRENT)      #Contents from start to mouse pointer
         n=t1.rfind(&quot;\n&quot;)
@@ -629,13 +629,13 @@
         mode.set(&quot;JT65C&quot;)
         ModeJT65()
 
-#------------------------------------------------------ ModeJT41
-def ModeJT41(event=NONE):
+#------------------------------------------------------ ModeISCAT
+def ModeISCAT(event=NONE):
     global isync
-    if g.mode != &quot;JT41&quot;:
+    if g.mode != &quot;ISCAT&quot;:
         if lauto: toggleauto()
     ModeJT6M()
-    mode.set(&quot;JT41&quot;)
+    mode.set(&quot;ISCAT&quot;)
     lab2.configure(text='FileID      Avg dB        DF')
     isync=-18
     report.configure(state=NORMAL)
@@ -772,7 +772,7 @@
   3. JT65   - for HF, EME, and troposcatter
   4. CW     - 15 WPM Morse code, messages structured for EME
   5. JT4    - for HF and EME
-  6. JT41   - for meteor and ionospheric scatter on 50 MHz
+  6. ISCAT   - for meteor and ionospheric scatter on 50 MHz
 
 Copyright (c) 2001-2010 by Joseph H. Taylor, Jr., K1JT, with
 contributions from additional authors.  WSJT is Open Source 
@@ -963,8 +963,7 @@
         labDist.configure(text=&quot;&quot;)
     else:
         if mode.get()[:4]=='JT65' or \
-               mode.get()[:3]=='JT4' or mode.get()[:2]==&quot;CW&quot; or \
-               mode.get()[:4]=='JT41':
+               mode.get()[:3]=='JT4' or mode.get()[:2]==&quot;CW&quot;:
             labAz.configure(text=&quot;Az: %d&quot; % (naz,))
             labHotAB.configure(text=&quot;&quot;,bg='gray85')
         else:
@@ -1012,7 +1011,7 @@
 def inctol(event=NONE):
     global itol
     maxitol=5
-    if mode.get()[:4]=='JT65' or mode.get()[:4]=='JT41': maxitol=6
+    if mode.get()[:4]=='JT65': maxitol=6
     if itol&lt;maxitol: itol=itol+1
     ltol.configure(text='Tol    '+str(ntol[itol]))
 
@@ -1070,7 +1069,7 @@
 def erase(event=NONE):
     graph1.delete(ALL)
     if mode.get()[:4]!=&quot;JT65&quot; and mode.get()[:2]!=&quot;CW&quot; and \
-            mode.get()[:3]!='JT4' and mode.get()[:4]!='JT41':
+            mode.get()[:3]!='JT4':
         graph2.delete(ALL)
     text.configure(state=NORMAL)
     text.delete('1.0',END)
@@ -1099,7 +1098,7 @@
     lclip.configure(text='Clip   '+str(iclip))
     itol=5
     ltol.configure(text='Tol    '+str(ntol[itol]))
-    if g.mode==&quot;JT6M&quot; or g.mode==&quot;JT41&quot;:
+    if g.mode==&quot;JT6M&quot; or g.mode==&quot;ISCAT&quot;:
         isync=-10
         itol=4
         ltol.configure(text='Tol    '+str(ntol[itol]))
@@ -1155,8 +1154,7 @@
 #----------------------------------------------------- dtdf_change
 # Readout of graphical cursor location
 def dtdf_change(event):
-    if mode.get()[:4]!='JT65' and mode.get()[:3]!='JT4' \
-               and mode.get()[:4]!='JT41':
+    if mode.get()[:4]!='JT65' and mode.get()[:3]!='JT4':
         t=&quot;%.1f&quot; % (event.x*30.0/500.0,)
         lab6.configure(text=t,bg='green')
     else:
@@ -1179,8 +1177,7 @@
 def mouse_click_g1(event):
     global nopen
     if not nopen:
-        if mode.get()[:4]=='JT65' or \
-               mode.get()[:3]=='JT4' or mode.get()[:4]=='JT41':
+        if mode.get()[:4]=='JT65' or mode.get()[:3]=='JT4':
             Audio.gcom2.mousedf=int(Audio.gcom2.idf+(event.x-250)*2.4)
         else:
             if Audio.gcom2.ndecoding==0:              #If decoder is busy, ignore
@@ -1195,8 +1192,7 @@
 
 #------------------------------------------------------ double-click_g1
 def double_click_g1(event):
-    if (mode.get()[:4]=='JT65' or \
-        (mode.get()[:3]=='JT4' and mode.get()[:4]!='JT41')) and \
+    if (mode.get()[:4]=='JT65' or mode.get()[:3]=='JT4') and \
         Audio.gcom2.ndecoding==0:
         g.freeze_decode=1
     
@@ -1228,7 +1224,7 @@
     Audio.gcom2.hiscall=(ToRadio.get()+(' '*12))[:12]
     for m in (tx1, tx2, tx3, tx4, tx5, tx6):
         m.delete(0,99)
-    if mode.get()==&quot;FSK441&quot; or mode.get()==&quot;JT6M&quot; or mode.get()==&quot;JT41&quot;:
+    if mode.get()==&quot;FSK441&quot; or mode.get()==&quot;JT6M&quot; or mode.get()==&quot;ISCAT&quot;:
         r=report.get()
         tx1.insert(0,setmsg(options.tx1.get(),r))
         tx2.insert(0,setmsg(options.tx2.get(),r))
@@ -1538,8 +1534,7 @@
             else:
                 Audio.gcom2.ntx2=0
 
-        if mode.get()[:4]=='JT65' or \
-               (mode.get()[:3]=='JT4' and mode.get()[:4]!='JT41') \
+        if mode.get()[:4]=='JT65' or mode.get()[:3]=='JT4' \
                or mode.get()[:2]=='CW':
             graph2.delete(ALL)
             graph2.create_text(80,13,anchor=CENTER,text=&quot;Moon&quot;,font=g2font)
@@ -1548,8 +1543,7 @@
             graph2.create_text(13,85,anchor=W, text=&quot;Dop:%6d&quot; % g.ndop,font=g2font)
             graph2.create_text(13,109,anchor=W,text=&quot;Dgrd:%5.1f&quot; % g.Dgrd,font=g2font)
 
-    if (mode.get()[:4]=='JT65' or mode.get()[:3]=='JT4' \
-        or mode.get()[:4]=='JT41') and g.freeze_decode:
+    if (mode.get()[:4]=='JT65' or mode.get()[:3]=='JT4') and g.freeze_decode:
         itol=2
         ltol.configure(text='Tol    '+str(50))
         Audio.gcom2.dftolerance=50
@@ -1589,7 +1583,7 @@
             msg2.configure(bg='#FF00FF')
         elif mode.get()==&quot;CW&quot;:
             msg2.configure(bg='#00FF00')
-        elif mode.get()[:4]==&quot;JT41&quot;:
+        elif mode.get()[:5]==&quot;ISCAT&quot;:
             msg2.configure(bg='#CCFFFF')
         elif mode.get()[:3]==&quot;JT4&quot;:
             msg2.configure(bg='#88FF88')
@@ -1616,7 +1610,9 @@
         pass
 
     msg1.configure(text=&quot;%6.4f %6.4f&quot; % (samfac_in,samfac_out))
-    msg2.configure(text=mode.get())
+    t=mode.get()
+    if t=='ISCAT': t='ISCAT_2'
+    msg2.configure(text=t)
     t=&quot;Freeze DF:%4d&quot; % (int(Audio.gcom2.mousedf),)
     if abs(int(Audio.gcom2.mousedf))&gt;600:
         msg3.configure(text=t,fg='black',bg='red')
@@ -1721,8 +1717,7 @@
             im.putpalette(g.palette)
             cmap0=g.cmap
 
-        if mode.get()[:4]=='JT65' or \
-            (mode.get()[:3]=='JT4' and mode.get()[:4]!='JT41'):
+        if mode.get()[:4]=='JT65' or mode.get()[:3]=='JT4':
             plot_large()
         else:
             im.putdata(Audio.gcom2.b)
@@ -1740,7 +1735,7 @@
     g.mode=mode.get()
     g.report=report.get()
     if mode.get()=='FSK441': isync441=isync
-    elif mode.get()=='JT6M' or mode.get()==&quot;JT41&quot;:
+    elif mode.get()=='JT6M' or mode.get()==&quot;ISCAT&quot;:
         isync6m=isync
     elif mode.get()[:4]=='JT65': isync65=isync
     Audio.gcom1.txfirst=TxFirst.get()
@@ -1917,7 +1912,7 @@
 modemenu.add_radiobutton(label = 'JT4E', variable=mode, command = ModeJT4E)
 modemenu.add_radiobutton(label = 'JT4F', variable=mode, command = ModeJT4F)
 modemenu.add_radiobutton(label = 'JT4G', variable=mode, command = ModeJT4G)
-modemenu.add_radiobutton(label = 'JT41', variable=mode, command = ModeJT41)
+modemenu.add_radiobutton(label = 'ISCAT_2', variable=mode, command = ModeISCAT)
 #modemenu.add_radiobutton(label = 'Echo', variable=mode, command = ModeEcho,
 #                         state=DISABLED)
 
@@ -2401,8 +2396,8 @@
                 ModeJT6M()
             elif value=='CW':
                 ModeCW()
-            elif value=='JT41':
-                ModeJT41()
+            elif value=='ISCAT':
+                ModeISCAT()
             elif value[:3]=='JT4':
                 ModeJT4()
         elif key == 'MyCall': options.MyCall.set(value)

Modified: wsjt7a/wsjt1.f90
===================================================================
--- wsjt7a/wsjt1.f90	2010-07-13 20:41:20 UTC (rev 1989)
+++ wsjt7a/wsjt1.f90	2010-07-15 13:18:25 UTC (rev 1990)
@@ -295,10 +295,10 @@
      goto 900
   endif
 
-  if(mode.eq.9) then                             !JT41 mode
+  if(mode.eq.9) then                             !ISCAT_2 mode
 !     write(74) jz,cfile6,(dat(j),j=1,jz)
      call spec2d(dat,jz,nstep,s2,nchan,nz,psavg,sigma)
-     call jt41(dat,jz,cfile6,MinSigdB,DFTolerance,NFreeze,MouseDF,ccf,psavg)
+     call iscat(dat,jz,cfile6,MinSigdB,DFTolerance,NFreeze,MouseDF,ccf,psavg)
      psavg(65:)=0.
      go to 800
   endif

Modified: wsjt7a/wsjtgen.f90
===================================================================
--- wsjt7a/wsjtgen.f90	2010-07-13 20:41:20 UTC (rev 1989)
+++ wsjt7a/wsjtgen.f90	2010-07-15 13:18:25 UTC (rev 1990)
@@ -115,8 +115,8 @@
         if(mode(5:5).eq.'C') mode65=4
         call gen65(msg,mode65,samfacout,ntxdf,ndebug,iwave,nwave,sendingsh,   &amp;
              msgsent,nmsg0)
-     else if(mode(1:4).eq.'JT41') then
-        call gen41(msg,nmsg,iwave,nwave,sendingsh,msgsent)
+     else if(mode(1:5).eq.'ISCAT') then
+        call geniscat(msg,nmsg,iwave,nwave,sendingsh,msgsent)
      else if(mode(1:3).eq.'JT4' ) then
         call gen24(msg,mode,mode4,samfacout,ntxdf,ndebug,iwave,nwave,      &amp;
              sendingsh,msgsent,nmsg0)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001681.html">[WSJT-SVN] r1989 - wsjt7a
</A></li>
	<LI>Next message: <A HREF="001683.html">[WSJT-SVN] r1991 - wsjt7a
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1682">[ date ]</a>
              <a href="thread.html#1682">[ thread ]</a>
              <a href="subject.html#1682">[ subject ]</a>
              <a href="author.html#1682">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/wsjt-svn">More information about the wsjt-svn
mailing list</a><br>
</body></html>
