<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [WSJT-SVN] r860 - trunk
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/wsjt-svn/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20r860%20-%20trunk&In-Reply-To=%3C200806072209.m57M9rte026498%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000544.html">
   <LINK REL="Next"  HREF="000546.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[WSJT-SVN] r860 - trunk</H1>
    <B>va3db at BerliOS</B> 
    <A HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20r860%20-%20trunk&In-Reply-To=%3C200806072209.m57M9rte026498%40sheep.berlios.de%3E"
       TITLE="[WSJT-SVN] r860 - trunk">va3db at mail.berlios.de
       </A><BR>
    <I>Sun Jun  8 00:09:53 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000544.html">[WSJT-SVN] r859 - trunk
</A></li>
        <LI>Next message: <A HREF="000546.html">[WSJT-SVN] r861 - trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#545">[ date ]</a>
              <a href="thread.html#545">[ thread ]</a>
              <a href="subject.html#545">[ subject ]</a>
              <a href="author.html#545">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: va3db
Date: 2008-06-08 00:09:53 +0200 (Sun, 08 Jun 2008)
New Revision: 860

Modified:
   trunk/configure
   trunk/configure.ac
Log:
- Check specifically for a known fortran entry point in libfftw3f



Modified: trunk/configure
===================================================================
--- trunk/configure	2008-06-07 19:43:43 UTC (rev 859)
+++ trunk/configure	2008-06-07 22:09:53 UTC (rev 860)
@@ -2,7 +2,7 @@
 # Guess values for system-dependent variables and create Makefiles.
 # Generated by GNU Autoconf 2.62 for wsjt 5.9.6.
 #
-# $Id: configure.ac 854 2008-06-07 17:23:59Z va3db $
+# $Id: configure.ac 857 2008-06-07 19:32:13Z va3db $
 #
 # Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
 # 2002, 2003, 2004, 2005, 2006, 2007, 2008 Free Software Foundation, Inc.
@@ -1452,7 +1452,7 @@
 This configure script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it.
 
-$Id: configure.ac 854 2008-06-07 17:23:59Z va3db $
+$Id: configure.ac 857 2008-06-07 19:32:13Z va3db $
 _ACEOF
   exit
 fi
@@ -5173,9 +5173,9 @@
 
 fi
 
-{ $as_echo &quot;$as_me:$LINENO: checking for fftwf_mkplan in -lfftw3f&quot; &gt;&amp;5
-$as_echo_n &quot;checking for fftwf_mkplan in -lfftw3f... &quot; &gt;&amp;6; }
-if test &quot;${ac_cv_lib_fftw3f_fftwf_mkplan+set}&quot; = set; then
+{ $as_echo &quot;$as_me:$LINENO: checking for sfftw_destroy_plan__ in -lfftw3f&quot; &gt;&amp;5
+$as_echo_n &quot;checking for sfftw_destroy_plan__ in -lfftw3f... &quot; &gt;&amp;6; }
+if test &quot;${ac_cv_lib_fftw3f_sfftw_destroy_plan__+set}&quot; = set; then
   $as_echo_n &quot;(cached) &quot; &gt;&amp;6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -5193,11 +5193,11 @@
 #ifdef __cplusplus
 extern &quot;C&quot;
 #endif
-char fftwf_mkplan ();
+char sfftw_destroy_plan__ ();
 int
 main ()
 {
-return fftwf_mkplan ();
+return sfftw_destroy_plan__ ();
   ;
   return 0;
 }
@@ -5223,12 +5223,12 @@
 	 test &quot;$cross_compiling&quot; = yes ||
 	 $as_test_x conftest$ac_exeext
        }; then
-  ac_cv_lib_fftw3f_fftwf_mkplan=yes
+  ac_cv_lib_fftw3f_sfftw_destroy_plan__=yes
 else
   $as_echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
 sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
 
-	ac_cv_lib_fftw3f_fftwf_mkplan=no
+	ac_cv_lib_fftw3f_sfftw_destroy_plan__=no
 fi
 
 rm -rf conftest.dSYM
@@ -5236,9 +5236,9 @@
       conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ $as_echo &quot;$as_me:$LINENO: result: $ac_cv_lib_fftw3f_fftwf_mkplan&quot; &gt;&amp;5
-$as_echo &quot;$ac_cv_lib_fftw3f_fftwf_mkplan&quot; &gt;&amp;6; }
-if test $ac_cv_lib_fftw3f_fftwf_mkplan = yes; then
+{ $as_echo &quot;$as_me:$LINENO: result: $ac_cv_lib_fftw3f_sfftw_destroy_plan__&quot; &gt;&amp;5
+$as_echo &quot;$ac_cv_lib_fftw3f_sfftw_destroy_plan__&quot; &gt;&amp;6; }
+if test $ac_cv_lib_fftw3f_sfftw_destroy_plan__ = yes; then
   \
 	HAS_FFTW3FLIBS=1
 else
@@ -5796,6 +5796,9 @@
 #define HAS_FFTW3_H 1
 _ACEOF
 
+else
+	fail=1
+	echo &quot;You are missing the fftw3.h include file&quot;
 fi
 
 if test &quot;$F2PY&quot; = &quot;&quot;; then
@@ -5812,6 +5815,7 @@
 else
 	fail =1
 	echo &quot;You are missing the fortran shim lib for fftw3 you need libfftw3f.&quot;
+	echo &quot;It is also possible your libfftw3f is missing the fortran shim entry points.&quot;
 fi
 
 if test $fail -eq 1; then

Modified: trunk/configure.ac
===================================================================
--- trunk/configure.ac	2008-06-07 19:43:43 UTC (rev 859)
+++ trunk/configure.ac	2008-06-07 22:09:53 UTC (rev 860)
@@ -134,7 +134,8 @@
 	AC_DEFINE(STRING_WITH_STRINGS, 1, [Define to 1 if string.h may be included along with strings.h])
 fi
 
-AC_CHECK_LIB(fftw3f, fftwf_mkplan, \
+dnl check for a fortran shim entry point
+AC_CHECK_LIB(fftw3f, sfftw_destroy_plan__, \
 	[HAS_FFTW3FLIBS=1], [HAS_FFTW3FLIBS=0])
 
 
@@ -365,6 +366,9 @@
 
 if test $HAS_FFTW3_H -eq 1; then
 	AC_DEFINE(HAS_FFTW3_H, 1, )
+else
+	fail=1
+	echo &quot;You are missing the fftw3.h include file&quot;
 fi
 
 if test &quot;$F2PY&quot; = &quot;&quot;; then
@@ -378,6 +382,7 @@
 else
 	fail =1
 	echo &quot;You are missing the fortran shim lib for fftw3 you need libfftw3f.&quot;
+	echo &quot;It is also possible your libfftw3f is missing the fortran shim entry points.&quot;
 fi
 
 dnl


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000544.html">[WSJT-SVN] r859 - trunk
</A></li>
	<LI>Next message: <A HREF="000546.html">[WSJT-SVN] r861 - trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#545">[ date ]</a>
              <a href="thread.html#545">[ thread ]</a>
              <a href="subject.html#545">[ subject ]</a>
              <a href="author.html#545">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/wsjt-svn">More information about the wsjt-svn
mailing list</a><br>
</body></html>
