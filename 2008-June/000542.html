<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [WSJT-SVN] r857 - trunk
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/wsjt-svn/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20r857%20-%20trunk&In-Reply-To=%3C200806071932.m57JWDn4015983%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000541.html">
   <LINK REL="Next"  HREF="000543.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[WSJT-SVN] r857 - trunk</H1>
    <B>va3db at BerliOS</B> 
    <A HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20r857%20-%20trunk&In-Reply-To=%3C200806071932.m57JWDn4015983%40sheep.berlios.de%3E"
       TITLE="[WSJT-SVN] r857 - trunk">va3db at mail.berlios.de
       </A><BR>
    <I>Sat Jun  7 21:32:13 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000541.html">[WSJT-SVN] r856 - branches/wspr
</A></li>
        <LI>Next message: <A HREF="000543.html">[WSJT-SVN] r858 - branches/wspr
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#542">[ date ]</a>
              <a href="thread.html#542">[ thread ]</a>
              <a href="subject.html#542">[ subject ]</a>
              <a href="author.html#542">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: va3db
Date: 2008-06-07 21:32:13 +0200 (Sat, 07 Jun 2008)
New Revision: 857

Modified:
   trunk/configure
   trunk/configure.ac
Log:
- check for the existence of the fftw3f shim library, error out if not found.



Modified: trunk/configure
===================================================================
--- trunk/configure	2008-06-07 19:19:32 UTC (rev 856)
+++ trunk/configure	2008-06-07 19:32:13 UTC (rev 857)
@@ -2,7 +2,7 @@
 # Guess values for system-dependent variables and create Makefiles.
 # Generated by GNU Autoconf 2.62 for wsjt 5.9.6.
 #
-# $Id: configure.ac 850 2008-06-07 15:05:39Z va3db $
+# $Id: configure.ac 854 2008-06-07 17:23:59Z va3db $
 #
 # Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
 # 2002, 2003, 2004, 2005, 2006, 2007, 2008 Free Software Foundation, Inc.
@@ -1452,7 +1452,7 @@
 This configure script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it.
 
-$Id: configure.ac 850 2008-06-07 15:05:39Z va3db $
+$Id: configure.ac 854 2008-06-07 17:23:59Z va3db $
 _ACEOF
   exit
 fi
@@ -5239,12 +5239,14 @@
 { $as_echo &quot;$as_me:$LINENO: result: $ac_cv_lib_fftw3f_fftwf_mkplan&quot; &gt;&amp;5
 $as_echo &quot;$ac_cv_lib_fftw3f_fftwf_mkplan&quot; &gt;&amp;6; }
 if test $ac_cv_lib_fftw3f_fftwf_mkplan = yes; then
-  FFTW3LIBS=&quot;-lfftw3f&quot;
+  \
+	HAS_FFTW3FLIBS=1
 else
-  FFTW3LIBS=&quot;&quot;
+  HAS_FFTW3FLIBS=0
 fi
 
 
+
 if test &quot;${ac_cv_header_stdarg_h+set}&quot; = set; then
   { $as_echo &quot;$as_me:$LINENO: checking for stdarg.h&quot; &gt;&amp;5
 $as_echo_n &quot;checking for stdarg.h... &quot; &gt;&amp;6; }
@@ -5436,7 +5438,6 @@
 
 
 
-
 # Check whether --enable-g95 was given.
 if test &quot;${enable_g95+set}&quot; = set; then
   enableval=$enable_g95; g95=$enableval
@@ -5795,7 +5796,6 @@
 #define HAS_FFTW3_H 1
 _ACEOF
 
-	LIBS=&quot;${LIBS} -lfftw3f&quot;
 fi
 
 if test &quot;$F2PY&quot; = &quot;&quot;; then
@@ -5803,6 +5803,17 @@
 	F2PY=&quot;python f2py.py&quot;;
 fi
 
+if test $HAS_FFTW3FLIBS -eq 1; then
+	LIBS=&quot;${LIBS} -lfftw3f&quot;
+	cat &gt;&gt;confdefs.h &lt;&lt;\_ACEOF
+#define HAS_FFTW3FLIBS 1
+_ACEOF
+
+else
+	fail =1
+	echo &quot;You are missing the fortran shim lib for fftw3 you need libfftw3f.&quot;
+fi
+
 if test $fail -eq 1; then
 	{ { $as_echo &quot;$as_me:$LINENO: error: Please check error messages and install missing packages.&quot; &gt;&amp;5
 $as_echo &quot;$as_me: error: Please check error messages and install missing packages.&quot; &gt;&amp;2;}

Modified: trunk/configure.ac
===================================================================
--- trunk/configure.ac	2008-06-07 19:19:32 UTC (rev 856)
+++ trunk/configure.ac	2008-06-07 19:32:13 UTC (rev 857)
@@ -134,8 +134,10 @@
 	AC_DEFINE(STRING_WITH_STRINGS, 1, [Define to 1 if string.h may be included along with strings.h])
 fi
 
-AC_CHECK_LIB(fftw3f, fftwf_mkplan, [FFTW3LIBS=&quot;-lfftw3f&quot;], [FFTW3LIBS=&quot;&quot;])
+AC_CHECK_LIB(fftw3f, fftwf_mkplan, \
+	[HAS_FFTW3FLIBS=1], [HAS_FFTW3FLIBS=0])
 
+
 dnl Check for stdarg.h - if we can't find it, halt configure
 AC_CHECK_HEADER(stdarg.h, , [AC_MSG_ERROR([** stdarg.h could not be found - wsjt will not compile without it **])])
 
@@ -363,7 +365,6 @@
 
 if test $HAS_FFTW3_H -eq 1; then
 	AC_DEFINE(HAS_FFTW3_H, 1, )
-	LIBS=&quot;${LIBS} -lfftw3f&quot;
 fi
 
 if test &quot;$F2PY&quot; = &quot;&quot;; then
@@ -371,6 +372,14 @@
 	F2PY=&quot;python f2py.py&quot;;	
 fi
 
+if test $HAS_FFTW3FLIBS -eq 1; then
+	LIBS=&quot;${LIBS} -lfftw3f&quot;
+	AC_DEFINE(HAS_FFTW3FLIBS, 1, )
+else
+	fail =1
+	echo &quot;You are missing the fortran shim lib for fftw3 you need libfftw3f.&quot;
+fi
+
 dnl
 dnl If fail a pre-requisite then fail
 dnl


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000541.html">[WSJT-SVN] r856 - branches/wspr
</A></li>
	<LI>Next message: <A HREF="000543.html">[WSJT-SVN] r858 - branches/wspr
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#542">[ date ]</a>
              <a href="thread.html#542">[ thread ]</a>
              <a href="subject.html#542">[ subject ]</a>
              <a href="author.html#542">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/wsjt-svn">More information about the wsjt-svn
mailing list</a><br>
</body></html>
