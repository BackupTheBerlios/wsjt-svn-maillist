<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [WSJT-SVN] r848 - trunk
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/wsjt-svn/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20r848%20-%20trunk&In-Reply-To=%3C200806070434.m574YAjn013459%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000535.html">
   <LINK REL="Next"  HREF="000549.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[WSJT-SVN] r848 - trunk</H1>
    <B>va3db at BerliOS</B> 
    <A HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20r848%20-%20trunk&In-Reply-To=%3C200806070434.m574YAjn013459%40sheep.berlios.de%3E"
       TITLE="[WSJT-SVN] r848 - trunk">va3db at mail.berlios.de
       </A><BR>
    <I>Sat Jun  7 06:34:10 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000535.html">[WSJT-SVN] r847 - trunk
</A></li>
        <LI>Next message: <A HREF="000549.html">[WSJT-SVN] r849 - trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#536">[ date ]</a>
              <a href="thread.html#536">[ thread ]</a>
              <a href="subject.html#536">[ subject ]</a>
              <a href="author.html#536">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: va3db
Date: 2008-06-07 06:34:07 +0200 (Sat, 07 Jun 2008)
New Revision: 848

Modified:
   trunk/configure
   trunk/configure.ac
   trunk/setup.py.in
Log:
- Add a hack to print the current version in the same way as done in wsjt.py
  in setup.py



Modified: trunk/configure
===================================================================
--- trunk/configure	2008-06-07 03:32:45 UTC (rev 847)
+++ trunk/configure	2008-06-07 04:34:07 UTC (rev 848)
@@ -704,6 +704,7 @@
 G95
 GFORTRAN
 OS
+VERSION
 CLOBBER
 FC_LIB_PATH
 FC
@@ -1827,8 +1828,11 @@
 
 
 
+rev=`echo &quot;$Rev: 848 $&quot;|awk '{print $2}'`
+version=&quot;7.0 r${rev}&quot;
 
 
+
 OLD_CFLAGS=&quot;$CFLAGS&quot;
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
@@ -4363,8 +4367,10 @@
 OS=`uname`
 OS=&quot;${OS}&quot;
 
+VERSION=&quot;${version}&quot;
 
 
+
 { $as_echo &quot;$as_me:$LINENO: checking for ANSI C header files&quot; &gt;&amp;5
 $as_echo_n &quot;checking for ANSI C header files... &quot; &gt;&amp;6; }
 if test &quot;${ac_cv_header_stdc+set}&quot; = set; then

Modified: trunk/configure.ac
===================================================================
--- trunk/configure.ac	2008-06-07 03:32:45 UTC (rev 847)
+++ trunk/configure.ac	2008-06-07 04:34:07 UTC (rev 848)
@@ -8,6 +8,10 @@
 
 AC_INIT([wsjt],[5.9.6])
 
+dnl Sneakier way to get a Version into setup.py
+rev=`echo &quot;$Rev: 848 $&quot;|awk '{print $2}'`
+version=&quot;7.0 r${rev}&quot;
+
 AC_PREFIX_DEFAULT(&quot;/usr/local/&quot;)
 
 OLD_CFLAGS=&quot;$CFLAGS&quot;
@@ -95,6 +99,7 @@
 AC_MSG_CHECKING([OS])
 OS=`uname`
 AC_SUBST(OS, &quot;${OS}&quot;)
+AC_SUBST(VERSION, &quot;${version}&quot;)
 
 dnl Checks for header files.
 
@@ -380,7 +385,7 @@
 AC_SUBST(F2PYFLAGS)
 
 AC_OUTPUT
-dnl AC_CONFIG_FILES(Makefile)
+dnl AC_CONFIG_FILES(Makefile setup.py)
 
 dnl do summary
 

Modified: trunk/setup.py.in
===================================================================
--- trunk/setup.py.in	2008-06-07 03:32:45 UTC (rev 847)
+++ trunk/setup.py.in	2008-06-07 04:34:07 UTC (rev 848)
@@ -1,6 +1,6 @@
 #!/usr/bin/env python
 
-version = &quot;5.7&quot;
+version = &quot;WSJT Version &quot; + &quot;@VERSION@&quot; + &quot;, by K1JT&quot;
 
 from distutils.core import setup
 from distutils.file_util import copy_file


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000535.html">[WSJT-SVN] r847 - trunk
</A></li>
	<LI>Next message: <A HREF="000549.html">[WSJT-SVN] r849 - trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#536">[ date ]</a>
              <a href="thread.html#536">[ thread ]</a>
              <a href="subject.html#536">[ subject ]</a>
              <a href="author.html#536">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/wsjt-svn">More information about the wsjt-svn
mailing list</a><br>
</body></html>
