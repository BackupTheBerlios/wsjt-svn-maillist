<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [WSJT-SVN] WSJT compiled and running on Mac OS X 10.4
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/wsjt-svn/2007-December/index.html" >
   <LINK REL="made" HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20WSJT%20compiled%20and%20running%20on%20Mac%20OS%20X%2010.4&In-Reply-To=%3C47688A71.9090405%40princeton.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000278.html">
   <LINK REL="Next"  HREF="000280.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[WSJT-SVN] WSJT compiled and running on Mac OS X 10.4</H1>
    <B>Joe Taylor</B> 
    <A HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20WSJT%20compiled%20and%20running%20on%20Mac%20OS%20X%2010.4&In-Reply-To=%3C47688A71.9090405%40princeton.edu%3E"
       TITLE="[WSJT-SVN] WSJT compiled and running on Mac OS X 10.4">joe at Princeton.EDU
       </A><BR>
    <I>Wed Dec 19 04:05:21 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000278.html">[WSJT-SVN] WSJT compiled and running on Mac OS X 10.4
</A></li>
        <LI>Next message: <A HREF="000280.html">[WSJT-SVN] r593 - trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#279">[ date ]</a>
              <a href="thread.html#279">[ thread ]</a>
              <a href="subject.html#279">[ subject ]</a>
              <a href="author.html#279">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Joe,

Congratulations on getting WSJT compiled and running under OS/X, and 
many thanks for spelling out all the necessary details so carefully!!

Do let us know on the wsjt-devel list if you can use any help with 
remaining details.

	-- 73, Joe, K1JT

Joe Large (W6CQZ) wrote:
&gt;<i> After some weeks (or has it been months?) of tinkering I have managed  
</I>&gt;<i> to compile WSJT on Mac OS X 10.4 yielding a functional executable.
</I>&gt;<i> 
</I>&gt;<i> I am currently running WSJT 5.9.8 R575 (Only because that is the last  
</I>&gt;<i> CO I did via SVN) on a Power PC Based Mac (Dual 2GHz G5/2.5GB RAM)  
</I>&gt;<i> and it seems to work quite well with all JT65 modes as well as JT2  
</I>&gt;<i> and JT4 modes.  I have not tried any other modes, but it seems likely  
</I>&gt;<i> the other modes should work as well.  While this is all good news for  
</I>&gt;<i> anyone wanting to run WSJT on Mac OS issues remain that will need  
</I>&gt;<i> some attention before it will be usable in general, mainly with the  
</I>&gt;<i> UI.  At this time there are both visual and functional issues with  
</I>&gt;<i> the UI under Mac OS.. functionally the worst failure I have seen is  
</I>&gt;<i> double right clicking a callsign does not work to generate sequences,  
</I>&gt;<i> but I am guessing that will be something I can trace and fix.   
</I>&gt;<i> Visually the UI will need some adjustment to render correctly with  
</I>&gt;<i> Mac OS X but it works, for the most part.  So, WSJT on Mac OS X is  
</I>&gt;<i> not a lost cause as it had seemed to be.
</I>&gt;<i> 
</I>&gt;<i> Here is what it took to get it working on my setup.
</I>&gt;<i> 
</I>&gt;<i> Install Mac OS X Developer Tools (Xcode)
</I>&gt;<i> 
</I>&gt;<i> 	I am using XCode v2.5 but 2.4 should work as well.  Apple has  
</I>&gt;<i> released v3 with OS X 10.5, I am not running 10.5 here and probably  
</I>&gt;<i> will not upgrade any time soon as it will break another unrelated  
</I>&gt;<i> software package I use.  From what I can determine the packages below  
</I>&gt;<i> should work with 10.5/Developer Tool chain v3 as well.
</I>&gt;<i> 
</I>&gt;<i> The following is explained in more detail at <A HREF="http://www.scipy.org/">http://www.scipy.org/</A> 
</I>&gt;<i> Installing_SciPy/Mac_OS_X and is worth looking at as it presents a  
</I>&gt;<i> method to get python/fortran/numpy/scipy running on OS X with up to  
</I>&gt;<i> date versions and better results than other methods I have seen/ 
</I>&gt;<i> attempted.
</I>&gt;<i> 
</I>&gt;<i> Install Python 2.5.1 from www.python.org ( <A HREF="http://www.python.org/ftp/">http://www.python.org/ftp/</A> 
</I>&gt;<i> python/2.5.1/python-2.5.1-macosx.dmg )
</I>&gt;<i> 
</I>&gt;<i> 	While Python installs with OS X it is an older version and I found  
</I>&gt;<i> that many of the issues I had with getting WSJT up disappeared when I  
</I>&gt;<i> moved to the newer version.
</I>&gt;<i> 
</I>&gt;<i> Install GFortran from <A HREF="http://r.research.att.com/tools/">http://r.research.att.com/tools/</A> ( <A HREF="http://">http://</A> 
</I>&gt;<i> r.research.att.com/gfortran-4.2.1.dmg )
</I>&gt;<i> 
</I>&gt;<i> 	This seems to be the one Mac OS X implementation of GFortran that  
</I>&gt;<i> works properly.  I have tried, at least, 3 other implementations and  
</I>&gt;<i> none worked as well as this one.  This implementation is fully  
</I>&gt;<i> universal, i.e. it will generate i386, PPC, x86_64 and PPC64 bit code.
</I>&gt;<i> 
</I>&gt;<i> At this point it is CRUCIAL that you check your shell's path  
</I>&gt;<i> setting.  What matters is that /usr/bin is BEFORE /usr/local/bin or  
</I>&gt;<i> any other location (such as /sw/bin where fink places binaries or / 
</I>&gt;<i> optlocal/bin where macports places binaries).  We need to see gcc, ld  
</I>&gt;<i> and others from the default OS X tool chain and only use gfortran as  
</I>&gt;<i> installed in /usr/local/bin.
</I>&gt;<i> 
</I>&gt;<i> Install FFTW Library from <A HREF="http://fftw.org">http://fftw.org</A> ( <A HREF="http://fftw.org/">http://fftw.org/</A> 
</I>&gt;<i> fftw-3.1.2.tar.gz )
</I>&gt;<i> 
</I>&gt;<i> 	FFTW can be installed with some of the package tools (Fink and  
</I>&gt;<i> Macports) but building it from source and installing as outlined on  
</I>&gt;<i> the Installing SciPY/Mac OS X page yields a working configuration  
</I>&gt;<i> while the packaged installation methods does not.
</I>&gt;<i> 
</I>&gt;<i> Install Numpy from <A HREF="http://www.scipy.org/Download">http://www.scipy.org/Download</A> ( <A HREF="http://">http://</A> 
</I>&gt;<i> downloads.sourceforge.net/numpy/numpy-1.0.4.tar.gz?use_mirror=internap )
</I>&gt;<i> 
</I>&gt;<i> 	See the instructions for installation at <A HREF="http://www.scipy.org/">http://www.scipy.org/</A> 
</I>&gt;<i> Installing_SciPy/Mac_OS_X
</I>&gt;<i> 
</I>&gt;<i> Install SciPY from <A HREF="http://www.scipy.org/Download">http://www.scipy.org/Download</A> ( <A HREF="http://">http://</A> 
</I>&gt;<i> prdownloads.sourceforge.net/scipy/scipy-0.6.0.tar.gz?download )
</I>&gt;<i> 
</I>&gt;<i> 	Again, see the instructions from <A HREF="http://www.scipy.org/">http://www.scipy.org/</A> 
</I>&gt;<i> Installing_SciPyMac_OS_X (especially for SciPY as you need to use  
</I>&gt;<i> some additional commands beyond python setup.py install )
</I>&gt;<i> 
</I>&gt;<i> Install Numpy <A HREF="http://downloads.sourceforge.net/numpy/">http://downloads.sourceforge.net/numpy/</A> 
</I>&gt;<i> numpy-1.0.4.tar.gz?modtime=1194536674&amp;big_mirror=0
</I>&gt;<i> 
</I>&gt;<i> 	Use python setup.py build .. sudo python setup.py install
</I>&gt;<i> 
</I>&gt;<i> Instal python-imaging from <A HREF="http://effbot.org/media/downloads/">http://effbot.org/media/downloads/</A> 
</I>&gt;<i> Imaging-1.1.6.tar.gz
</I>&gt;<i> 
</I>&gt;<i> 	Use python setup.py build .. sudo python setup.py install [Note: You  
</I>&gt;<i> will need to install libjpeg if you think you will need PIL with jpeg  
</I>&gt;<i> support, I did not bother with that on my setup and it seems to work  
</I>&gt;<i> fine with WSJT)
</I>&gt;<i> 	
</I>&gt;<i> Install libsamplerate from <A HREF="http://www.mega-nerd.com/SRC/download.html">http://www.mega-nerd.com/SRC/download.html</A>  
</I>&gt;<i> ( <A HREF="http://www.mega-nerd.com/SRC/libsamplerate-0.1.2.tar.gz">http://www.mega-nerd.com/SRC/libsamplerate-0.1.2.tar.gz</A> )
</I>&gt;<i> 
</I>&gt;<i> 	Use ./configure .. make .. sudo make install
</I>&gt;<i> 
</I>&gt;<i> Install reed-solomon-4.0 from <A HREF="http://www.ka9q.net/code/fec/reed-">http://www.ka9q.net/code/fec/reed-</A> 
</I>&gt;<i> solomon-4.0.tar.gz
</I>&gt;<i> 
</I>&gt;<i> 	The makfile generated from ./configure is not &quot;OS X Aware&quot; and needs  
</I>&gt;<i> some changes to work properly.  You may download the makefile I  
</I>&gt;<i> edited at <A HREF="http://jt65.w6cqz.org/down/rs4makefile.darwin">http://jt65.w6cqz.org/down/rs4makefile.darwin</A> then use sudo  
</I>&gt;<i> make -f rs4makefile.darwin install (Actually.. is this really  
</I>&gt;<i> necessary? It seems the RS code is in the source tree and I see no  
</I>&gt;<i> sign of linking to librs so maybe that is old info in the SuSE build  
</I>&gt;<i> instructions, but better safe than sorry).
</I>&gt;<i> 
</I>&gt;<i> Install portaudio.
</I>&gt;<i> 
</I>&gt;<i> 	Portaudio is the item that causes the most grief in getting WSJT  
</I>&gt;<i> working on OS X.  While all the other items work with OS X more or  
</I>&gt;<i> less as the instructions for compiling WSJT with SuSE Linux indicate  
</I>&gt;<i> it is portaudio that needs to be handled differently.  First, static  
</I>&gt;<i> linking portaudio from the in tree version of WSJT simply does not  
</I>&gt;<i> work.  For the static linkage to work you need to pull in several  
</I>&gt;<i> dynamic libraries to support libportaudio.a and it is more trouble  
</I>&gt;<i> than it is worth to make that happen as those libraries are framework  
</I>&gt;<i> libs in Mac OS X and no combination of flags passed to f2py and/or  
</I>&gt;<i> gfortran worked to add those framework libraries to the linkage.   
</I>&gt;<i> Rather than continue to pull my hair out trying to make that work I  
</I>&gt;<i> decided to drop the static linkage of portaudio and change to a  
</I>&gt;<i> dynamic linkage.  It was at that point that WSJT compiled and worked  
</I>&gt;<i> on OS X (almost) effortlessly.  I'm using the latest snapshot version  
</I>&gt;<i> here but the standard release also seems to work, but the snapshot  
</I>&gt;<i> versions apparently have some bug fixes for OS X so I will reference  
</I>&gt;<i> that release.  So.. back to install portaudio.
</I>&gt;<i> 
</I>&gt;<i> Download portaudio at <A HREF="http://www.portaudio.com/archives/">http://www.portaudio.com/archives/</A> 
</I>&gt;<i> pa_snapshot_v19.tar.gz
</I>&gt;<i> 
</I>&gt;<i> 	Extract then run ./configure .. make  .. sudo make install
</I>&gt;<i> 
</I>&gt;<i> That leaves WSJT..
</I>&gt;<i> 
</I>&gt;<i> 	I am using r575 here as it is what I had last checked out from SVN.   
</I>&gt;<i> Assuming nothing has changed too radically since the later SVN  
</I>&gt;<i> versions should work as well (Actually I have compiled R385 and R540  
</I>&gt;<i> as well since I had those on hand and both worked fine). So..
</I>&gt;<i> 
</I>&gt;<i> 	from WSJT source directory run ./configure
</I>&gt;<i> 	edit Makefile as follows;
</I>&gt;<i> 
</I>&gt;<i> 	LIBS = -lpthread   -lsamplerate portaudio-v19/lib/.libs/libportaudio.a
</I>&gt;<i> 	change to
</I>&gt;<i> 	LIBS = -lpthread -lsamplerate -lportaudio
</I>&gt;<i> 
</I>&gt;<i> 	CPPFLAGS = -Iportaudio-v19/include -I/usr/local/include
</I>&gt;<i> 	change to
</I>&gt;<i> 	CPPFLAGS = -I/usr/local/include
</I>&gt;<i> 
</I>&gt;<i> 	Comment out the portaudio lines so you do not waste time building  
</I>&gt;<i> something that has already been built ;)
</I>&gt;<i> 
</I>&gt;<i> 	portaudio-v19/lib/.libs/libportaudio.a:
</I>&gt;<i>          #	(cd portaudio-v19;./configure --with-pic --with-jack=no)
</I>&gt;<i>          #	(cd portaudio-v19;${MAKE})
</I>&gt;<i> 
</I>&gt;<i> 	portaudio_clean:
</I>&gt;<i>          #	(cd portaudio-v19;${MAKE} clean)
</I>&gt;<i> 
</I>&gt;<i> 	run make
</I>&gt;<i> 
</I>&gt;<i> 	If all went as hoped for you should be able to use the command  
</I>&gt;<i> python ./wsjt.py
</I>&gt;<i> 
</I>&gt;<i> I hope this will be of some help to those who crave WSJT for the  
</I>&gt;<i> Macintosh.  There is still much to be done before it will be of  
</I>&gt;<i> general use, but it least it is possible to compile a working version  
</I>&gt;<i> that receives and transmits correctly.  Now that I have gotten this  
</I>&gt;<i> far I hope I will be able to track down the UI issues mentioned  
</I>&gt;<i> before and clean those up.  Also for anyone considering taking on  
</I>&gt;<i> WSJT + Mac OS X please note that I have no idea how many things are  
</I>&gt;<i> broken as I have only had a couple of hours runtime with it.  I have  
</I>&gt;<i> seen some strange results in decoding JT2, and in the &quot;Moon&quot; panel  
</I>&gt;<i> the value for Dgrd is incorrect so there are certainly issues to be  
</I>&gt;<i> tackled, but at least there is enough working correctly that one can  
</I>&gt;<i> begin to fix that which is not. :)
</I>&gt;<i> 
</I>&gt;<i> 73 - Joe - W6CQZ
</I>&gt;<i> _______________________________________________
</I>&gt;<i> wsjt-svn mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/wsjt-svn">wsjt-svn at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/wsjt-svn">https://lists.berlios.de/mailman/listinfo/wsjt-svn</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000278.html">[WSJT-SVN] WSJT compiled and running on Mac OS X 10.4
</A></li>
	<LI>Next message: <A HREF="000280.html">[WSJT-SVN] r593 - trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#279">[ date ]</a>
              <a href="thread.html#279">[ thread ]</a>
              <a href="subject.html#279">[ subject ]</a>
              <a href="author.html#279">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/wsjt-svn">More information about the wsjt-svn
mailing list</a><br>
</body></html>
