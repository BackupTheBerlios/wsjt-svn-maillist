<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [WSJT-SVN] r1359 - branches/wsjt8a
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/wsjt-svn/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20r1359%20-%20branches/wsjt8a&In-Reply-To=%3C200909141315.n8EDF4Vs023285%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001049.html">
   <LINK REL="Next"  HREF="001051.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[WSJT-SVN] r1359 - branches/wsjt8a</H1>
    <B>k1jt at mail.berlios.de</B> 
    <A HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20r1359%20-%20branches/wsjt8a&In-Reply-To=%3C200909141315.n8EDF4Vs023285%40sheep.berlios.de%3E"
       TITLE="[WSJT-SVN] r1359 - branches/wsjt8a">k1jt at mail.berlios.de
       </A><BR>
    <I>Mon Sep 14 15:15:04 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001049.html">[WSJT-SVN] r1358 - branches/wsjt8a
</A></li>
        <LI>Next message: <A HREF="001051.html">[WSJT-SVN] r1360 - branches/wsjt8a
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1050">[ date ]</a>
              <a href="thread.html#1050">[ thread ]</a>
              <a href="subject.html#1050">[ subject ]</a>
              <a href="author.html#1050">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: k1jt
Date: 2009-09-14 15:15:00 +0200 (Mon, 14 Sep 2009)
New Revision: 1359

Added:
   branches/wsjt8a/met2.21
   branches/wsjt8a/met8.21
   branches/wsjt8a/parity.c
   branches/wsjt8a/vit213.c
   branches/wsjt8a/vit416.c
Modified:
   branches/wsjt8a/Makefile.in
Log:
Add several required files.


Modified: branches/wsjt8a/Makefile.in
===================================================================
--- branches/wsjt8a/Makefile.in	2009-09-14 00:47:57 UTC (rev 1358)
+++ branches/wsjt8a/Makefile.in	2009-09-14 13:15:00 UTC (rev 1359)
@@ -49,7 +49,7 @@
 	pk30.o pk48.o pk78.o pkpfx.o unpkpfx.o \
 	hash.o nhash.o chenc.o chdec.o packbits.o unpackbits.o \
 	wrapkarn.o init_rs_int.o encode_rs_int.o decode_rs_int.o \
-	tab.o vit213.o vit416.o
+	tab.o parity.o vit213.o vit416.o
 
 F2PYONLY = ftn_init ftn_quit audio_init spec getfile azdist0 astro0
 

Added: branches/wsjt8a/met2.21
===================================================================
--- branches/wsjt8a/met2.21	2009-09-14 00:47:57 UTC (rev 1358)
+++ branches/wsjt8a/met2.21	2009-09-14 13:15:00 UTC (rev 1359)
@@ -0,0 +1,256 @@
+  -25.6   1.000  -9.966 1.000000 0.000000
+  -25.4   1.000  -9.966 1.000000 0.000000
+  -25.2   1.000  -9.966 1.000000 0.000000
+  -25.0   1.000  -9.966 1.000000 0.000000
+  -24.8   1.000  -9.966 1.000000 0.000000
+  -24.6   1.000  -9.966 1.000000 0.000000
+  -24.4   1.000  -9.966 1.000000 0.000000
+  -24.2   1.000  -9.966 1.000000 0.000000
+  -24.0   1.000  -9.966 1.000000 0.000000
+  -23.8   1.000  -9.966 1.000000 0.000000
+  -23.6   1.000  -9.966 1.000000 0.000000
+  -23.4   1.000  -9.966 1.000000 0.000000
+  -23.2   1.000  -9.966 1.000000 0.000000
+  -23.0   1.000  -9.966 1.000000 0.000000
+  -22.8   1.000  -9.966 1.000000 0.000000
+  -22.6   1.000  -9.966 1.000000 0.000000
+  -22.4   1.000  -9.966 1.000000 0.000000
+  -22.2   1.000  -9.966 1.000000 0.000000
+  -22.0   1.000  -9.966 1.000000 0.000000
+  -21.8   1.000  -9.966 1.000000 0.000000
+  -21.6   1.000  -9.966 1.000000 0.000000
+  -21.4   1.000  -9.966 1.000000 0.000000
+  -21.2   1.000  -9.966 1.000000 0.000000
+  -21.0   1.000  -9.966 1.000000 0.000000
+  -20.8   1.000  -9.966 1.000000 0.000000
+  -20.6   1.000  -9.966 1.000000 0.000000
+  -20.4   1.000  -9.966 1.000000 0.000000
+  -20.2   1.000  -9.966 1.000000 0.000000
+  -20.0   1.000  -9.966 1.000000 0.000000
+  -19.8   1.000  -9.966 1.000000 0.000000
+  -19.6   1.000  -9.966 1.000000 0.000000
+  -19.4   1.000  -9.966 1.000000 0.000000
+  -19.2   1.000  -9.966 1.000000 0.000000
+  -19.0   1.000  -9.966 1.000000 0.000000
+  -18.8   1.000  -9.966 1.000000 0.000000
+  -18.6   1.000  -9.966 1.000000 0.000000
+  -18.4   1.000  -9.966 1.000000 0.000000
+  -18.2   1.000  -9.966 1.000000 0.000000
+  -18.0   1.000  -9.966 1.000000 0.000000
+  -17.8   1.000  -9.966 1.000000 0.000000
+  -17.6   1.000  -9.966 1.000000 0.000000
+  -17.4   1.000  -9.966 1.000000 0.000000
+  -17.2   1.000  -9.966 1.000000 0.000000
+  -17.0   1.000  -9.966 1.000000 0.000000
+  -16.8   1.000  -9.966 1.000000 0.000000
+  -16.6   1.000  -9.966 1.000000 0.000000
+  -16.4   1.000  -9.966 1.000000 0.000000
+  -16.2   1.000  -9.966 1.000000 0.000000
+  -16.0   1.000  -9.966 1.000000 0.000000
+  -15.8   1.000  -9.966 1.000000 0.000000
+  -15.6   0.988  -5.858 0.991379 0.008621
+  -15.4   1.000  -9.966 1.000000 0.000000
+  -15.2   1.000  -9.966 1.000000 0.000000
+  -15.0   1.000  -9.966 1.000000 0.000000
+  -14.8   0.992  -6.531 0.994595 0.005405
+  -14.6   1.000  -9.966 1.000000 0.000000
+  -14.4   1.000  -9.966 1.000000 0.000000
+  -14.2   1.000  -9.966 1.000000 0.000000
+  -14.0   0.986  -5.663 0.990132 0.009868
+  -13.8   1.000  -9.966 1.000000 0.000000
+  -13.6   1.000  -9.966 1.000000 0.000000
+  -13.4   1.000  -9.966 1.000000 0.000000
+  -13.2   0.998  -8.217 0.998319 0.001681
+  -13.0   0.996  -7.453 0.997147 0.002853
+  -12.8   0.996  -7.424 0.997089 0.002911
+  -12.6   1.000  -9.966 1.000000 0.000000
+  -12.4   0.996  -7.366 0.996970 0.003030
+  -12.2   0.999  -9.082 0.999077 0.000923
+  -12.0   0.991  -6.356 0.993898 0.006102
+  -11.8   0.994  -6.872 0.995733 0.004267
+  -11.6   0.999  -9.687 0.999393 0.000607
+  -11.4   0.995  -7.271 0.996762 0.003238
+  -11.2   0.997  -8.069 0.998138 0.001862
+  -11.0   0.996  -7.451 0.997142 0.002858
+  -10.8   0.997  -8.106 0.998186 0.001814
+  -10.6   0.998  -8.359 0.998477 0.001523
+  -10.4   0.995  -7.041 0.996203 0.003797
+  -10.2   0.995  -7.186 0.996566 0.003434
+  -10.0   0.993  -6.641 0.994989 0.005011
+   -9.8   0.993  -6.770 0.995420 0.004580
+   -9.6   0.995  -7.075 0.996292 0.003708
+   -9.4   0.993  -6.643 0.994999 0.005001
+   -9.2   0.993  -6.647 0.995010 0.004990
+   -9.0   0.993  -6.654 0.995034 0.004966
+   -8.8   0.992  -6.474 0.994377 0.005623
+   -8.6   0.988  -5.874 0.991476 0.008524
+   -8.4   0.988  -5.886 0.991545 0.008455
+   -8.2   0.988  -5.973 0.992042 0.007958
+   -8.0   0.986  -5.659 0.990105 0.009895
+   -7.8   0.987  -5.825 0.991179 0.008821
+   -7.6   0.986  -5.675 0.990213 0.009787
+   -7.4   0.983  -5.379 0.987982 0.012018
+   -7.2   0.982  -5.319 0.987473 0.012528
+   -7.0   0.979  -5.132 0.985743 0.014257
+   -6.8   0.979  -5.079 0.985208 0.014792
+   -6.6   0.976  -4.893 0.983171 0.016830
+   -6.4   0.974  -4.815 0.982236 0.017764
+   -6.2   0.973  -4.768 0.981652 0.018348
+   -6.0   0.969  -4.567 0.978908 0.021092
+   -5.8   0.965  -4.398 0.976282 0.023718
+   -5.6   0.962  -4.267 0.974026 0.025974
+   -5.4   0.959  -4.171 0.972234 0.027766
+   -5.2   0.954  -4.006 0.968880 0.031120
+   -5.0   0.950  -3.881 0.966065 0.033935
+   -4.8   0.945  -3.748 0.962781 0.037219
+   -4.6   0.940  -3.623 0.959431 0.040569
+   -4.4   0.934  -3.492 0.955564 0.044435
+   -4.2   0.928  -3.362 0.951378 0.048622
+   -4.0   0.920  -3.212 0.946060 0.053940
+   -3.8   0.910  -3.046 0.939479 0.060521
+   -3.6   0.900  -2.902 0.933126 0.066874
+   -3.4   0.890  -2.762 0.926310 0.073690
+   -3.2   0.876  -2.605 0.917835 0.082165
+   -3.0   0.861  -2.442 0.907970 0.092030
+   -2.8   0.845  -2.295 0.898121 0.101879
+   -2.6   0.826  -2.139 0.886453 0.113547
+   -2.4   0.805  -1.983 0.873480 0.126519
+   -2.2   0.779  -1.817 0.858118 0.141882
+   -2.0   0.750  -1.650 0.840700 0.159300
+   -1.8   0.718  -1.494 0.822428 0.177572
+   -1.6   0.678  -1.322 0.800024 0.199976
+   -1.4   0.635  -1.163 0.776677 0.223323
+   -1.2   0.582  -0.992 0.748660 0.251340
+   -1.0   0.519  -0.818 0.716415 0.283585
+   -0.8   0.449  -0.655 0.682522 0.317478
+   -0.6   0.363  -0.486 0.642994 0.357006
+   -0.4   0.263  -0.321 0.599792 0.400208
+   -0.2   0.145  -0.161 0.552749 0.447251
+    0.0   0.000   0.000 0.500000 0.500000
+    0.2  -0.161   0.145 0.447251 0.552749
+    0.4  -0.321   0.263 0.400208 0.599792
+    0.6  -0.486   0.363 0.357006 0.642994
+    0.8  -0.655   0.449 0.317478 0.682522
+    1.0  -0.818   0.519 0.283585 0.716415
+    1.2  -0.992   0.582 0.251340 0.748660
+    1.4  -1.163   0.635 0.223323 0.776677
+    1.6  -1.322   0.678 0.199976 0.800024
+    1.8  -1.494   0.718 0.177572 0.822428
+    2.0  -1.650   0.750 0.159300 0.840700
+    2.2  -1.817   0.779 0.141882 0.858118
+    2.4  -1.983   0.805 0.126519 0.873480
+    2.6  -2.139   0.826 0.113547 0.886453
+    2.8  -2.295   0.845 0.101879 0.898121
+    3.0  -2.442   0.861 0.092030 0.907970
+    3.2  -2.605   0.876 0.082165 0.917835
+    3.4  -2.762   0.890 0.073690 0.926310
+    3.6  -2.902   0.900 0.066874 0.933126
+    3.8  -3.046   0.910 0.060521 0.939479
+    4.0  -3.212   0.920 0.053940 0.946060
+    4.2  -3.362   0.928 0.048622 0.951378
+    4.4  -3.492   0.934 0.044435 0.955564
+    4.6  -3.623   0.940 0.040569 0.959431
+    4.8  -3.748   0.945 0.037219 0.962781
+    5.0  -3.881   0.950 0.033935 0.966065
+    5.2  -4.006   0.954 0.031120 0.968880
+    5.4  -4.171   0.959 0.027766 0.972234
+    5.6  -4.267   0.962 0.025974 0.974026
+    5.8  -4.398   0.965 0.023718 0.976282
+    6.0  -4.567   0.969 0.021092 0.978908
+    6.2  -4.768   0.973 0.018348 0.981652
+    6.4  -4.815   0.974 0.017764 0.982236
+    6.6  -4.893   0.976 0.016830 0.983170
+    6.8  -5.079   0.979 0.014792 0.985208
+    7.0  -5.132   0.979 0.014257 0.985743
+    7.2  -5.319   0.982 0.012528 0.987472
+    7.4  -5.379   0.983 0.012018 0.987982
+    7.6  -5.675   0.986 0.009787 0.990213
+    7.8  -5.825   0.987 0.008821 0.991179
+    8.0  -5.659   0.986 0.009895 0.990105
+    8.2  -5.973   0.988 0.007958 0.992042
+    8.4  -5.886   0.988 0.008455 0.991545
+    8.6  -5.874   0.988 0.008524 0.991476
+    8.8  -6.474   0.992 0.005623 0.994377
+    9.0  -6.654   0.993 0.004966 0.995034
+    9.2  -6.647   0.993 0.004990 0.995010
+    9.4  -6.643   0.993 0.005001 0.994999
+    9.6  -7.075   0.995 0.003708 0.996292
+    9.8  -6.770   0.993 0.004580 0.995420
+   10.0  -6.641   0.993 0.005011 0.994989
+   10.2  -7.186   0.995 0.003434 0.996566
+   10.4  -7.041   0.995 0.003797 0.996203
+   10.6  -8.359   0.998 0.001523 0.998477
+   10.8  -8.106   0.997 0.001814 0.998186
+   11.0  -7.451   0.996 0.002858 0.997142
+   11.2  -8.069   0.997 0.001862 0.998138
+   11.4  -7.271   0.995 0.003238 0.996762
+   11.6  -9.687   0.999 0.000607 0.999393
+   11.8  -6.872   0.994 0.004267 0.995733
+   12.0  -6.356   0.991 0.006102 0.993898
+   12.2  -9.082   0.999 0.000923 0.999077
+   12.4  -7.366   0.996 0.003030 0.996970
+   12.6  -9.966   1.000 0.000000 1.000000
+   12.8  -7.424   0.996 0.002911 0.997089
+   13.0  -7.453   0.996 0.002853 0.997147
+   13.2  -8.217   0.998 0.001681 0.998319
+   13.4  -9.966   1.000 0.000000 1.000000
+   13.6  -9.966   1.000 0.000000 1.000000
+   13.8  -9.966   1.000 0.000000 1.000000
+   14.0  -5.663   0.986 0.009868 0.990132
+   14.2  -9.966   1.000 0.000000 1.000000
+   14.4  -9.966   1.000 0.000000 1.000000
+   14.6  -9.966   1.000 0.000000 1.000000
+   14.8  -6.531   0.992 0.005405 0.994595
+   15.0  -9.966   1.000 0.000000 1.000000
+   15.2  -9.966   1.000 0.000000 1.000000
+   15.4  -9.966   1.000 0.000000 1.000000
+   15.6  -5.858   0.988 0.008621 0.991379
+   15.8  -9.966   1.000 0.000000 1.000000
+   16.0  -9.966   1.000 0.000000 1.000000
+   16.2  -9.966   1.000 0.000000 1.000000
+   16.4  -9.966   1.000 0.000000 1.000000
+   16.6  -9.966   1.000 0.000000 1.000000
+   16.8  -9.966   1.000 0.000000 1.000000
+   17.0  -9.966   1.000 0.000000 1.000000
+   17.2  -9.966   1.000 0.000000 1.000000
+   17.4  -9.966   1.000 0.000000 1.000000
+   17.6  -9.966   1.000 0.000000 1.000000
+   17.8  -9.966   1.000 0.000000 1.000000
+   18.0  -9.966   1.000 0.000000 1.000000
+   18.2  -9.966   1.000 0.000000 1.000000
+   18.4  -9.966   1.000 0.000000 1.000000
+   18.6  -9.966   1.000 0.000000 1.000000
+   18.8  -9.966   1.000 0.000000 1.000000
+   19.0  -9.966   1.000 0.000000 1.000000
+   19.2  -9.966   1.000 0.000000 1.000000
+   19.4  -9.966   1.000 0.000000 1.000000
+   19.6  -9.966   1.000 0.000000 1.000000
+   19.8  -9.966   1.000 0.000000 1.000000
+   20.0  -9.966   1.000 0.000000 1.000000
+   20.2  -9.966   1.000 0.000000 1.000000
+   20.4  -9.966   1.000 0.000000 1.000000
+   20.6  -9.966   1.000 0.000000 1.000000
+   20.8  -9.966   1.000 0.000000 1.000000
+   21.0  -9.966   1.000 0.000000 1.000000
+   21.2  -9.966   1.000 0.000000 1.000000
+   21.4  -9.966   1.000 0.000000 1.000000
+   21.6  -9.966   1.000 0.000000 1.000000
+   21.8  -9.966   1.000 0.000000 1.000000
+   22.0  -9.966   1.000 0.000000 1.000000
+   22.2  -9.966   1.000 0.000000 1.000000
+   22.4  -9.966   1.000 0.000000 1.000000
+   22.6  -9.966   1.000 0.000000 1.000000
+   22.8  -9.966   1.000 0.000000 1.000000
+   23.0  -9.966   1.000 0.000000 1.000000
+   23.2  -9.966   1.000 0.000000 1.000000
+   23.4  -9.966   1.000 0.000000 1.000000
+   23.6  -9.966   1.000 0.000000 1.000000
+   23.8  -9.966   1.000 0.000000 1.000000
+   24.0  -9.966   1.000 0.000000 1.000000
+   24.2  -9.966   1.000 0.000000 1.000000
+   24.4  -9.966   1.000 0.000000 1.000000
+   24.6  -9.966   1.000 0.000000 1.000000
+   24.8  -9.966   1.000 0.000000 1.000000
+   25.0  -9.966   1.000 0.000000 1.000000
+   25.2  -9.966   1.000 0.000000 1.000000
+   25.4  -9.966   1.000 0.000000 1.000000

Added: branches/wsjt8a/met8.21
===================================================================
--- branches/wsjt8a/met8.21	2009-09-14 00:47:57 UTC (rev 1358)
+++ branches/wsjt8a/met8.21	2009-09-14 13:15:00 UTC (rev 1359)
@@ -0,0 +1,256 @@
+  -25.6   1.000  -9.966 1.000000 0.000000
+  -25.4   1.000  -9.966 1.000000 0.000000
+  -25.2   1.000  -9.966 1.000000 0.000000
+  -25.0   1.000  -9.966 1.000000 0.000000
+  -24.8   1.000  -9.966 1.000000 0.000000
+  -24.6   1.000  -9.966 1.000000 0.000000
+  -24.4   1.000  -9.966 1.000000 0.000000
+  -24.2   1.000  -9.966 1.000000 0.000000
+  -24.0   1.000  -9.966 1.000000 0.000000
+  -23.8   1.000  -9.966 1.000000 0.000000
+  -23.6   1.000  -9.966 1.000000 0.000000
+  -23.4   1.000  -9.966 1.000000 0.000000
+  -23.2   1.000  -9.966 1.000000 0.000000
+  -23.0   1.000  -9.966 1.000000 0.000000
+  -22.8   1.000  -9.966 1.000000 0.000000
+  -22.6   1.000  -9.966 1.000000 0.000000
+  -22.4   1.000  -9.966 1.000000 0.000000
+  -22.2   1.000  -9.966 1.000000 0.000000
+  -22.0   1.000  -9.966 1.000000 0.000000
+  -21.8   1.000  -9.966 1.000000 0.000000
+  -21.6   1.000  -9.966 1.000000 0.000000
+  -21.4   1.000  -9.966 1.000000 0.000000
+  -21.2   1.000  -9.966 1.000000 0.000000
+  -21.0   1.000  -9.966 1.000000 0.000000
+  -20.8   1.000  -9.966 1.000000 0.000000
+  -20.6   1.000  -9.966 1.000000 0.000000
+  -20.4   1.000  -9.966 1.000000 0.000000
+  -20.2   1.000  -9.966 1.000000 0.000000
+  -20.0   1.000  -9.966 1.000000 0.000000
+  -19.8   1.000  -9.966 1.000000 0.000000
+  -19.6   1.000  -9.966 1.000000 0.000000
+  -19.4   1.000  -9.966 1.000000 0.000000
+  -19.2   1.000  -9.966 1.000000 0.000000
+  -19.0   1.000  -9.966 1.000000 0.000000
+  -18.8   1.000  -9.966 1.000000 0.000000
+  -18.6   1.000  -9.966 1.000000 0.000000
+  -18.4   1.000  -9.966 1.000000 0.000000
+  -18.2   1.000  -9.966 1.000000 0.000000
+  -18.0   1.000  -9.966 1.000000 0.000000
+  -17.8   1.000  -9.966 1.000000 0.000000
+  -17.6   1.000  -9.966 1.000000 0.000000
+  -17.4   1.000  -9.966 1.000000 0.000000
+  -17.2   1.000  -9.966 1.000000 0.000000
+  -17.0   1.000  -9.966 1.000000 0.000000
+  -16.8   1.000  -9.966 1.000000 0.000000
+  -16.6   1.000  -9.966 1.000000 0.000000
+  -16.4   1.000  -9.966 1.000000 0.000000
+  -16.2   1.000  -9.966 1.000000 0.000000
+  -16.0   0.988  -5.858 0.991379 0.008621
+  -15.8   1.000  -9.966 1.000000 0.000000
+  -15.6   0.991  -6.313 0.993711 0.006289
+  -15.4   0.993  -6.629 0.994950 0.005051
+  -15.2   1.000  -9.966 1.000000 0.000000
+  -15.0   0.995  -7.055 0.996241 0.003759
+  -14.8   1.000  -9.966 1.000000 0.000000
+  -14.6   0.991  -6.371 0.993958 0.006042
+  -14.4   1.000  -9.966 1.000000 0.000000
+  -14.2   0.991  -6.313 0.993711 0.006289
+  -14.0   0.992  -6.426 0.994186 0.005814
+  -13.8   0.991  -6.288 0.993600 0.006400
+  -13.6   0.990  -6.113 0.992775 0.007225
+  -13.4   0.990  -6.152 0.992968 0.007032
+  -13.2   0.992  -6.534 0.994606 0.005394
+  -13.0   0.996  -7.332 0.996898 0.003102
+  -12.8   0.990  -6.184 0.993121 0.006879
+  -12.6   0.994  -7.016 0.996136 0.003864
+  -12.4   0.993  -6.658 0.995049 0.004950
+  -12.2   0.991  -6.369 0.993953 0.006047
+  -12.0   0.992  -6.559 0.994699 0.005301
+  -11.8   0.989  -6.002 0.992197 0.007803
+  -11.6   0.991  -6.304 0.993671 0.006329
+  -11.4   0.987  -5.826 0.991188 0.008812
+  -11.2   0.985  -5.632 0.989919 0.010081
+  -11.0   0.989  -5.995 0.992162 0.007838
+  -10.8   0.984  -5.544 0.989284 0.010717
+  -10.6   0.983  -5.377 0.987966 0.012034
+  -10.4   0.979  -5.108 0.985502 0.014498
+  -10.2   0.977  -4.954 0.983869 0.016131
+  -10.0   0.971  -4.652 0.980118 0.019882
+   -9.8   0.975  -4.870 0.982896 0.017104
+   -9.6   0.974  -4.822 0.982324 0.017676
+   -9.4   0.970  -4.608 0.979490 0.020510
+   -9.2   0.970  -4.623 0.979702 0.020298
+   -9.0   0.970  -4.621 0.979679 0.020321
+   -8.8   0.967  -4.472 0.977465 0.022535
+   -8.6   0.962  -4.261 0.973915 0.026085
+   -8.4   0.960  -4.186 0.972538 0.027462
+   -8.2   0.957  -4.098 0.970806 0.029194
+   -8.0   0.956  -4.062 0.970061 0.029939
+   -7.8   0.953  -3.975 0.968209 0.031791
+   -7.6   0.942  -3.677 0.960918 0.039082
+   -7.4   0.946  -3.768 0.963301 0.036699
+   -7.2   0.937  -3.550 0.957308 0.042692
+   -7.0   0.933  -3.463 0.954652 0.045348
+   -6.8   0.929  -3.377 0.951866 0.048134
+   -6.6   0.920  -3.212 0.946042 0.053958
+   -6.4   0.917  -3.164 0.944202 0.055798
+   -6.2   0.911  -3.058 0.939981 0.060019
+   -6.0   0.903  -2.939 0.934818 0.065182
+   -5.8   0.895  -2.829 0.929642 0.070358
+   -5.6   0.884  -2.690 0.922540 0.077459
+   -5.4   0.877  -2.608 0.917972 0.082028
+   -5.2   0.869  -2.531 0.913509 0.086491
+   -5.0   0.858  -2.411 0.905967 0.094033
+   -4.8   0.846  -2.301 0.898525 0.101475
+   -4.6   0.834  -2.201 0.891269 0.108731
+   -4.4   0.821  -2.096 0.883085 0.116915
+   -4.2   0.806  -1.992 0.874340 0.125660
+   -4.0   0.790  -1.882 0.864307 0.135693
+   -3.8   0.775  -1.790 0.855445 0.144555
+   -3.6   0.755  -1.678 0.843726 0.156274
+   -3.4   0.737  -1.587 0.833538 0.166462
+   -3.2   0.713  -1.473 0.819841 0.180159
+   -3.0   0.691  -1.376 0.807345 0.192655
+   -2.8   0.667  -1.280 0.794093 0.205907
+   -2.6   0.640  -1.181 0.779404 0.220596
+   -2.4   0.612  -1.084 0.764178 0.235822
+   -2.2   0.581  -0.987 0.747708 0.252292
+   -2.0   0.548  -0.895 0.731037 0.268963
+   -1.8   0.510  -0.796 0.712035 0.287965
+   -1.6   0.472  -0.706 0.693474 0.306526
+   -1.4   0.425  -0.606 0.671514 0.328486
+   -1.2   0.378  -0.514 0.649948 0.350053
+   -1.0   0.328  -0.425 0.627452 0.372548
+   -0.8   0.274  -0.338 0.604549 0.395451
+   -0.6   0.212  -0.249 0.579151 0.420849
+   -0.4   0.146  -0.163 0.553389 0.446611
+   -0.2   0.075  -0.079 0.526648 0.473352
+    0.0   0.000   0.000 0.500000 0.500000
+    0.2  -0.079   0.075 0.473352 0.526648
+    0.4  -0.163   0.146 0.446611 0.553389
+    0.6  -0.249   0.212 0.420849 0.579151
+    0.8  -0.338   0.274 0.395451 0.604549
+    1.0  -0.425   0.328 0.372548 0.627452
+    1.2  -0.514   0.378 0.350053 0.649948
+    1.4  -0.606   0.425 0.328486 0.671514
+    1.6  -0.706   0.472 0.306526 0.693474
+    1.8  -0.796   0.510 0.287965 0.712035
+    2.0  -0.895   0.548 0.268963 0.731037
+    2.2  -0.987   0.581 0.252292 0.747708
+    2.4  -1.084   0.612 0.235822 0.764178
+    2.6  -1.181   0.640 0.220596 0.779404
+    2.8  -1.280   0.667 0.205907 0.794093
+    3.0  -1.376   0.691 0.192655 0.807345
+    3.2  -1.473   0.713 0.180159 0.819841
+    3.4  -1.587   0.737 0.166462 0.833538
+    3.6  -1.678   0.755 0.156274 0.843726
+    3.8  -1.790   0.775 0.144555 0.855445
+    4.0  -1.882   0.790 0.135693 0.864307
+    4.2  -1.992   0.806 0.125660 0.874340
+    4.4  -2.096   0.821 0.116915 0.883085
+    4.6  -2.201   0.834 0.108731 0.891269
+    4.8  -2.301   0.846 0.101475 0.898525
+    5.0  -2.411   0.858 0.094033 0.905967
+    5.2  -2.531   0.869 0.086491 0.913509
+    5.4  -2.608   0.877 0.082028 0.917972
+    5.6  -2.690   0.884 0.077459 0.922540
+    5.8  -2.829   0.895 0.070358 0.929642
+    6.0  -2.939   0.903 0.065182 0.934818
+    6.2  -3.058   0.911 0.060019 0.939981
+    6.4  -3.164   0.917 0.055798 0.944202
+    6.6  -3.212   0.920 0.053958 0.946042
+    6.8  -3.377   0.929 0.048134 0.951866
+    7.0  -3.463   0.933 0.045348 0.954652
+    7.2  -3.550   0.937 0.042692 0.957308
+    7.4  -3.768   0.946 0.036699 0.963301
+    7.6  -3.677   0.942 0.039082 0.960918
+    7.8  -3.975   0.953 0.031791 0.968210
+    8.0  -4.062   0.956 0.029939 0.970061
+    8.2  -4.098   0.957 0.029194 0.970806
+    8.4  -4.186   0.960 0.027462 0.972538
+    8.6  -4.261   0.962 0.026085 0.973915
+    8.8  -4.472   0.967 0.022535 0.977465
+    9.0  -4.621   0.970 0.020321 0.979679
+    9.2  -4.623   0.970 0.020298 0.979702
+    9.4  -4.608   0.970 0.020510 0.979490
+    9.6  -4.822   0.974 0.017676 0.982324
+    9.8  -4.870   0.975 0.017104 0.982896
+   10.0  -4.652   0.971 0.019882 0.980118
+   10.2  -4.954   0.977 0.016131 0.983869
+   10.4  -5.108   0.979 0.014498 0.985502
+   10.6  -5.377   0.983 0.012034 0.987966
+   10.8  -5.544   0.984 0.010717 0.989284
+   11.0  -5.995   0.989 0.007838 0.992162
+   11.2  -5.632   0.985 0.010081 0.989919
+   11.4  -5.826   0.987 0.008812 0.991188
+   11.6  -6.304   0.991 0.006329 0.993671
+   11.8  -6.002   0.989 0.007803 0.992197
+   12.0  -6.559   0.992 0.005301 0.994699
+   12.2  -6.369   0.991 0.006047 0.993953
+   12.4  -6.658   0.993 0.004950 0.995049
+   12.6  -7.016   0.994 0.003864 0.996136
+   12.8  -6.184   0.990 0.006879 0.993121
+   13.0  -7.332   0.996 0.003102 0.996898
+   13.2  -6.534   0.992 0.005394 0.994606
+   13.4  -6.152   0.990 0.007032 0.992968
+   13.6  -6.113   0.990 0.007225 0.992775
+   13.8  -6.288   0.991 0.006400 0.993600
+   14.0  -6.426   0.992 0.005814 0.994186
+   14.2  -6.313   0.991 0.006289 0.993711
+   14.4  -9.966   1.000 0.000000 1.000000
+   14.6  -6.371   0.991 0.006042 0.993958
+   14.8  -9.966   1.000 0.000000 1.000000
+   15.0  -7.055   0.995 0.003759 0.996241
+   15.2  -9.966   1.000 0.000000 1.000000
+   15.4  -6.629   0.993 0.005051 0.994949
+   15.6  -6.313   0.991 0.006289 0.993711
+   15.8  -9.966   1.000 0.000000 1.000000
+   16.0  -5.858   0.988 0.008621 0.991379
+   16.2  -9.966   1.000 0.000000 1.000000
+   16.4  -9.966   1.000 0.000000 1.000000
+   16.6  -9.966   1.000 0.000000 1.000000
+   16.8  -9.966   1.000 0.000000 1.000000
+   17.0  -9.966   1.000 0.000000 1.000000
+   17.2  -9.966   1.000 0.000000 1.000000
+   17.4  -9.966   1.000 0.000000 1.000000
+   17.6  -9.966   1.000 0.000000 1.000000
+   17.8  -9.966   1.000 0.000000 1.000000
+   18.0  -9.966   1.000 0.000000 1.000000
+   18.2  -9.966   1.000 0.000000 1.000000
+   18.4  -9.966   1.000 0.000000 1.000000
+   18.6  -9.966   1.000 0.000000 1.000000
+   18.8  -9.966   1.000 0.000000 1.000000
+   19.0  -9.966   1.000 0.000000 1.000000
+   19.2  -9.966   1.000 0.000000 1.000000
+   19.4  -9.966   1.000 0.000000 1.000000
+   19.6  -9.966   1.000 0.000000 1.000000
+   19.8  -9.966   1.000 0.000000 1.000000
+   20.0  -9.966   1.000 0.000000 1.000000
+   20.2  -9.966   1.000 0.000000 1.000000
+   20.4  -9.966   1.000 0.000000 1.000000
+   20.6  -9.966   1.000 0.000000 1.000000
+   20.8  -9.966   1.000 0.000000 1.000000
+   21.0  -9.966   1.000 0.000000 1.000000
+   21.2  -9.966   1.000 0.000000 1.000000
+   21.4  -9.966   1.000 0.000000 1.000000
+   21.6  -9.966   1.000 0.000000 1.000000
+   21.8  -9.966   1.000 0.000000 1.000000
+   22.0  -9.966   1.000 0.000000 1.000000
+   22.2  -9.966   1.000 0.000000 1.000000
+   22.4  -9.966   1.000 0.000000 1.000000
+   22.6  -9.966   1.000 0.000000 1.000000
+   22.8  -9.966   1.000 0.000000 1.000000
+   23.0  -9.966   1.000 0.000000 1.000000
+   23.2  -9.966   1.000 0.000000 1.000000
+   23.4  -9.966   1.000 0.000000 1.000000
+   23.6  -9.966   1.000 0.000000 1.000000
+   23.8  -9.966   1.000 0.000000 1.000000
+   24.0  -9.966   1.000 0.000000 1.000000
+   24.2  -9.966   1.000 0.000000 1.000000
+   24.4  -9.966   1.000 0.000000 1.000000
+   24.6  -9.966   1.000 0.000000 1.000000
+   24.8  -9.966   1.000 0.000000 1.000000
+   25.0  -9.966   1.000 0.000000 1.000000
+   25.2  -9.966   1.000 0.000000 1.000000
+   25.4  -9.966   1.000 0.000000 1.000000

Added: branches/wsjt8a/parity.c
===================================================================
--- branches/wsjt8a/parity.c	2009-09-14 00:47:57 UTC (rev 1358)
+++ branches/wsjt8a/parity.c	2009-09-14 13:15:00 UTC (rev 1359)
@@ -0,0 +1,8 @@
+extern unsigned char Partab[];  /* Parity lookup table */
+
+int parity(int x)
+{
+  x ^= (x &gt;&gt; 16);
+  x ^= (x &gt;&gt; 8);
+  return Partab[x &amp; 0xff];
+}

Added: branches/wsjt8a/vit213.c
===================================================================
--- branches/wsjt8a/vit213.c	2009-09-14 00:47:57 UTC (rev 1358)
+++ branches/wsjt8a/vit213.c	2009-09-14 13:15:00 UTC (rev 1359)
@@ -0,0 +1,212 @@
+/* Viterbi decoder for arbitrary convolutional code
+ * viterbi27 and viterbi37 for the r=1/2 and r=1/3 K=7 codes are faster
+ * Copyright 1999 Phil Karn, KA9Q
+ * May be used under the terms of the GNU Public License
+ */
+
+/* Select code here */
+
+#define V213
+
+
+#ifdef V213
+#define	K 13			/* Constraint length */
+#define N 2			/* Number of symbols per data bit */
+#define Polys	Poly213		/* Select polynomials here */
+#endif
+
+/* Rate 1/2 codes */
+unsigned int Poly213[] = {012767,016461};	/* k = 13  */
+
+#include &lt;memory.h&gt;
+#define NULL ((void *)0)
+
+#define LONGBITS 32
+#define LOGLONGBITS 5
+
+#undef max
+#define max(x,y) ((x) &gt; (y) ? (x) : (y))
+#define D       (1 &lt;&lt; max(0,K-LOGLONGBITS-1))
+#define MAXNBITS 200            /* Maximum frame size (user bits) */
+
+extern unsigned char Partab[];	/* Parity lookup table */
+
+int Syms[1 &lt;&lt; K];
+
+// Wrapper for calling &quot;encode&quot; from Fortran:
+//void __stdcall ENCODE(
+void enc213_(
+unsigned char data[],           // User data, 8 bits per byte
+int *nbits,                     // Number of user bits
+unsigned char symbols[],        // Encoded one-bit symbols, 8 per byte
+int *nsymbols,                  // Number of symbols
+int *kk,                        // K
+int *nn)                        // N
+{
+  int nbytes;
+  nbytes=(*nbits+7)/8;          // Always encode multiple of 8 information bits
+  enc213(symbols,data,nbytes,0,0); // Do the encoding
+  *nsymbols=(*nbits+K-1)*N;        // Return number of encoded symbols
+  *kk=K;
+  *nn=N;
+}
+
+/* Convolutionally encode data into binary symbols */
+  enc213(unsigned char symbols[], unsigned char data[],
+       unsigned int nbytes, unsigned int startstate,
+       unsigned int endstate)
+{
+  int i,j,k,n=-1;
+  unsigned int encstate = startstate;
+
+  for(k=0; k&lt;nbytes; k++) {
+    for(i=7;i&gt;=0;i--){
+      encstate = (encstate + encstate) + ((data[k] &gt;&gt; i) &amp; 1);
+      for(j=0;j&lt;N;j++) {
+	n=n+1;
+	symbols[n] = parity(encstate &amp; Polys[j]);
+      }
+    }
+  }
+  // Flush out with zero tail.  (No need, if tail-biting code.)
+  for(i=0; i&lt;K-1;i++){
+    encstate = (encstate &lt;&lt; 1) | ((endstate &gt;&gt; i) &amp; 1);
+    for(j=0;j&lt;N;j++) {
+      n=n+1;
+      symbols[n] = parity(encstate &amp; Polys[j]);
+    }
+  }
+  return 0;
+}
+
+// Wrapper for calling &quot;viterbi&quot; from Fortran:
+//void __stdcall VITERBI(
+void vit213_(
+unsigned char symbols[],  /* Raw deinterleaved input symbols */
+unsigned int *Nbits,	  /* Number of decoded information bits */
+int mettab[2][256],	  /* Metric table, [sent sym][rx symbol] */
+unsigned char ddec[],	  /* Decoded output data */
+long *Metric              /* Final path metric (bigger is better) */
+){
+  long metric;
+  vit213(&amp;metric,ddec,symbols,*Nbits,mettab,0,0);
+  *Metric=metric;
+}
+
+/* Viterbi decoder */
+int vit213(
+long *metric,           /* Final path metric (returned value) */
+unsigned char *data,	/* Decoded output data */
+unsigned char *symbols,	/* Raw deinterleaved input symbols */
+unsigned int nbits,	/* Number of output bits */
+int mettab[2][256],	/* Metric table, [sent sym][rx symbol] */
+unsigned int startstate,         /* Encoder starting state */
+unsigned int endstate            /* Encoder ending state */
+){
+  int bitcnt = -(K-1);
+  long m0,m1;
+  int i,j,sym,ipp;
+  int mets[1 &lt;&lt; N];
+  unsigned long paths[(MAXNBITS+K-1)*D];
+  unsigned long *pp,mask;
+  long cmetric[1 &lt;&lt; (K-1)],nmetric[1 &lt;&lt; (K-1)];
+  static int VDInit = 0;
+  
+  memset(paths,0,sizeof(paths));
+
+  // Initialize on first time through:
+  if(!VDInit){
+    for(i=0;i&lt;(1&lt;&lt;K);i++){
+      sym = 0;
+      for(j=0;j&lt;N;j++)
+	sym = (sym &lt;&lt; 1) + parity(i &amp; Polys[j]);
+      Syms[i] = sym;
+    }
+    VDInit++;
+  }
+
+  // Keep only lower K-1 bits of specified startstate and endstate
+  startstate &amp;= ~((1&lt;&lt;(K-1)) - 1);
+  endstate &amp;=   ~((1&lt;&lt;(K-1)) - 1);
+
+  /* Initialize starting metrics */
+  for(i=0;i&lt; 1&lt;&lt;(K-1);i++)
+    cmetric[i] = -999999;
+  cmetric[startstate] = 0;
+
+  pp = paths;
+  ipp=0;
+  for(;;){ /* For each data bit */
+    /* Read input symbols and compute branch metrics */
+    for(i=0;i&lt; 1&lt;&lt;N;i++){
+      mets[i] = 0;
+      for(j=0;j&lt;N;j++){
+	mets[i] += mettab[(i &gt;&gt; (N-j-1)) &amp; 1][symbols[j]];
+      }
+    }
+    symbols += N;
+    /* Run the add-compare-select operations */
+    mask = 1;
+    for(i=0;i&lt; 1 &lt;&lt; (K-1);i+=2){
+      int b1,b2;
+      
+      b1 = mets[Syms[i]];
+      nmetric[i] = m0 = cmetric[i/2] + b1; 
+      b2 = mets[Syms[i+1]];
+      b1 -= b2;
+      m1 = cmetric[(i/2) + (1&lt;&lt;(K-2))] + b2;
+
+      if(m1 &gt; m0){
+	nmetric[i] = m1;
+	*pp |= mask;
+      }
+
+      m0 -= b1;
+      nmetric[i+1] = m0;
+      m1 += b1;
+
+      if(m1 &gt; m0){
+	nmetric[i+1] = m1;
+	*pp |= mask &lt;&lt; 1;
+      }
+
+      mask &lt;&lt;= 2;
+      if(mask == 0){
+	mask = 1;
+	pp++;
+	ipp++;
+      }
+    }
+    if(mask != 1){
+      pp++;
+      ipp++;
+    }
+    if(++bitcnt == nbits){
+      *metric = nmetric[endstate];
+      break;
+    }
+    memcpy(cmetric,nmetric,sizeof(cmetric));
+  }
+
+  /* Chain back from terminal state to produce decoded data */
+  if(data == NULL)
+    return 0;/* Discard output */
+  memset(data,0,(nbits+7)/8); /* round up in case nbits % 8 != 0 */
+
+  for(i=nbits-1;i &gt;= 0;i--){
+    //    int a0,a1;
+    pp -= D;
+    ipp -= D;
+    m0=endstate &gt;&gt; LOGLONGBITS;
+    m1=1L &lt;&lt; (endstate &amp; (LONGBITS-1));
+    if(pp[m0] &amp; m1) {
+      //      a0=nmetric[endstate];
+      endstate |= (1 &lt;&lt; (K-1));
+      //      a1=nmetric[endstate];
+      data[i&gt;&gt;3] |= 0x80 &gt;&gt; (i&amp;7);
+      //      printf(&quot;B  %d  %d  %d  %d\n&quot;,*metric,i,a0,a1);
+    }
+    endstate &gt;&gt;= 1;
+  }
+  return 0;
+}

Added: branches/wsjt8a/vit416.c
===================================================================
--- branches/wsjt8a/vit416.c	2009-09-14 00:47:57 UTC (rev 1358)
+++ branches/wsjt8a/vit416.c	2009-09-14 13:15:00 UTC (rev 1359)
@@ -0,0 +1,217 @@
+/* Viterbi decoder for arbitrary convolutional code
+ * viterbi27 and viterbi37 for the r=1/2 and r=1/3 K=7 codes are faster
+ * Copyright 1999 Phil Karn, KA9Q
+ * May be used under the terms of the GNU Public License
+ */
+
+/* Select code here */
+
+#define V416
+
+
+#ifdef V416
+#define	K 16			/* Constraint length */
+#define N 4			/* Number of symbols per data bit */
+#define Polys	Poly416		/* Select polynomials here */
+#endif
+
+/* Rate 1/2 codes */
+unsigned int Poly416[] = {0127757,0115143,0171665,0131351}; // k = 16
+
+#include &lt;memory.h&gt;
+#define NULL ((void *)0)
+
+#define LONGBITS 32
+#define LOGLONGBITS 5
+
+#undef max
+#define max(x,y) ((x) &gt; (y) ? (x) : (y))
+#define D       (1 &lt;&lt; max(0,K-LOGLONGBITS-1))
+#define MAXNBITS 200            /* Maximum frame size (user bits) */
+
+extern unsigned char Partab[];	/* Parity lookup table */
+
+int Syms[1 &lt;&lt; K];
+
+/*
+int parity(int x)
+{
+  x ^= (x &gt;&gt; 16);
+  x ^= (x &gt;&gt; 8);
+  return Partab[x &amp; 0xff];
+}
+*/
+
+// Wrapper for calling &quot;encode&quot; from Fortran:
+//void __stdcall ENCODE(
+void enc416_(
+unsigned char data[],           // User data, 8 bits per byte
+int *nbits,                     // Number of user bits
+unsigned char symbols[],        // Encoded one-bit symbols, 8 per byte
+int *nsymbols,                  // Number of symbols
+int *kk,                        // K
+int *nn)                        // N
+{
+  int nbytes;
+  nbytes=(*nbits+7)/8;          // Always encode multiple of 8 information bits
+  enc416(symbols,data,nbytes,0,0); // Do the encoding
+  *nsymbols=(*nbits+K-1)*N;        // Return number of encoded symbols
+  *kk=K;
+  *nn=N;
+}
+
+/* Convolutionally encode data into binary symbols */
+  enc416(unsigned char symbols[], unsigned char data[],
+       unsigned int nbytes, unsigned int startstate,
+       unsigned int endstate)
+{
+  int i,j,k,n=-1;
+  unsigned int encstate = startstate;
+
+  for(k=0; k&lt;nbytes; k++) {
+    for(i=7;i&gt;=0;i--){
+      encstate = (encstate + encstate) + ((data[k] &gt;&gt; i) &amp; 1);
+      for(j=0;j&lt;N;j++) {
+	n=n+1;
+	symbols[n] = parity(encstate &amp; Polys[j]);
+      }
+    }
+  }
+  // Flush out with zero tail.  (No need, if tail-biting code.)
+  for(i=0; i&lt;K-1;i++){
+    encstate = (encstate &lt;&lt; 1) | ((endstate &gt;&gt; i) &amp; 1);
+    for(j=0;j&lt;N;j++) {
+      n=n+1;
+      symbols[n] = parity(encstate &amp; Polys[j]);
+    }
+  }
+  return 0;
+}
+
+// Wrapper for calling &quot;viterbi&quot; from Fortran:
+//void __stdcall VITERBI(
+void vit416_(
+unsigned char symbols[],  /* Raw deinterleaved input symbols */
+unsigned int *Nbits,	  /* Number of decoded information bits */
+int mettab[2][256],	  /* Metric table, [sent sym][rx symbol] */
+unsigned char ddec[],	  /* Decoded output data */
+long *Metric              /* Final path metric (bigger is better) */
+){
+  long metric;
+  vit416(&amp;metric,ddec,symbols,*Nbits,mettab,0,0);
+  *Metric=metric;
+}
+
+/* Viterbi decoder */
+int vit416(
+long *metric,           /* Final path metric (returned value) */
+unsigned char *data,	/* Decoded output data */
+unsigned char *symbols,	/* Raw deinterleaved input symbols */
+unsigned int nbits,	/* Number of output bits */
+int mettab[2][256],	/* Metric table, [sent sym][rx symbol] */
+unsigned int startstate,         /* Encoder starting state */
+unsigned int endstate            /* Encoder ending state */
+){
+  int bitcnt = -(K-1);
+  long m0,m1;
+  int i,j,sym,ipp;
+  int mets[1 &lt;&lt; N];
+  unsigned long paths[(MAXNBITS+K-1)*D];
+  unsigned long *pp,mask;
+  long cmetric[1 &lt;&lt; (K-1)],nmetric[1 &lt;&lt; (K-1)];
+  static int VDInit=0;
+  
+  memset(paths,0,sizeof(paths));
+
+  // Initialize on first time through:
+  if(!VDInit){
+    for(i=0;i&lt;(1&lt;&lt;K);i++){
+      sym = 0;
+      for(j=0;j&lt;N;j++)
+	sym = (sym &lt;&lt; 1) + parity(i &amp; Polys[j]);
+      Syms[i] = sym;
+    }
+    VDInit++;
+  }
+
+  // Keep only lower K-1 bits of specified startstate and endstate
+  startstate &amp;= ~((1&lt;&lt;(K-1)) - 1);
+  endstate &amp;=   ~((1&lt;&lt;(K-1)) - 1);
+
+  /* Initialize starting metrics */
+  for(i=0;i&lt; 1&lt;&lt;(K-1);i++)
+    cmetric[i] = -999999;
+  cmetric[startstate] = 0;
+
+  pp = paths;
+  ipp=0;
+  for(;;){ /* For each data bit */
+    /* Read input symbols and compute branch metrics */
+    for(i=0;i&lt; 1&lt;&lt;N;i++){
+      mets[i] = 0;
+      for(j=0;j&lt;N;j++){
+	mets[i] += mettab[(i &gt;&gt; (N-j-1)) &amp; 1][symbols[j]];
+      }
+    }
+    symbols += N;
+    /* Run the add-compare-select operations */
+    mask = 1;
+    for(i=0;i&lt; 1 &lt;&lt; (K-1);i+=2){
+      int b1,b2;
+      
+      b1 = mets[Syms[i]];
+      nmetric[i] = m0 = cmetric[i/2] + b1; 
+      b2 = mets[Syms[i+1]];
+      b1 -= b2;
+      m1 = cmetric[(i/2) + (1&lt;&lt;(K-2))] + b2;
+
+      if(m1 &gt; m0){
+	nmetric[i] = m1;
+	*pp |= mask;
+      }
+
+      m0 -= b1;
+      nmetric[i+1] = m0;
+      m1 += b1;
+
+      if(m1 &gt; m0){
+	nmetric[i+1] = m1;
+	*pp |= mask &lt;&lt; 1;
+      }
+
+      mask &lt;&lt;= 2;
+      if(mask == 0){
+	mask = 1;
+	pp++;
+	ipp++;
+      }
+    }
+    if(mask != 1){
+      pp++;
+      ipp++;
+    }
+    if(++bitcnt == nbits){
+      *metric = nmetric[endstate];
+      break;
+    }
+    memcpy(cmetric,nmetric,sizeof(cmetric));
+  }
+
+  /* Chain back from terminal state to produce decoded data */
+  if(data == NULL)
+    return 0;/* Discard output */
+  memset(data,0,(nbits+7)/8); /* round up in case nbits % 8 != 0 */
+
+  for(i=nbits-1;i &gt;= 0;i--){
+    pp -= D;
+    ipp -= D;
+    m0=endstate &gt;&gt; LOGLONGBITS;
+    m1=1L &lt;&lt; (endstate &amp; (LONGBITS-1));
+    if(pp[m0] &amp; m1) {
+      endstate |= (1 &lt;&lt; (K-1));
+      data[i&gt;&gt;3] |= 0x80 &gt;&gt; (i&amp;7);
+    }
+    endstate &gt;&gt;= 1;
+  }
+  return 0;
+}


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001049.html">[WSJT-SVN] r1358 - branches/wsjt8a
</A></li>
	<LI>Next message: <A HREF="001051.html">[WSJT-SVN] r1360 - branches/wsjt8a
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1050">[ date ]</a>
              <a href="thread.html#1050">[ thread ]</a>
              <a href="subject.html#1050">[ subject ]</a>
              <a href="author.html#1050">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/wsjt-svn">More information about the wsjt-svn
mailing list</a><br>
</body></html>
