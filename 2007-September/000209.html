<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [WSJT-SVN] r522 - trunk
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/wsjt-svn/2007-September/index.html" >
   <LINK REL="made" HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20r522%20-%20trunk&In-Reply-To=%3C200709171904.l8HJ4ta9029919%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000206.html">
   <LINK REL="Next"  HREF="000207.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[WSJT-SVN] r522 - trunk</H1>
    <B>k1jt at mail.berlios.de</B> 
    <A HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20r522%20-%20trunk&In-Reply-To=%3C200709171904.l8HJ4ta9029919%40sheep.berlios.de%3E"
       TITLE="[WSJT-SVN] r522 - trunk">k1jt at mail.berlios.de
       </A><BR>
    <I>Mon Sep 17 21:04:55 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000206.html">[WSJT-SVN] r521 - trunk
</A></li>
        <LI>Next message: <A HREF="000207.html">[WSJT-SVN] r523 - trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#209">[ date ]</a>
              <a href="thread.html#209">[ thread ]</a>
              <a href="subject.html#209">[ subject ]</a>
              <a href="author.html#209">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: k1jt
Date: 2007-09-17 21:04:41 +0200 (Mon, 17 Sep 2007)
New Revision: 522

Added:
   trunk/dmet_10_-1_3.dat
   trunk/dmet_10_0_3.dat
   trunk/dmet_20_-2_2.dat
   trunk/dmet_20_-3_2.dat
   trunk/fano.c
   trunk/gen24.f
   trunk/genmet.f
   trunk/prcom2.f
   trunk/tab.c
Modified:
   trunk/Makefile.win
   trunk/wsjt.py
   trunk/wsjtgen.F90
Log:
Introduce trial modes JT2 and JT4.  (Tx only, so far.)


Modified: trunk/Makefile.win
===================================================================
--- trunk/Makefile.win	2007-09-16 14:32:09 UTC (rev 521)
+++ trunk/Makefile.win	2007-09-17 19:04:41 UTC (rev 522)
@@ -21,7 +21,7 @@
 	$(FC) $(FFLAGS) /exe:JT65code.exe $(OBJS1)
 
 
-OBJS2C   = init_rs.o encode_rs.o decode_rs.o jtaudio.o
+OBJS2C   = init_rs.o encode_rs.o decode_rs.o jtaudio.o fano.o tab.o
 F2PYONLY = ftn_init ftn_quit audio_init spec getfile azdist0 astro0
 SRCS2F90 = a2d.f90 abc441.f90 astro0.f90 audio_init.f90 azdist0.f90 \
 	blanker.f90 decode1.f90 decode2.f90 decode3.f90 ftn_init.f90 \
@@ -29,7 +29,8 @@
 	i1tor4.f90 pix2d.f90 pix2d65.f90 rfile.f90 savedata.f90 spec.f90 \
 	wsjtgen.f90 runqqq.f90 fivehz.f90 msgparms.f90
 SRCS2F77 = wsjt1.f avesp2.f bzap.f spec441.f spec2d.f mtdecode.f \
-	stdecode.f indexx.f s2shape.f flat2.f gen65.f chkmsg.f gen6m.f \
+	stdecode.f indexx.f s2shape.f flat2.f gen65.f gen24.f entail.f \
+	genmet.f chkmsg.f gen6m.f \
 	gentone.f syncf0.f syncf1.f synct.f decode6m.f avemsg6m.f \
 	set.f flatten.f db.f pctile.f sort.f ssort.f ps.f smooth.f ping.f \
 	longx.f peakup.f sync.f detect.f avemsg65.f decode65.f demod64a.f \
@@ -94,6 +95,12 @@
 igray.obj: igray.c
 	$(CC) /nologo /c /DWin32=1 igray.c
 
+fano.o: fano.c
+	$(CC) /nologo /c /Fofano.o fano.c
+
+tab.o: tab.c
+	$(CC) /nologo /c /Fotab.o tab.c
+
 .PHONY : clean
 
 clean:

Added: trunk/dmet_10_-1_3.dat
===================================================================
--- trunk/dmet_10_-1_3.dat	2007-09-16 14:32:09 UTC (rev 521)
+++ trunk/dmet_10_-1_3.dat	2007-09-17 19:04:41 UTC (rev 522)
@@ -0,0 +1,256 @@
+   0  0.998460 -8.872242       644    602925
+   1  0.999856 -9.965784        60    602925
+   2  0.997634 -8.253104        70     42643
+   3  0.997579 -8.220426        77     45855
+   4  0.997304 -8.065124        92     49187
+   5  0.997518 -8.184021        90     52259
+   6  0.997080 -7.949903       114     56262
+   7  0.997009 -7.915258       125     60224
+   8  0.996900 -7.863917       138     64158
+   9  0.996705 -7.776095       156     68234
+  10  0.996615 -7.736920       173     73638
+  11  0.996580 -7.722078       185     77938
+  12  0.996364 -7.633907       211     83609
+  13  0.996645 -7.749724       208     89327
+  14  0.996808 -7.821879       212     95725
+  15  0.995865 -7.448860       293    102090
+  16  0.996115 -7.538671       294    109037
+  17  0.996262 -7.594225       300    115642
+  18  0.995953 -7.479582       347    123515
+  19  0.995327 -7.272605       429    132237
+  20  0.995472 -7.318034       444    141253
+  21  0.994856 -7.134197       538    150616
+  22  0.994669 -7.082885       593    160192
+  23  0.995052 -7.190126       590    171726
+  24  0.994525 -7.044331       694    182514
+  25  0.994431 -7.019804       754    194938
+  26  0.994312 -6.989451       822    208077
+  27  0.994006 -6.914042       919    220737
+  28  0.993518 -6.801259      1063    236045
+  29  0.993221 -6.736843      1180    250532
+  30  0.993254 -6.743960      1256    267993
+  31  0.992980 -6.686596      1391    285174
+  32  0.992864 -6.662932      1509    304308
+  33  0.992665 -6.623349      1653    324281
+  34  0.992076 -6.512322      1895    344079
+  35  0.992048 -6.507266      2025    366390
+  36  0.991415 -6.396963      2331    390540
+  37  0.991439 -6.400972      2476    415995
+  38  0.990973 -6.324881      2776    442294
+  39  0.990427 -6.240433      3130    470165
+  40  0.990074 -6.188259      3460    501152
+  41  0.989961 -6.172013      3720    532736
+  42  0.989323 -6.083427      4204    565943
+  43  0.988822 -6.017572      4678    601444
+  44  0.988489 -5.975313      5120    639121
+  45  0.988153 -5.934033      5601    679284
+  46  0.987538 -5.861314      6254    720888
+  47  0.987122 -5.814171      6881    767441
+  48  0.986504 -5.746824      7645    813413
+  49  0.986150 -5.709613      8343    864864
+  50  0.985760 -5.669756      9124    919804
+  51  0.984601 -5.557445     10458    974542
+  52  0.984468 -5.545110     11190   1033782
+  53  0.983628 -5.469531     12506   1095753
+  54  0.982927 -5.409438     13844   1162934
+  55  0.982570 -5.379771     14998   1233925
+  56  0.981782 -5.316376     16590   1305512
+  57  0.980815 -5.242204     18528   1384025
+  58  0.979951 -5.179106     20548   1468353
+  59  0.978908 -5.106448     22897   1554724
+  60  0.978130 -5.054569     25131   1645254
+  61  0.977351 -5.004469     27561   1741816
+  62  0.976092 -4.927051     30834   1845240
+  63  0.974915 -4.858332     34164   1947830
+  64  0.973849 -4.798794     37782   2065492
+  65  0.973000 -4.753164     41296   2186025
+  66  0.971857 -4.693922     45416   2305570
+  67  0.970247 -4.614430     50842   2439934
+  68  0.969009 -4.556219     55977   2577916
+  69  0.967748 -4.499323     61611   2725276
+  70  0.966050 -4.426163     68487   2876247
+  71  0.964662 -4.369033     75203   3032755
+  72  0.962668 -4.290835     83924   3201462
+  73  0.961435 -4.244558     91536   3378718
+  74  0.959435 -4.172639    101530   3560432
+  75  0.957147 -4.094594    113237   3755900
+  76  0.955384 -4.037302    124320   3958123
+  77  0.953045 -3.964769    137882   4167901
+  78  0.950829 -3.899341    152341   4394035
+  79  0.948283 -3.827770    168598   4619424
+  80  0.945711 -3.759019    186490   4863180
+  81  0.942850 -3.686354    206645   5113924
+  82  0.940523 -3.629931    226297   5376785
+  83  0.937302 -3.555432    250972   5650319
+  84  0.934010 -3.483245    277642   5932140
+  85  0.930606 -3.412380    307167   6233667
+  86  0.927162 -3.344197    338642   6539551
+  87  0.923292 -3.271427    374705   6861604
+  88  0.919204 -3.198553    414039   7188027
+  89  0.914947 -3.126583    457288   7530291
+  90  0.910225 -3.050958    506779   7893204
+  91  0.905306 -2.976443    560444   8261428
+  92  0.900464 -2.906893    617467   8644550
+  93  0.894901 -2.831175    683168   9040408
+  94  0.889109 -2.756644    754913   9448829
+  95  0.883046 -2.682830    832736   9861498
+  96  0.876384 -2.606195    920887  10293596
+  97  0.869270 -2.528975   1018540  10738701
+  98  0.861789 -2.452376   1125302  11192630
+  99  0.853896 -2.376139   1243334  11666090
+ 100  0.845404 -2.298801   1372803  12136916
+ 101  0.835993 -2.218161   1519003  12616837
+ 102  0.826400 -2.140855   1677584  13119486
+ 103  0.815926 -2.061464   1854253  13625410
+ 104  0.804498 -1.980161   2051889  14139035
+ 105  0.792828 -1.902210   2264278  14662803
+ 106  0.779810 -1.820639   2502657  15178000
+ 107  0.766069 -1.739996   2766483  15715513
+ 108  0.751077 -1.657665   3057665  16236538
+ 109  0.734802 -1.574192   3382382  16760963
+ 110  0.717848 -1.492998   3736720  17299010
+ 111  0.699299 -1.410105   4130677  17824407
+ 112  0.679332 -1.326978   4565240  18341000
+ 113  0.657886 -1.243897   5043643  18846820
+ 114  0.635067 -1.161685   5565089  19335185
+ 115  0.609226 -1.075340   6166786  19822746
+ 116  0.582593 -0.992914   6807300  20288489
+ 117  0.553462 -0.909428   7518821  20726383
+ 118  0.521588 -0.825043   8312106  21139138
+ 119  0.486853 -0.740298   9187067  21507302
+ 120  0.449589 -0.656652  10154305  21860603
+ 121  0.408910 -0.572786  11226721  22170368
+ 122  0.364790 -0.489432  12402655  22421326
+ 123  0.316364 -0.405812  13711341  22619162
+ 124  0.264298 -0.323825  15147698  22771371
+ 125  0.206701 -0.241349  16745350  22843931
+ 126  0.143872 -0.159825  18507029  22843297
+ 127  0.075048 -0.079168  20451843  22759151
+ 128  0.000000  0.000000  22341681  22341681
+ 129 -0.079168  0.075048  22759151  20451843
+ 130 -0.159825  0.143872  22843297  18507029
+ 131 -0.241349  0.206701  22843931  16745350
+ 132 -0.323825  0.264298  22771371  15147698
+ 133 -0.405812  0.316364  22619162  13711341
+ 134 -0.489432  0.364790  22421326  12402655
+ 135 -0.572786  0.408910  22170368  11226721
+ 136 -0.656652  0.449589  21860603  10154305
+ 137 -0.740298  0.486853  21507302   9187067
+ 138 -0.825043  0.521588  21139138   8312106
+ 139 -0.909428  0.553462  20726383   7518821
+ 140 -0.992914  0.582593  20288489   6807300
+ 141 -1.075340  0.609226  19822746   6166786
+ 142 -1.161685  0.635067  19335185   5565089
+ 143 -1.243897  0.657886  18846820   5043643
+ 144 -1.326978  0.679332  18341000   4565240
+ 145 -1.410105  0.699299  17824407   4130677
+ 146 -1.492998  0.717848  17299010   3736720
+ 147 -1.574192  0.734802  16760963   3382382
+ 148 -1.657665  0.751077  16236538   3057665
+ 149 -1.739996  0.766069  15715513   2766483
+ 150 -1.820639  0.779810  15178000   2502657
+ 151 -1.902210  0.792828  14662803   2264278
+ 152 -1.980161  0.804498  14139035   2051889
+ 153 -2.061464  0.815926  13625410   1854253
+ 154 -2.140855  0.826400  13119486   1677584
+ 155 -2.218161  0.835993  12616837   1519003
+ 156 -2.298801  0.845404  12136916   1372803
+ 157 -2.376139  0.853896  11666090   1243334
+ 158 -2.452376  0.861789  11192630   1125302
+ 159 -2.528975  0.869270  10738701   1018540
+ 160 -2.606195  0.876384  10293596    920887
+ 161 -2.682830  0.883046   9861498    832736
+ 162 -2.756644  0.889109   9448829    754913
+ 163 -2.831175  0.894901   9040408    683168
+ 164 -2.906893  0.900464   8644550    617467
+ 165 -2.976443  0.905306   8261428    560444
+ 166 -3.050958  0.910225   7893204    506779
+ 167 -3.126583  0.914947   7530291    457288
+ 168 -3.198553  0.919204   7188027    414039
+ 169 -3.271427  0.923292   6861604    374705
+ 170 -3.344197  0.927162   6539551    338642
+ 171 -3.412380  0.930606   6233667    307167
+ 172 -3.483245  0.934010   5932140    277642
+ 173 -3.555432  0.937302   5650319    250972
+ 174 -3.629931  0.940523   5376785    226297
+ 175 -3.686354  0.942850   5113924    206645
+ 176 -3.759019  0.945711   4863180    186490
+ 177 -3.827770  0.948283   4619424    168598
+ 178 -3.899341  0.950829   4394035    152341
+ 179 -3.964769  0.953045   4167901    137882
+ 180 -4.037302  0.955384   3958123    124320
+ 181 -4.094594  0.957147   3755900    113237
+ 182 -4.172639  0.959435   3560432    101530
+ 183 -4.244558  0.961435   3378718     91536
+ 184 -4.290835  0.962668   3201462     83924
+ 185 -4.369033  0.964662   3032755     75203
+ 186 -4.426163  0.966050   2876247     68487
+ 187 -4.499323  0.967748   2725276     61611
+ 188 -4.556219  0.969009   2577916     55977
+ 189 -4.614430  0.970247   2439934     50842
+ 190 -4.693922  0.971857   2305570     45416
+ 191 -4.753164  0.973000   2186025     41296
+ 192 -4.798794  0.973849   2065492     37782
+ 193 -4.858332  0.974915   1947830     34164
+ 194 -4.927051  0.976092   1845240     30834
+ 195 -5.004469  0.977351   1741816     27561
+ 196 -5.054569  0.978130   1645254     25131
+ 197 -5.106448  0.978908   1554724     22897
+ 198 -5.179106  0.979951   1468353     20548
+ 199 -5.242204  0.980815   1384025     18528
+ 200 -5.316376  0.981782   1305512     16590
+ 201 -5.379771  0.982570   1233925     14998
+ 202 -5.409438  0.982927   1162934     13844
+ 203 -5.469531  0.983628   1095753     12506
+ 204 -5.545110  0.984468   1033782     11190
+ 205 -5.557445  0.984601    974542     10458
+ 206 -5.669756  0.985760    919804      9124
+ 207 -5.709613  0.986150    864864      8343
+ 208 -5.746824  0.986504    813413      7645
+ 209 -5.814171  0.987122    767441      6881
+ 210 -5.861314  0.987538    720888      6254
+ 211 -5.934033  0.988153    679284      5601
+ 212 -5.975313  0.988489    639121      5120
+ 213 -6.017572  0.988822    601444      4678
+ 214 -6.083427  0.989323    565943      4204
+ 215 -6.172013  0.989961    532736      3720
+ 216 -6.188259  0.990074    501152      3460
+ 217 -6.240433  0.990427    470165      3130
+ 218 -6.324881  0.990973    442294      2776
+ 219 -6.400972  0.991439    415995      2476
+ 220 -6.396963  0.991415    390540      2331
+ 221 -6.507266  0.992048    366390      2025
+ 222 -6.512322  0.992076    344079      1895
+ 223 -6.623349  0.992665    324281      1653
+ 224 -6.662932  0.992864    304308      1509
+ 225 -6.686596  0.992980    285174      1391
+ 226 -6.743960  0.993254    267993      1256
+ 227 -6.736843  0.993221    250532      1180
+ 228 -6.801259  0.993518    236045      1063
+ 229 -6.914042  0.994006    220737       919
+ 230 -6.989451  0.994312    208077       822
+ 231 -7.019804  0.994431    194938       754
+ 232 -7.044331  0.994525    182514       694
+ 233 -7.190126  0.995052    171726       590
+ 234 -7.082885  0.994669    160192       593
+ 235 -7.134197  0.994856    150616       538
+ 236 -7.318034  0.995472    141253       444
+ 237 -7.272605  0.995327    132237       429
+ 238 -7.479582  0.995953    123515       347
+ 239 -7.594225  0.996262    115642       300
+ 240 -7.538671  0.996115    109037       294
+ 241 -7.448860  0.995865    102090       293
+ 242 -7.821879  0.996808     95725       212
+ 243 -7.749724  0.996645     89327       208
+ 244 -7.633907  0.996364     83609       211
+ 245 -7.722078  0.996580     77938       185
+ 246 -7.736920  0.996615     73638       173
+ 247 -7.776095  0.996705     68234       156
+ 248 -7.863917  0.996900     64158       138
+ 249 -7.915258  0.997009     60224       125
+ 250 -7.949903  0.997080     56262       114
+ 251 -8.184021  0.997518     52259        90
+ 252 -8.065124  0.997304     49187        92
+ 253 -8.220426  0.997579     45855        77
+ 254 -8.253104  0.997634     42643        70
+ 255 -9.965784  0.999856    602925        60

Added: trunk/dmet_10_0_3.dat
===================================================================
--- trunk/dmet_10_0_3.dat	2007-09-16 14:32:09 UTC (rev 521)
+++ trunk/dmet_10_0_3.dat	2007-09-17 19:04:41 UTC (rev 522)
@@ -0,0 +1,256 @@
+   0  0.999391 -9.965784       517   1224389
+   1  0.999920 -9.965784        68   1224389
+   2  0.998977 -9.461832        58     81742
+   3  0.998865 -9.311896        69     87639
+   4  0.999074 -9.605819        60     93442
+   5  0.998880 -9.331062        77     99109
+   6  0.998865 -9.311898        83    105421
+   7  0.998853 -9.296916        89    111873
+   8  0.998682 -9.097175       109    119284
+   9  0.998413 -8.829258       140    127219
+  10  0.998600 -9.009508       131    134900
+  11  0.998474 -8.885104       152    143581
+  12  0.998508 -8.917674       158    152660
+  13  0.998501 -8.911383       169    162577
+  14  0.998296 -8.726394       204    172605
+  15  0.998042 -8.525905       250    184049
+  16  0.998306 -8.735070       230    195779
+  17  0.998299 -8.729231       244    206856
+  18  0.997987 -8.486456       308    220624
+  19  0.997953 -8.462070       332    233824
+  20  0.998050 -8.531781       336    248373
+  21  0.997856 -8.395662       393    264316
+  22  0.997599 -8.232006       468    280953
+  23  0.997524 -8.187819       513    298663
+  24  0.997339 -8.083947       583    315797
+  25  0.997422 -8.129858       600    335534
+  26  0.997277 -8.050694       672    355697
+  27  0.997180 -8.000114       739    377659
+  28  0.997026 -7.923845       829    401795
+  29  0.996711 -7.778638       972    425902
+  30  0.996713 -7.779378      1030    451548
+  31  0.996521 -7.697649      1153    477568
+  32  0.996433 -7.661639      1255    506971
+  33  0.996267 -7.596181      1397    539239
+  34  0.996182 -7.563525      1508    569023
+  35  0.996139 -7.547523      1615    602658
+  36  0.995971 -7.486032      1788    639300
+  37  0.995758 -7.412047      1990    675857
+  38  0.995267 -7.254162      2356    716970
+  39  0.995110 -7.207230      2573    757862
+  40  0.995053 -7.190574      2756    802414
+  41  0.994792 -7.116529      3077    850900
+  42  0.994629 -7.072137      3360    900903
+  43  0.994139 -6.946458      3872    951247
+  44  0.994182 -6.956913      4065   1005955
+  45  0.993827 -6.871611      4553   1061770
+  46  0.993360 -6.766586      5189   1124761
+  47  0.993132 -6.718064      5663   1186719
+  48  0.992972 -6.684972      6120   1253265
+  49  0.992573 -6.605530      6840   1325297
+  50  0.992218 -6.538363      7572   1400044
+  51  0.991889 -6.478642      8315   1474742
+  52  0.991418 -6.397473      9296   1558023
+  53  0.991149 -6.353189     10123   1645036
+  54  0.990653 -6.274652     11268   1733491
+  55  0.990229 -6.210960     12416   1827072
+  56  0.989766 -6.144404     13730   1928723
+  57  0.989354 -6.087690     15069   2034638
+  58  0.988894 -6.026810     16551   2141714
+  59  0.988276 -5.949053     18410   2256307
+  60  0.987677 -5.877481     20370   2374706
+  61  0.987040 -5.805040     22598   2504320
+  62  0.986409 -5.736809     24922   2633137
+  63  0.985722 -5.665976     27545   2769513
+  64  0.984754 -5.571791     30918   2910235
+  65  0.984196 -5.520204     33731   3062307
+  66  0.983488 -5.457372     37061   3219655
+  67  0.982464 -5.371037     41332   3379721
+  68  0.981493 -5.293783     45883   3553842
+  69  0.980760 -5.238120     50067   3729245
+  70  0.979824 -5.170088     55141   3915460
+  71  0.978576 -5.084124     61497   4110633
+  72  0.977442 -5.010267     67940   4311273
+  73  0.976205 -4.933858     75111   4516581
+  74  0.975070 -4.867170     82601   4738870
+  75  0.973498 -4.779758     91952   4959796
+  76  0.972181 -4.710423    101197   5197589
+  77  0.970564 -4.629748    112010   5433990
+  78  0.968867 -4.549708    124069   5687479
+  79  0.967072 -4.469723    137321   5948059
+  80  0.965235 -4.392315    151821   6224653
+  81  0.963366 -4.317721    167174   6500317
+  82  0.961203 -4.236045    184907   6783923
+  83  0.958944 -4.155513    204395   7080687
+  84  0.956532 -4.074358    225967   7387440
+  85  0.953933 -3.991869    249995   7704888
+  86  0.951326 -3.913749    275740   8035879
+  87  0.948394 -3.830809    305023   8375601
+  88  0.945222 -3.746334    337189   8713097
+  89  0.941819 -3.661077    372938   9062466
+  90  0.938305 -3.578202    411851   9426366
+  91  0.934352 -3.490566    455850   9791628
+  92  0.930410 -3.408401    503024  10178904
+  93  0.925929 -3.320597    556367  10560709
+  94  0.921357 -3.236445    613795  10955859
+  95  0.916089 -3.145517    679687  11349434
+  96  0.910736 -3.058947    750579  11759530
+  97  0.904996 -2.971870    828441  12170665
+  98  0.898782 -2.883548    915190  12592337
+  99  0.891702 -2.789503   1013962  13006937
+ 100  0.884621 -2.701617   1118352  13432099
+ 101  0.876682 -2.609534   1236340  13854591
+ 102  0.868189 -2.517623   1366614  14284888
+ 103  0.858948 -2.424423   1510378  14705470
+ 104  0.849336 -2.334039   1664750  15123088
+ 105  0.838168 -2.236357   1846528  15555368
+ 106  0.826652 -2.142831   2038365  15965604
+ 107  0.814004 -2.047419   2253419  16376312
+ 108  0.800445 -1.952536   2488453  16774875
+ 109  0.785375 -1.854861   2750725  17148944
+ 110  0.769092 -1.757291   3042690  17529711
+ 111  0.751467 -1.659740   3361845  17882297
+ 112  0.732514 -1.562909   3713802  18230985
+ 113  0.711407 -1.463548   4107307  18547437
+ 114  0.688920 -1.366154   4535014  18845917
+ 115  0.663623 -1.265538   5016372  19104040
+ 116  0.636709 -1.167404   5540218  19347245
+ 117  0.606557 -1.066792   6126542  19540859
+ 118  0.574524 -0.969129   6764386  19720332
+ 119  0.538222 -0.868230   7484190  19839412
+ 120  0.499584 -0.770550   8260200  19922280
+ 121  0.455961 -0.670467   9135344  19944062
+ 122  0.408376 -0.571731  10101679  19926682
+ 123  0.356081 -0.473819  11161428  19840131
+ 124  0.298543 -0.376886  12332166  19695345
+ 125  0.234642 -0.280360  13636091  19485926
+ 126  0.164222 -0.185345  15063279  19193302
+ 127  0.085623 -0.091028  16657157  18826871
+ 128  0.000000  0.000000  18220659  18220659
+ 129 -0.091028  0.085623  18826871  16657157
+ 130 -0.185345  0.164222  19193302  15063279
+ 131 -0.280360  0.234642  19485926  13636091
+ 132 -0.376886  0.298543  19695345  12332166
+ 133 -0.473819  0.356081  19840131  11161428
+ 134 -0.571731  0.408376  19926682  10101679
+ 135 -0.670467  0.455961  19944062   9135344
+ 136 -0.770550  0.499584  19922280   8260200
+ 137 -0.868230  0.538222  19839412   7484190
+ 138 -0.969129  0.574524  19720332   6764386
+ 139 -1.066792  0.606557  19540859   6126542
+ 140 -1.167404  0.636709  19347245   5540218
+ 141 -1.265538  0.663623  19104040   5016372
+ 142 -1.366154  0.688920  18845917   4535014
+ 143 -1.463548  0.711407  18547437   4107307
+ 144 -1.562909  0.732514  18230985   3713802
+ 145 -1.659740  0.751467  17882297   3361845
+ 146 -1.757291  0.769092  17529711   3042690
+ 147 -1.854861  0.785375  17148944   2750725
+ 148 -1.952536  0.800445  16774875   2488453
+ 149 -2.047419  0.814004  16376312   2253419
+ 150 -2.142831  0.826652  15965604   2038365
+ 151 -2.236357  0.838168  15555368   1846528
+ 152 -2.334039  0.849336  15123088   1664750
+ 153 -2.424423  0.858948  14705470   1510378
+ 154 -2.517623  0.868189  14284888   1366614
+ 155 -2.609534  0.876682  13854591   1236340
+ 156 -2.701617  0.884621  13432099   1118352
+ 157 -2.789503  0.891702  13006937   1013962
+ 158 -2.883548  0.898782  12592337    915190
+ 159 -2.971870  0.904996  12170665    828441
+ 160 -3.058947  0.910736  11759530    750579
+ 161 -3.145517  0.916089  11349434    679687
+ 162 -3.236445  0.921357  10955859    613795
+ 163 -3.320597  0.925929  10560709    556367
+ 164 -3.408401  0.930410  10178904    503024
+ 165 -3.490566  0.934352   9791628    455850
+ 166 -3.578202  0.938305   9426366    411851
+ 167 -3.661077  0.941819   9062466    372938
+ 168 -3.746334  0.945222   8713097    337189
+ 169 -3.830809  0.948394   8375601    305023
+ 170 -3.913749  0.951326   8035879    275740
+ 171 -3.991869  0.953933   7704888    249995
+ 172 -4.074358  0.956532   7387440    225967
+ 173 -4.155513  0.958944   7080687    204395
+ 174 -4.236045  0.961203   6783923    184907
+ 175 -4.317721  0.963366   6500317    167174
+ 176 -4.392315  0.965235   6224653    151821
+ 177 -4.469723  0.967072   5948059    137321
+ 178 -4.549708  0.968867   5687479    124069
+ 179 -4.629748  0.970564   5433990    112010
+ 180 -4.710423  0.972181   5197589    101197
+ 181 -4.779758  0.973498   4959796     91952
+ 182 -4.867170  0.975070   4738870     82601
+ 183 -4.933858  0.976205   4516581     75111
+ 184 -5.010267  0.977442   4311273     67940
+ 185 -5.084124  0.978576   4110633     61497
+ 186 -5.170088  0.979824   3915460     55141
+ 187 -5.238120  0.980760   3729245     50067
+ 188 -5.293783  0.981493   3553842     45883
+ 189 -5.371037  0.982464   3379721     41332
+ 190 -5.457372  0.983488   3219655     37061
+ 191 -5.520204  0.984196   3062307     33731
+ 192 -5.571791  0.984754   2910235     30918
+ 193 -5.665976  0.985722   2769513     27545
+ 194 -5.736809  0.986409   2633137     24922
+ 195 -5.805040  0.987040   2504320     22598
+ 196 -5.877481  0.987677   2374706     20370
+ 197 -5.949053  0.988276   2256307     18410
+ 198 -6.026810  0.988894   2141714     16551
+ 199 -6.087690  0.989354   2034638     15069
+ 200 -6.144404  0.989766   1928723     13730
+ 201 -6.210960  0.990229   1827072     12416
+ 202 -6.274652  0.990653   1733491     11268
+ 203 -6.353189  0.991149   1645036     10123
+ 204 -6.397473  0.991418   1558023      9296
+ 205 -6.478642  0.991889   1474742      8315
+ 206 -6.538363  0.992218   1400044      7572
+ 207 -6.605530  0.992573   1325297      6840
+ 208 -6.684972  0.992972   1253265      6120
+ 209 -6.718064  0.993132   1186719      5663
+ 210 -6.766586  0.993360   1124761      5189
+ 211 -6.871611  0.993827   1061770      4553
+ 212 -6.956913  0.994182   1005955      4065
+ 213 -6.946458  0.994139    951247      3872
+ 214 -7.072137  0.994629    900903      3360
+ 215 -7.116529  0.994792    850900      3077
+ 216 -7.190574  0.995053    802414      2756
+ 217 -7.207230  0.995110    757862      2573
+ 218 -7.254162  0.995267    716970      2356
+ 219 -7.412047  0.995758    675857      1990
+ 220 -7.486032  0.995971    639300      1788
+ 221 -7.547523  0.996139    602658      1615
+ 222 -7.563525  0.996182    569023      1508
+ 223 -7.596181  0.996267    539239      1397
+ 224 -7.661639  0.996433    506971      1255
+ 225 -7.697649  0.996521    477568      1153
+ 226 -7.779378  0.996713    451548      1030
+ 227 -7.778638  0.996711    425902       972
+ 228 -7.923845  0.997026    401795       829
+ 229 -8.000114  0.997180    377659       739
+ 230 -8.050694  0.997277    355697       672
+ 231 -8.129858  0.997422    335534       600
+ 232 -8.083947  0.997339    315797       583
+ 233 -8.187819  0.997524    298663       513
+ 234 -8.232006  0.997599    280953       468
+ 235 -8.395662  0.997856    264316       393
+ 236 -8.531781  0.998050    248373       336
+ 237 -8.462070  0.997953    233824       332
+ 238 -8.486456  0.997987    220624       308
+ 239 -8.729231  0.998299    206856       244
+ 240 -8.735070  0.998306    195779       230
+ 241 -8.525905  0.998042    184049       250
+ 242 -8.726394  0.998296    172605       204
+ 243 -8.911383  0.998501    162577       169
+ 244 -8.917674  0.998508    152660       158
+ 245 -8.885104  0.998474    143581       152
+ 246 -9.009508  0.998600    134900       131
+ 247 -8.829258  0.998413    127219       140
+ 248 -9.097175  0.998682    119284       109
+ 249 -9.296916  0.998853    111873        89
+ 250 -9.311898  0.998865    105421        83
+ 251 -9.331062  0.998880     99109        77
+ 252 -9.605819  0.999074     93442        60
+ 253 -9.311896  0.998865     87639        69
+ 254 -9.461832  0.998977     81742        58
+ 255 -9.965784  0.999920   1224389        68

Added: trunk/dmet_20_-2_2.dat
===================================================================
--- trunk/dmet_20_-2_2.dat	2007-09-16 14:32:09 UTC (rev 521)
+++ trunk/dmet_20_-2_2.dat	2007-09-17 19:04:41 UTC (rev 522)
@@ -0,0 +1,256 @@
+   0  0.999775 -9.965784       407   2613306
+   1  0.999977 -9.965784        41   2613306
+   2  0.999547 -9.965784        51    162432
+   3  0.999529 -9.965784        56    171489
+   4  0.999485 -9.965784        65    182122
+   5  0.999501 -9.965784        67    193589
+   6  0.999477 -9.965784        74    204105
+   7  0.999402 -9.965784        90    217038
+   8  0.999453 -9.965784        87    229341
+   9  0.999492 -9.965784        86    244066
+  10  0.999501 -9.965784        89    257143
+  11  0.999424 -9.965784       109    272894
+  12  0.999364 -9.965784       127    288230
+  13  0.999192 -9.803324       171    305406
+  14  0.999320 -9.965784       152    322381
+  15  0.999218 -9.849067       185    341060
+  16  0.999161 -9.748308       210    361019
+  17  0.999234 -9.880247       203    382425
+  18  0.999186 -9.791652       228    403925
+  19  0.999017 -9.520520       291    427159
+  20  0.999141 -9.714003       269    451575
+  21  0.998972 -9.455101       341    478348
+  22  0.999015 -9.516762       344    503643
+  23  0.998926 -9.392387       396    531854
+  24  0.998871 -9.319928       440    561980
+  25  0.998841 -9.282435       477    593596
+  26  0.998777 -9.204896       531    626190
+  27  0.998741 -9.162541       577    660734
+  28  0.998682 -9.096616       638    697924
+  29  0.998583 -8.992901       723    735995
+  30  0.998546 -8.955482       781    774662
+  31  0.998447 -8.860264       881    817982
+  32  0.998390 -8.808584       961    860829
+  33  0.998353 -8.775701      1040    910577
+  34  0.998324 -8.750423      1115    959269
+  35  0.998183 -8.634293      1275   1011986
+  36  0.998082 -8.556207      1417   1065363
+  37  0.998030 -8.517614      1532   1121381
+  38  0.997830 -8.377961      1777   1180543
+  39  0.997751 -8.326403      1935   1240312
+  40  0.997680 -8.281833      2104   1307548
+  41  0.997691 -8.288175      2203   1375113
+  42  0.997460 -8.151021      2549   1446562
+  43  0.997271 -8.047803      2881   1521886
+  44  0.997151 -7.985421      3159   1597987
+  45  0.997040 -7.930634      3454   1681978
+  46  0.996770 -7.804578      3966   1769386
+  47  0.996627 -7.742064      4348   1857366
+  48  0.996470 -7.676753      4775   1949278
+  49  0.996312 -7.613654      5237   2046165
+  50  0.996120 -7.540520      5794   2151609
+  51  0.995876 -7.452477      6462   2257223
+  52  0.995632 -7.369607      7176   2366303
+  53  0.995499 -7.326712      7760   2483688
+  54  0.995172 -7.225562      8725   2602873
+  55  0.994918 -7.151794      9617   2725489
+  56  0.994720 -7.096585     10484   2859253
+  57  0.994418 -7.016479     11595   2990826
+  58  0.994086 -6.933435     12882   3136209
+  59  0.993777 -6.859952     14176   3279152
+  60  0.993412 -6.777942     15720   3434496
+  61  0.992995 -6.689713     17471   3589578
+  62  0.992557 -6.602452     19417   3754116
+  63  0.992167 -6.528955     21383   3927823
+  64  0.991715 -6.448246     23617   4100872
+  65  0.991325 -6.382024     25859   4287568
+  66  0.990777 -6.293890     28711   4476632
+  67  0.990296 -6.220813     31545   4674022
+  68  0.989631 -6.125577     35153   4873641
+  69  0.989121 -6.056472     38474   5082790
+  70  0.988444 -5.969811     42663   5305118
+  71  0.987621 -5.870864     47582   5521442
+  72  0.986931 -5.793049     52309   5748492
+  73  0.986049 -5.699205     58191   5988498
+  74  0.985299 -5.624033     63838   6232847
+  75  0.984434 -5.542029     70385   6488457
+  76  0.983290 -5.440243     78604   6747154
+  77  0.982500 -5.374047     85529   7008498
+  78  0.981203 -5.271523     95464   7279437
+  79  0.980036 -5.185224    105350   7560717
+  80  0.978739 -5.095054    116453   7844127
+  81  0.977369 -5.005641    128669   8138411
+  82  0.975869 -4.913808    142233   8432764
+  83  0.974263 -4.821634    157366   8742783
+  84  0.972692 -4.736915    173007   9053708
+  85  0.970636 -4.633221    192412   9357528
+  86  0.968748 -4.544260    212020   9681833
+  87  0.966467 -4.443788    235332  10007604
+  88  0.964328 -4.355636    258740  10335520
+  89  0.961828 -4.259147    286151  10672480
+  90  0.959049 -4.159150    316908  11006890
+  91  0.956230 -4.064497    349436  11343763
+  92  0.953034 -3.964439    386827  11690253
+  93  0.949594 -3.864162    427641  12027198
+  94  0.945915 -3.764349    472678  12373603
+  95  0.941823 -3.661161    523434  12720324
+  96  0.937562 -3.561297    577407  13054896
+  97  0.932967 -3.461139    637480  13403687
+  98  0.927871 -3.357960    704264  13737232
+  99  0.922363 -3.254514    777821  14068402
+ 100  0.916174 -3.146934    861569  14401489
+ 101  0.909535 -3.040264    952318  14716010
+ 102  0.902379 -2.933960   1052250  15030448
+ 103  0.894577 -2.826896   1162301  15331822
+ 104  0.886060 -2.719015   1284091  15625417
+ 105  0.876640 -2.609063   1420010  15907164
+ 106  0.866374 -2.498795   1569112  16168537
+ 107  0.855085 -2.387340   1734266  16412814
+ 108  0.842582 -2.274083   1918889  16644062
+ 109  0.829326 -2.163947   2116463  16852932
+ 110  0.814008 -2.047455   2344220  17036666
+ 111  0.797827 -1.935008   2588411  17206736
+ 112  0.779996 -1.821767   2858641  17352745
+ 113  0.759882 -1.705347   3162156  17461892
+ 114  0.738177 -1.591034   3488916  17532865
+ 115  0.713560 -1.473314   3860337  17576807
+ 116  0.686997 -1.358191   4264771  17601863
+ 117  0.657131 -1.241079   4712456  17565702
+ 118  0.624319 -1.124952   5207879  17508289
+ 119  0.587350 -1.007186   5760386  17396215
+ 120  0.546781 -0.891169   6363609  17241290
+ 121  0.501358 -0.774837   7034421  17037315
+ 122  0.451380 -0.660515   7766739  16786210
+ 123  0.395144 -0.545979   8588984  16491038
+ 124  0.332501 -0.432833   9493685  16137011
+ 125  0.262677 -0.321392  10492297  15728708
+ 126  0.184876 -0.212099  11591298  15262773
+ 127  0.097767 -0.104877  12808096  14739632
+ 128  0.000000  0.000000  14058876  14058876
+ 129 -0.104877  0.097767  14739632  12808096
+ 130 -0.212099  0.184876  15262773  11591298
+ 131 -0.321392  0.262677  15728708  10492297
+ 132 -0.432833  0.332501  16137011   9493685
+ 133 -0.545979  0.395144  16491038   8588984
+ 134 -0.660515  0.451380  16786210   7766739
+ 135 -0.774837  0.501358  17037315   7034421
+ 136 -0.891169  0.546781  17241290   6363609
+ 137 -1.007186  0.587350  17396215   5760386
+ 138 -1.124952  0.624319  17508289   5207879
+ 139 -1.241079  0.657131  17565702   4712456
+ 140 -1.358191  0.686997  17601863   4264771
+ 141 -1.473314  0.713560  17576807   3860337
+ 142 -1.591034  0.738177  17532865   3488916
+ 143 -1.705347  0.759882  17461892   3162156
+ 144 -1.821767  0.779996  17352745   2858641
+ 145 -1.935008  0.797827  17206736   2588411
+ 146 -2.047455  0.814008  17036666   2344220
+ 147 -2.163947  0.829326  16852932   2116463
+ 148 -2.274083  0.842582  16644062   1918889
+ 149 -2.387340  0.855085  16412814   1734266
+ 150 -2.498795  0.866374  16168537   1569112
+ 151 -2.609063  0.876640  15907164   1420010
+ 152 -2.719015  0.886060  15625417   1284091
+ 153 -2.826896  0.894577  15331822   1162301
+ 154 -2.933960  0.902379  15030448   1052250
+ 155 -3.040264  0.909535  14716010    952318
+ 156 -3.146934  0.916174  14401489    861569
+ 157 -3.254514  0.922363  14068402    777821
+ 158 -3.357960  0.927871  13737232    704264
+ 159 -3.461139  0.932967  13403687    637480
+ 160 -3.561297  0.937562  13054896    577407
+ 161 -3.661161  0.941823  12720324    523434
+ 162 -3.764349  0.945915  12373603    472678
+ 163 -3.864162  0.949594  12027198    427641
+ 164 -3.964439  0.953034  11690253    386827
+ 165 -4.064497  0.956230  11343763    349436
+ 166 -4.159150  0.959049  11006890    316908
+ 167 -4.259147  0.961828  10672480    286151
+ 168 -4.355636  0.964328  10335520    258740
+ 169 -4.443788  0.966467  10007604    235332
+ 170 -4.544260  0.968748   9681833    212020
+ 171 -4.633221  0.970636   9357528    192412
+ 172 -4.736915  0.972692   9053708    173007
+ 173 -4.821634  0.974263   8742783    157366
+ 174 -4.913808  0.975869   8432764    142233
+ 175 -5.005641  0.977369   8138411    128669
+ 176 -5.095054  0.978739   7844127    116453
+ 177 -5.185224  0.980036   7560717    105350
+ 178 -5.271523  0.981203   7279437     95464
+ 179 -5.374047  0.982500   7008498     85529
+ 180 -5.440243  0.983290   6747154     78604
+ 181 -5.542029  0.984434   6488457     70385
+ 182 -5.624033  0.985299   6232847     63838
+ 183 -5.699205  0.986049   5988498     58191
+ 184 -5.793049  0.986931   5748492     52309
+ 185 -5.870864  0.987621   5521442     47582
+ 186 -5.969811  0.988444   5305118     42663
+ 187 -6.056472  0.989121   5082790     38474
+ 188 -6.125577  0.989631   4873641     35153
+ 189 -6.220813  0.990296   4674022     31545
+ 190 -6.293890  0.990777   4476632     28711
+ 191 -6.382024  0.991325   4287568     25859
+ 192 -6.448246  0.991715   4100872     23617
+ 193 -6.528955  0.992167   3927823     21383
+ 194 -6.602452  0.992557   3754116     19417
+ 195 -6.689713  0.992995   3589578     17471
+ 196 -6.777942  0.993412   3434496     15720
+ 197 -6.859952  0.993777   3279152     14176
+ 198 -6.933435  0.994086   3136209     12882
+ 199 -7.016479  0.994418   2990826     11595
+ 200 -7.096585  0.994720   2859253     10484
+ 201 -7.151794  0.994918   2725489      9617
+ 202 -7.225562  0.995172   2602873      8725
+ 203 -7.326712  0.995499   2483688      7760
+ 204 -7.369607  0.995632   2366303      7176
+ 205 -7.452477  0.995876   2257223      6462
+ 206 -7.540520  0.996120   2151609      5794
+ 207 -7.613654  0.996312   2046165      5237
+ 208 -7.676753  0.996470   1949278      4775
+ 209 -7.742064  0.996627   1857366      4348
+ 210 -7.804578  0.996770   1769386      3966
+ 211 -7.930634  0.997040   1681978      3454
+ 212 -7.985421  0.997151   1597987      3159
+ 213 -8.047803  0.997271   1521886      2881
+ 214 -8.151021  0.997460   1446562      2549
+ 215 -8.288175  0.997691   1375113      2203
+ 216 -8.281833  0.997680   1307548      2104
+ 217 -8.326403  0.997751   1240312      1935
+ 218 -8.377961  0.997830   1180543      1777
+ 219 -8.517614  0.998030   1121381      1532
+ 220 -8.556207  0.998082   1065363      1417
+ 221 -8.634293  0.998183   1011986      1275
+ 222 -8.750423  0.998324    959269      1115
+ 223 -8.775701  0.998353    910577      1040
+ 224 -8.808584  0.998390    860829       961
+ 225 -8.860264  0.998447    817982       881
+ 226 -8.955482  0.998546    774662       781
+ 227 -8.992901  0.998583    735995       723
+ 228 -9.096616  0.998682    697924       638
+ 229 -9.162541  0.998741    660734       577
+ 230 -9.204896  0.998777    626190       531
+ 231 -9.282435  0.998841    593596       477
+ 232 -9.319928  0.998871    561980       440
+ 233 -9.392387  0.998926    531854       396
+ 234 -9.516762  0.999015    503643       344
+ 235 -9.455101  0.998972    478348       341
+ 236 -9.714003  0.999141    451575       269
+ 237 -9.520520  0.999017    427159       291
+ 238 -9.791652  0.999186    403925       228
+ 239 -9.880247  0.999234    382425       203
+ 240 -9.748308  0.999161    361019       210
+ 241 -9.849067  0.999218    341060       185
+ 242 -9.965784  0.999320    322381       152
+ 243 -9.803324  0.999192    305406       171
+ 244 -9.965784  0.999364    288230       127
+ 245 -9.965784  0.999424    272894       109
+ 246 -9.965784  0.999501    257143        89
+ 247 -9.965784  0.999492    244066        86
+ 248 -9.965784  0.999453    229341        87
+ 249 -9.965784  0.999402    217038        90
+ 250 -9.965784  0.999477    204105        74
+ 251 -9.965784  0.999501    193589        67
+ 252 -9.965784  0.999485    182122        65
+ 253 -9.965784  0.999529    171489        56
+ 254 -9.965784  0.999547    162432        51
+ 255 -9.965784  0.999977   2613306        41

Added: trunk/dmet_20_-3_2.dat
===================================================================
--- trunk/dmet_20_-3_2.dat	2007-09-16 14:32:09 UTC (rev 521)
+++ trunk/dmet_20_-3_2.dat	2007-09-17 19:04:41 UTC (rev 522)
@@ -0,0 +1,256 @@
+   0  0.999395 -9.965784       518   1234137
+   1  0.999919 -9.965784        69   1234137
+   2  0.998867 -9.315446        65     82762
+   3  0.998814 -9.248816        72     87534
+   4  0.998835 -9.274439        76     94054
+   5  0.998698 -9.114841        90     99706
+   6  0.998623 -9.033463       101    105750
+   7  0.998840 -9.281523        91    113172
+   8  0.998778 -9.205865       102    120366
+   9  0.998554 -8.963099       128    127634
+  10  0.998623 -9.033677       130    136134
+  11  0.998497 -8.907461       150    143907
+  12  0.998367 -8.788099       174    153663
+  13  0.998188 -8.638109       205    163143
+  14  0.998190 -8.639656       218    173675
+  15  0.998067 -8.544526       247    184206
+  16  0.998323 -8.749862       228    196079
+  17  0.998154 -8.611204       267    208553
+  18  0.997907 -8.429964       321    221094
+  19  0.997837 -8.382318       354    235891
+  20  0.997789 -8.351043       385    251038
+  21  0.997602 -8.233912       443    266297
+  22  0.997799 -8.357695       431    282333
+  23  0.997578 -8.219689       502    298798
+  24  0.997541 -8.197926       544    318941
+  25  0.997253 -8.038089       641    336331
+  26  0.997187 -8.003989       699    358180
+  27  0.997030 -7.925554       784    380436
+  28  0.997241 -8.031541       773    403751
+  29  0.996755 -7.798001       963    427673
+  30  0.996972 -7.897804       952    453139
+  31  0.996622 -7.740163      1128    481220
+  32  0.996610 -7.734952      1201    510511
+  33  0.996365 -7.634301      1366    541427
+  34  0.996215 -7.576271      1501    571421
+  35  0.995991 -7.493301      1690    607321
+  36  0.996018 -7.503023      1777    642915
+  37  0.995695 -7.390712      2029    678957
+  38  0.995649 -7.375486      2178    721142
+  39  0.995316 -7.269173      2479    762317
+  40  0.995050 -7.189519      2767    805026
+  41  0.995109 -7.206918      2898    853404
+  42  0.994586 -7.060549      3389    901382
+  43  0.994286 -6.982992      3790    955079
+  44  0.994017 -6.916666      4200   1010653
+  45  0.993847 -6.876345      4564   1067848
+  46  0.993591 -6.817681      5032   1130233
+  47  0.993258 -6.744719      5583   1191875
+  48  0.992899 -6.670152      6214   1259446
+  49  0.992691 -6.628536      6748   1328596
+  50  0.992246 -6.543540      7572   1405104
+  51  0.991932 -6.486294      8316   1482807
+  52  0.991539 -6.417874      9200   1564024
+  53  0.991163 -6.355383     10138   1649996
+  54  0.990729 -6.286496     11217   1739962
+  55  0.990305 -6.222186     12391   1837733
+  56  0.989836 -6.154236     13684   1935499
+  57  0.989374 -6.090316     15086   2040672
+  58  0.988765 -6.010197     16804   2149364
+  59  0.988272 -5.948582     18499   2266467
+  60  0.987629 -5.871810     20547   2385862
+  61  0.987028 -5.803695     22672   2510159
+  62  0.986338 -5.729313     25146   2642905
+  63  0.985874 -5.681301     27351   2779667
+  64  0.985177 -5.612213     30178   2922152
+  65  0.984224 -5.522797     33791   3073333
+  66  0.983548 -5.462585     37035   3229176
+  67  0.982665 -5.387622     41032   3394456
+  68  0.981674 -5.307865     45564   3564197
+  69  0.980699 -5.233578     50357   3738897
+  70  0.979728 -5.163225     55550   3925519
+  71  0.978688 -5.091609     61339   4121718
+  72  0.977507 -5.014398     67953   4324658
+  73  0.976356 -4.942954     74914   4533701
+  74  0.975105 -4.869195     82591   4745066
+  75  0.973620 -4.786363     91869   4978478
+  76  0.972192 -4.711009    101354   5207806
+  77  0.970771 -4.639814    111600   5452789
+  78  0.969060 -4.558589    123709   5706757
+  79  0.967419 -4.484838    136087   5958125
+  80  0.965452 -4.401259    151044   6232247
+  81  0.963451 -4.321025    167072   6511626
+  82  0.961230 -4.237039    185324   6804037
+  83  0.959146 -4.162521    204123   7106692
+  84  0.956963 -4.088526    224340   7408845
+  85  0.954308 -4.003472    248616   7726269
+  86  0.951514 -3.919238    275031   8046818
+  87  0.948647 -3.837774    304014   8389769
+  88  0.945645 -3.757303    335035   8726065
+  89  0.942151 -3.669160    371825   9088280
+  90  0.938614 -3.585294    410637   9446914
+  91  0.934881 -3.501978    453235   9816371
+  92  0.930621 -3.412679    502226  10194429
+  93  0.926302 -3.327688    554476  10579404
+  94  0.921549 -3.239883    612676  10963440
+  95  0.916419 -3.151030    678008  11367344
+  96  0.911112 -3.064845    747894  11768534
+  97  0.905366 -2.977321    826591  12192590
+  98  0.898973 -2.886171    913880  12598855
+  99  0.892149 -2.795246   1010309  13015795
+ 100  0.884828 -2.704108   1117094  13442096
+ 101  0.877017 -2.613290   1233890  13866390
+ 102  0.868626 -2.522206   1362494  14291471
+ 103  0.859256 -2.427421   1507613  14712225
+ 104  0.849446 -2.335032   1665024  15137133
+ 105  0.838641 -2.240346   1841684  15562612
+ 106  0.827097 -2.146322   2033791  15973300
+ 107  0.814316 -2.049691   2248711  16371394
+ 108  0.800382 -1.952109   2487491  16762694
+ 109  0.785767 -1.857303   2746143  17154033
+ 110  0.769720 -1.760914   3035795  17541593
+ 111  0.752107 -1.663149   3352910  17884902
+ 112  0.732812 -1.564370   3707267  18221097
+ 113  0.712001 -1.466237   4094431  18531415
+ 114  0.689370 -1.368027   4524910  18834238
+ 115  0.664210 -1.267777   5002830  19089826
+ 116  0.637233 -1.169238   5527003  19332667
+ 117  0.607304 -1.069179   6110407  19531789
+ 118  0.574326 -0.968552   6759490  19695477
+ 119  0.538762 -0.869664   7464907  19815413
+ 120  0.499845 -0.771180   8245827  19899902
+ 121  0.456283 -0.671170   9117312  19918839
+ 122  0.408854 -0.572674  10071501  19886740
+ 123  0.356829 -0.475151  11133719  19819431
+ 124  0.298940 -0.377520  12301126  19659836
+ 125  0.234680 -0.280415  13604870  19442563
+ 126  0.164571 -0.185791  15027234  19157933
+ 127  0.086839 -0.092403  16604608  18801217
+ 128  0.000000  0.000000  18190010  18190010
+ 129 -0.092403  0.086839  18801217  16604608
+ 130 -0.185791  0.164571  19157933  15027234
+ 131 -0.280415  0.234680  19442563  13604870
+ 132 -0.377520  0.298940  19659836  12301126
+ 133 -0.475151  0.356829  19819431  11133719
+ 134 -0.572674  0.408854  19886740  10071501
+ 135 -0.671170  0.456283  19918839   9117312
+ 136 -0.771180  0.499845  19899902   8245827
+ 137 -0.869664  0.538762  19815413   7464907
+ 138 -0.968552  0.574326  19695477   6759490
+ 139 -1.069179  0.607304  19531789   6110407
+ 140 -1.169238  0.637233  19332667   5527003
+ 141 -1.267777  0.664210  19089826   5002830
+ 142 -1.368027  0.689370  18834238   4524910
+ 143 -1.466237  0.712001  18531415   4094431
+ 144 -1.564370  0.732812  18221097   3707267
+ 145 -1.663149  0.752107  17884902   3352910
+ 146 -1.760914  0.769720  17541593   3035795
+ 147 -1.857303  0.785767  17154033   2746143
+ 148 -1.952109  0.800382  16762694   2487491
+ 149 -2.049691  0.814316  16371394   2248711
+ 150 -2.146322  0.827097  15973300   2033791
+ 151 -2.240346  0.838641  15562612   1841684
+ 152 -2.335032  0.849446  15137133   1665024
+ 153 -2.427421  0.859256  14712225   1507613
+ 154 -2.522206  0.868626  14291471   1362494
+ 155 -2.613290  0.877017  13866390   1233890
+ 156 -2.704108  0.884828  13442096   1117094
+ 157 -2.795246  0.892149  13015795   1010309
+ 158 -2.886171  0.898973  12598855    913880
+ 159 -2.977321  0.905366  12192590    826591
+ 160 -3.064845  0.911112  11768534    747894
+ 161 -3.151030  0.916419  11367344    678008
+ 162 -3.239883  0.921549  10963440    612676
+ 163 -3.327688  0.926302  10579404    554476
+ 164 -3.412679  0.930621  10194429    502226
+ 165 -3.501978  0.934881   9816371    453235
+ 166 -3.585294  0.938614   9446914    410637
+ 167 -3.669160  0.942151   9088280    371825
+ 168 -3.757303  0.945645   8726065    335035
+ 169 -3.837774  0.948647   8389769    304014
+ 170 -3.919238  0.951514   8046818    275031
+ 171 -4.003472  0.954308   7726269    248616
+ 172 -4.088526  0.956963   7408845    224340
+ 173 -4.162521  0.959146   7106692    204123
+ 174 -4.237039  0.961230   6804037    185324
+ 175 -4.321025  0.963451   6511626    167072
+ 176 -4.401259  0.965452   6232247    151044
+ 177 -4.484838  0.967419   5958125    136087
+ 178 -4.558589  0.969060   5706757    123709
+ 179 -4.639814  0.970771   5452789    111600
+ 180 -4.711009  0.972192   5207806    101354
+ 181 -4.786363  0.973620   4978478     91869
+ 182 -4.869195  0.975105   4745066     82591
+ 183 -4.942954  0.976356   4533701     74914
+ 184 -5.014398  0.977507   4324658     67953
+ 185 -5.091609  0.978688   4121718     61339
+ 186 -5.163225  0.979728   3925519     55550
+ 187 -5.233578  0.980699   3738897     50357
+ 188 -5.307865  0.981674   3564197     45564
+ 189 -5.387622  0.982665   3394456     41032
+ 190 -5.462585  0.983548   3229176     37035
+ 191 -5.522797  0.984224   3073333     33791
+ 192 -5.612213  0.985177   2922152     30178
+ 193 -5.681301  0.985874   2779667     27351
+ 194 -5.729313  0.986338   2642905     25146
+ 195 -5.803695  0.987028   2510159     22672
+ 196 -5.871810  0.987629   2385862     20547
+ 197 -5.948582  0.988272   2266467     18499
+ 198 -6.010197  0.988765   2149364     16804
+ 199 -6.090316  0.989374   2040672     15086
+ 200 -6.154236  0.989836   1935499     13684
+ 201 -6.222186  0.990305   1837733     12391
+ 202 -6.286496  0.990729   1739962     11217
+ 203 -6.355383  0.991163   1649996     10138
+ 204 -6.417874  0.991539   1564024      9200
+ 205 -6.486294  0.991932   1482807      8316
+ 206 -6.543540  0.992246   1405104      7572
+ 207 -6.628536  0.992691   1328596      6748
+ 208 -6.670152  0.992899   1259446      6214
+ 209 -6.744719  0.993258   1191875      5583
+ 210 -6.817681  0.993591   1130233      5032
+ 211 -6.876345  0.993847   1067848      4564
+ 212 -6.916666  0.994017   1010653      4200
+ 213 -6.982992  0.994286    955079      3790
+ 214 -7.060549  0.994586    901382      3389
+ 215 -7.206918  0.995109    853404      2898
+ 216 -7.189519  0.995050    805026      2767
+ 217 -7.269173  0.995316    762317      2479
+ 218 -7.375486  0.995649    721142      2178
+ 219 -7.390712  0.995695    678957      2029
+ 220 -7.503023  0.996018    642915      1777
+ 221 -7.493301  0.995991    607321      1690
+ 222 -7.576271  0.996215    571421      1501
+ 223 -7.634301  0.996365    541427      1366
+ 224 -7.734952  0.996610    510511      1201
+ 225 -7.740163  0.996622    481220      1128
+ 226 -7.897804  0.996972    453139       952
+ 227 -7.798001  0.996755    427673       963
+ 228 -8.031541  0.997241    403751       773
+ 229 -7.925554  0.997030    380436       784
+ 230 -8.003989  0.997187    358180       699
+ 231 -8.038089  0.997253    336331       641
+ 232 -8.197926  0.997541    318941       544
+ 233 -8.219689  0.997578    298798       502
+ 234 -8.357695  0.997799    282333       431
+ 235 -8.233912  0.997602    266297       443
+ 236 -8.351043  0.997789    251038       385
+ 237 -8.382318  0.997837    235891       354
+ 238 -8.429964  0.997907    221094       321
+ 239 -8.611204  0.998154    208553       267
+ 240 -8.749862  0.998323    196079       228
+ 241 -8.544526  0.998067    184206       247
+ 242 -8.639656  0.998190    173675       218
+ 243 -8.638109  0.998188    163143       205
+ 244 -8.788099  0.998367    153663       174
+ 245 -8.907461  0.998497    143907       150
+ 246 -9.033677  0.998623    136134       130
+ 247 -8.963099  0.998554    127634       128
+ 248 -9.205865  0.998778    120366       102
+ 249 -9.281523  0.998840    113172        91
+ 250 -9.033463  0.998623    105750       101
+ 251 -9.114841  0.998698     99706        90
+ 252 -9.274439  0.998835     94054        76
+ 253 -9.248816  0.998814     87534        72
+ 254 -9.315446  0.998867     82762        65
+ 255 -9.965784  0.999919   1234137        69

Added: trunk/fano.c
===================================================================
--- trunk/fano.c	2007-09-16 14:32:09 UTC (rev 521)
+++ trunk/fano.c	2007-09-17 19:04:41 UTC (rev 522)
@@ -0,0 +1,267 @@
+/*
+ * Soft decision Fano sequential decoder for K=32 r=1/2 convolutional code
+ * Copyright 1994, Phil Karn, KA9Q
+ */
+#define	LL 1	/* Select Layland-Lushbaugh code */
+
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;math.h&gt;
+#include &quot;fano.h&quot;
+
+struct node {
+	unsigned long encstate;	/* Encoder state of next node */
+	long gamma;		/* Cumulative metric to this node */
+	int metrics[4];		/* Metrics indexed by all possible tx syms */
+	int tm[2];		/* Sorted metrics for current hypotheses */
+	int i;			/* Current branch being tested */
+};
+
+/* Convolutional coding polynomials. All are rate 1/2, K=32 */
+#ifdef	NASA_STANDARD
+/* &quot;NASA standard&quot; code by Massey &amp; Costello
+ * Nonsystematic, quick look-in, dmin=11, dfree=23
+ * used on Pioneer 10-12, Helios A,B
+ */
+#define	POLY1	0xbbef6bb7
+#define	POLY2	0xbbef6bb5
+#endif
+
+#ifdef	MJ
+/* Massey-Johannesson code
+ * Nonsystematic, quick look-in, dmin=13, dfree&gt;=23
+ * Purported to be more computationally efficient than Massey-Costello
+ */
+#define	POLY1	0xb840a20f
+#define POLY2	0xb840a20d
+#endif
+
+#ifdef	LL
+/* Layland-Lushbaugh code
+ * Nonsystematic, non-quick look-in, dmin=?, dfree=?
+ */
+#define	POLY1	0xf2d05351
+#define	POLY2	0xe4613c47
+#endif
+
+/* Convolutional encoder macro. Takes the encoder state, generates
+ * a rate 1/2 symbol pair and stores it in 'sym'. The symbol generated from
+ * POLY1 goes into the 2-bit of sym, and the symbol generated from POLY2
+ * goes into the 1-bit.
+ */
+#define	ENCMAC(sym,encstate){\
+	unsigned long _tmp;\
+\
+	_tmp = (encstate) &amp; POLY1;\
+	_tmp ^= _tmp &gt;&gt; 16;\
+	(sym) = Partab[(_tmp ^ (_tmp &gt;&gt; 8)) &amp; 0xff] &lt;&lt; 1;\
+	_tmp = (encstate) &amp; POLY2;\
+	_tmp ^= _tmp &gt;&gt; 16;\
+	(sym) |= Partab[(_tmp ^ (_tmp &gt;&gt; 8)) &amp; 0xff];\
+}
+
+
+/* Convolutionally encode a packet. The input data bytes are read
+ * high bit first and the encoded packet is written into 'symbols',
+ * one symbol per byte. The first symbol is generated from POLY1,
+ * the second from POLY2.
+ *
+ * Storing only one symbol per byte uses more space, but it is faster
+ * and easier than trying to pack them more compactly.
+ */
+
+#ifdef Win32
+int __stdcall ENCODE(char *data, int *nbytes0,char *symbols)
+#else
+int encode_(char *data, int *nbytes0,char *symbols)
+#endif
+{
+	unsigned long encstate;
+	int sym;
+	int i;
+	unsigned nbytes;
+
+	nbytes=*nbytes0;
+	encstate = 0;
+	while(nbytes-- != 0){
+		for(i=7;i&gt;=0;i--){
+			encstate = (encstate &lt;&lt; 1) | ((*data &gt;&gt; i) &amp; 1);
+			ENCMAC(sym,encstate);
+			*symbols++ = sym &gt;&gt; 1;
+			*symbols++ = sym &amp; 1;
+		}
+		data++;
+	}
+	return 0;
+}
+
+/* Decode packet with the Fano algorithm.
+ * Return 0 on success, -1 on timeout
+ */
+int __stdcall FANO(
+		   //  int fano_(
+unsigned long *metric,	/* Final path metric (returned value) */
+unsigned long *cycles,	/* Cycle count (returned value) */
+unsigned char *data,	/* Decoded output data */
+unsigned char *symbols,	/* Raw deinterleaved input symbols */
+unsigned int *nbits0,	/* Number of output bits */
+int mettab[2][256],	/* Metric table, [sent sym][rx symbol] */
+int *delta0,		/* Threshold adjust parameter */
+unsigned long *maxcycles0)/* Decoding timeout in cycles per bit */
+{
+	struct node *nodes;		/* First node */
+	register struct node *np;	/* Current node */
+	struct node *lastnode;		/* Last node */
+	struct node *tail;		/* First node of tail */
+	long t;				/* Threshold */
+	long m0,m1;
+	long ngamma;
+	unsigned int lsym;
+	unsigned long i;
+
+	unsigned int nbits;
+	int delta;
+	unsigned long maxcycles;
+
+	nbits=*nbits0;
+	delta=*delta0;
+	maxcycles=*maxcycles0;
+
+	if((nodes = (struct node *)malloc(nbits*sizeof(struct node))) == NULL){
+		printf(&quot;alloc failed\n&quot;);
+		return 0;
+	}
+	lastnode = &amp;nodes[nbits-1];
+	tail = &amp;nodes[nbits-31];           /* Was nbits-33 in Karn code */
+
+	/* Compute all possible branch metrics for each symbol pair
+	 * This is the only place we actually look at the raw input symbols
+	 */
+	for(np=nodes;np &lt;= lastnode;np++){
+		np-&gt;metrics[0] = mettab[0][symbols[0]] + mettab[0][symbols[1]];
+		np-&gt;metrics[1] = mettab[0][symbols[0]] + mettab[1][symbols[1]];
+		np-&gt;metrics[2] = mettab[1][symbols[0]] + mettab[0][symbols[1]];
+		np-&gt;metrics[3] = mettab[1][symbols[0]] + mettab[1][symbols[1]];
+		symbols += 2;
+	}
+	np = nodes;
+	np-&gt;encstate = 0;
+
+	/* Compute and sort branch metrics from root node */
+	ENCMAC(lsym,np-&gt;encstate);	/* 0-branch (LSB is 0) */
+	m0 = np-&gt;metrics[lsym];
+
+	/* Now do the 1-branch. To save another ENCMAC call here and
+	 * inside the loop, we assume that both polynomials are odd,
+	 * providing complementary pairs of branch symbols.
+
+	 * This code should be modified if a systematic code were used.
+	 */
+	m1 = np-&gt;metrics[3^lsym];
+	if(m0 &gt; m1){
+		/* 0-branch has better metric */
+		np-&gt;tm[0] = m0;
+		np-&gt;tm[1] = m1;
+	} else {
+		/* 1-branch is better */
+		np-&gt;tm[0] = m1;
+		np-&gt;tm[1] = m0;
+		np-&gt;encstate++;	/* Set low bit */
+	}
+	np-&gt;i = 0;	/* Start with best branch */
+	maxcycles *= nbits;
+	np-&gt;gamma = t = 0;
+
+	/* Start the Fano decoder */
+	for(i=1;i &lt;= maxcycles;i++){
+#ifdef	debug
+		printf(&quot;k=%ld, g=%ld, t=%ld, m[%d]=%d\n&quot;,
+		 np-nodes,np-&gt;gamma,t,np-&gt;i,np-&gt;tm[np-&gt;i]);
+#endif
+		/* Look forward */
+		ngamma = np-&gt;gamma + np-&gt;tm[np-&gt;i];
+		if(ngamma &gt;= t){
+			/* Node is acceptable */
+			if(np-&gt;gamma &lt; t + delta){
+				/* First time we've visited this node;
+				 * Tighten threshold.
+				 *
+				 * This loop could be replaced with
+				 *   t += delta * ((ngamma - t)/delta);
+				 * but the multiply and divide are slower.
+				 */
+				while(ngamma &gt;= t + delta)
+					t += delta;
+			}
+			/* Move forward */
+			np[1].gamma = ngamma;
+			np[1].encstate = np-&gt;encstate &lt;&lt; 1;
+			if(++np == lastnode)
+				break;	/* Done! */
+
+			/* Compute and sort metrics, starting with the 
+			 * zero branch
+			 */
+			ENCMAC(lsym,np-&gt;encstate);
+			if(np &gt;= tail){
+				/* The tail must be all zeroes, so don't even
+				 * bother computing the 1-branches there.
+				 */
+				np-&gt;tm[0] = np-&gt;metrics[lsym];
+			} else {
+				m0 = np-&gt;metrics[lsym];
+				m1 = np-&gt;metrics[3^lsym];
+				if(m0 &gt; m1){
+					/* 0-branch is better */
+					np-&gt;tm[0] = m0;
+					np-&gt;tm[1] = m1;
+				} else {
+					/* 1-branch is better */
+					np-&gt;tm[0] = m1;
+					np-&gt;tm[1] = m0;
+					np-&gt;encstate++;	/* Set low bit */
+				}
+			}
+			np-&gt;i = 0;	/* Start with best branch */
+			continue;
+		}
+		/* Threshold violated, can't go forward */
+		for(;;){
+			/* Look backward */
+			if(np == nodes || np[-1].gamma &lt; t){
+				/* Can't back up either.
+				 * Relax threshold and and look
+				 * forward again to better branch.
+				 */
+				t -= delta;
+				if(np-&gt;i != 0){
+					np-&gt;i = 0;
+					np-&gt;encstate ^= 1;
+				}
+				break;
+			}
+			/* Back up */
+			if(--np &lt; tail &amp;&amp; np-&gt;i != 1){
+				/* Search next best branch */
+				np-&gt;i++;
+				np-&gt;encstate ^= 1;
+				break;
+			} /* else keep looking back */
+		}
+	}
+	*metric =  np-&gt;gamma;	/* Return final path metric */
+
+	/* Copy decoded data to user's buffer */
+	nbits &gt;&gt;= 3;
+	np = &amp;nodes[7];
+	while(nbits-- != 0){
+		*data++ = np-&gt;encstate;
+		np += 8;
+	}
+
+	free(nodes);
+	*cycles = i+1;
+	if(i &gt;= maxcycles)
+		return -1;	/* Decoder timed out */
+	return 0;		/* Successful completion */
+}

Added: trunk/gen24.f
===================================================================
--- trunk/gen24.f	2007-09-16 14:32:09 UTC (rev 521)
+++ trunk/gen24.f	2007-09-17 19:04:41 UTC (rev 522)
@@ -0,0 +1,98 @@
+      subroutine gen24(message,mode,samfac,ntxdf,iwave,nwave,
+     +    sendingsh,msgsent,nmsg)
+
+C  Encodes a JT2 or JT4 message into a wavefile.
+
+      parameter (NMAX=60*11025)     !Max length of wave file
+      character*22 message          !Message to be generated
+      character*22 msgsent          !Message as it will be received
+      character*3 cok               !'   ' or 'OOO'
+      character*6 mode
+      real*8 t,dt,phi,f,f0,dfgen,dphi,twopi,samfac,tsymbol
+      integer*2 iwave(NMAX)         !Generated wave file
+      integer sendingsh
+      integer dgen(13)
+      integer*1 data0(13),symbol(208)
+      logical first
+      include 'prcom2.f'
+      data twopi/6.283185307d0/,first/.true./
+      save
+
+      mode4=10
+      nsym=207                               !Symbols per transmission
+      if(first) then
+         do i=1,nsym
+            pr2(i)=2*npr2(i)-1
+         enddo
+         first=.false.
+      endif
+
+      call chkmsg(message,cok,nspecial,flip)
+      call packmsg(message,dgen)  !Pack 72-bit message into 12 six-bit symbols
+      call entail(dgen,data0)
+      nbytes=(72+31+7)/8
+      call encode(dgen,nbytes,symbol)        !Convolutional encoding
+      sendingsh=0
+      if(iand(dgen(10),8).ne.0) sendingsh=-1 !Plain text flag
+C###      call interleave63(sent,1) !Apply interleaving
+      tsymbol=2520.d0/11025.d0
+
+C  Set up necessary constants
+      dt=1.0/(samfac*11025.0)
+      f0=118*11025.d0/1024 + ntxdf
+      dfgen=11025.0/2520                     !4.375 Hz
+      t=0.d0
+      phi=0.d0
+      j0=0
+      ndata=(nsym*11025.d0*samfac*tsymbol)/2
+      ndata=2*ndata
+      if(mode(1:3).eq.'JT2') then
+         do i=1,ndata
+            t=t+dt
+            j=int(t/tsymbol) + 1                  !Symbol number, 1-207
+            if(j.ne.j0) then
+               f=f0 + npr2(j)*dfgen
+               if(flip.lt.0.0) f=f0 + (1-npr2(j))*dfgen
+               dphi=twopi*dt*f
+               sig=1.0
+               if(symbol(j).gt.0) sig=-1.0
+               j0=j
+            endif
+            phi=phi+dphi
+            iwave(i)=32767.0*sin(phi)*sig
+         enddo
+      else
+         do i=1,ndata
+            t=t+dt
+            j=int(t/tsymbol) + 1                  !Symbol number, 1-207
+            if(j.ne.j0) then
+               f=f0 + (npr2(j) + 2*symbol(j)) * dfgen * mode4
+               if(flip.lt.0.0) f=f0 + ((1-npr2(j)) + 2*symbol(j))*dfgen
+               dphi=twopi*dt*f
+               j0=j
+            endif
+            phi=phi+dphi
+            iwave(i)=32767.0*sin(phi)
+         enddo
+      endif
+
+      do j=1,5512                !Put another 0.5 sec of silence at end
+         i=i+1
+         iwave(i)=0
+      enddo
+      nwave=i
+      call unpackmsg(dgen,msgsent)
+      if(flip.lt.0.0) then
+         do i=22,1,-1
+            if(msgsent(i:i).ne.' ') goto 10
+         enddo
+ 10      msgsent=msgsent(1:i)//' OOO'
+      endif
+      do i=22,1,-1
+         if(msgsent(i:i).ne.' ') goto 20
+      enddo
+ 20   nmsg=i
+
+      return
+      end
+

Added: trunk/genmet.f
===================================================================
--- trunk/genmet.f	2007-09-16 14:32:09 UTC (rev 521)
+++ trunk/genmet.f	2007-09-17 19:04:41 UTC (rev 522)
@@ -0,0 +1,35 @@
+      subroutine genmet(mode,mettab)
+
+C  Generate metric table for a soft-decision convolutional decoder.
+C  Assumes gaussian noise on a BPSK channel.  Works from first principles
+C  by evaluating the normal probability function and then computing
+C  the log-likelihood for every possible received sysmol value.
+C  Symbols are offset binary, with 128 corresponding to an erased symbol.
+
+C  Original C version by Phil Karn, KA9Q.
+
+      character*6 mode
+      real bias                         !bias for integer table
+      integer scale                     !scale factor for integer table
+      integer mettab(0:255,0:1)         !Metric table (RxSymbol,TxSymbol)
+
+      bias=-0.5
+      if(mode(1:3).eq.'JT2') then
+C  DBPSK
+         open(19,file='dmet_20_-2_2.dat',status='old')
+         scale=20
+      else if(mode(1:3).eq.'JT4') then
+C  Nocoherent 2FSK
+         open(19,file='dmet_10_-1_3.dat',status='old')
+         scale=10
+      endif
+
+      do i=0,255
+         read(19,*) junk,d0,d1
+         mettab(i,0)=nint(scale*(d0-bias))
+         mettab(i,1)=nint(scale*(d1-bias))
+      enddo
+
+      return
+      end
+

Added: trunk/prcom2.f
===================================================================
--- trunk/prcom2.f	2007-09-16 14:32:09 UTC (rev 521)
+++ trunk/prcom2.f	2007-09-17 19:04:41 UTC (rev 522)
@@ -0,0 +1,9 @@
+      common/prcom2/ npr2(207),pr2(207)
+      data npr2/
+     +  0,0,0,0,1,1,0,0,0,1,1,0,1,1,0,0,1,0,1,0,0,0,0,0,0,0,1,1,0,0,
+     +  0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1,1,0,1,0,0,0,
+     +  1,0,0,1,0,0,1,1,1,1,1,0,0,0,1,0,1,0,0,0,1,1,1,1,0,1,1,0,0,1,
+     +  0,0,0,1,1,0,1,0,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,0,1,1,0,1,0,1,
+     +  0,1,1,1,0,0,1,0,1,1,0,1,1,1,1,0,0,0,0,1,1,0,1,1,0,0,0,1,1,1,
+     +  0,1,1,1,0,1,1,1,0,0,1,0,0,0,1,1,0,1,1,0,0,1,0,0,0,1,1,1,1,1,
+     +  1,0,0,1,1,0,0,0,0,1,1,0,0,0,1,0,1,1,0,1,1,1,1,0,1,0,1/

Added: trunk/tab.c
===================================================================
--- trunk/tab.c	2007-09-16 14:32:09 UTC (rev 521)
+++ trunk/tab.c	2007-09-17 19:04:41 UTC (rev 522)
@@ -0,0 +1,36 @@
+/* 8-bit parity lookup table, generated by partab.c */
+unsigned char Partab[] = {
+ 0, 1, 1, 0, 1, 0, 0, 1,
+ 1, 0, 0, 1, 0, 1, 1, 0,
+ 1, 0, 0, 1, 0, 1, 1, 0,
+ 0, 1, 1, 0, 1, 0, 0, 1,
+ 1, 0, 0, 1, 0, 1, 1, 0,
+ 0, 1, 1, 0, 1, 0, 0, 1,
+ 0, 1, 1, 0, 1, 0, 0, 1,
+ 1, 0, 0, 1, 0, 1, 1, 0,
+ 1, 0, 0, 1, 0, 1, 1, 0,
+ 0, 1, 1, 0, 1, 0, 0, 1,
+ 0, 1, 1, 0, 1, 0, 0, 1,
+ 1, 0, 0, 1, 0, 1, 1, 0,
+ 0, 1, 1, 0, 1, 0, 0, 1,
+ 1, 0, 0, 1, 0, 1, 1, 0,
+ 1, 0, 0, 1, 0, 1, 1, 0,
+ 0, 1, 1, 0, 1, 0, 0, 1,
+ 1, 0, 0, 1, 0, 1, 1, 0,
+ 0, 1, 1, 0, 1, 0, 0, 1,
+ 0, 1, 1, 0, 1, 0, 0, 1,
+ 1, 0, 0, 1, 0, 1, 1, 0,
+ 0, 1, 1, 0, 1, 0, 0, 1,
+ 1, 0, 0, 1, 0, 1, 1, 0,
+ 1, 0, 0, 1, 0, 1, 1, 0,
+ 0, 1, 1, 0, 1, 0, 0, 1,
+ 0, 1, 1, 0, 1, 0, 0, 1,
+ 1, 0, 0, 1, 0, 1, 1, 0,
+ 1, 0, 0, 1, 0, 1, 1, 0,
+ 0, 1, 1, 0, 1, 0, 0, 1,
+ 1, 0, 0, 1, 0, 1, 1, 0,
+ 0, 1, 1, 0, 1, 0, 0, 1,
+ 0, 1, 1, 0, 1, 0, 0, 1,
+ 1, 0, 0, 1, 0, 1, 1, 0,
+};
+

Modified: trunk/wsjt.py
===================================================================
--- trunk/wsjt.py	2007-09-16 14:32:09 UTC (rev 521)
+++ trunk/wsjt.py	2007-09-17 19:04:41 UTC (rev 522)
@@ -188,7 +188,8 @@
     if textheight &lt;= 9:
         textheight=21
     else:
-        if mode.get()[:4]=='JT65':
+        if mode.get()[:4]=='JT65' or mode.get()[:3]=='JT2' or \
+               mode.get()[:3]=='JT4':
             textheight=7
         else:
             textheight=9
@@ -232,7 +233,8 @@
 
 #------------------------------------------------------ dbl_click3_text
 def dbl_click3_text(event):
-    if mode.get()[:4]=='JT65':
+    if mode.get()[:4]=='JT65' or mode.get()[:3]=='JT2' or \
+               mode.get()[:3]=='JT4':
         t=text.get('1.0',END)           #Entire contents of text box
         t1=text.get('1.0',CURRENT)      #Contents from start to mouse pointer
         n=t1.rfind(&quot;\n&quot;)
@@ -668,6 +670,18 @@
         GenStdMsgs()
         erase()
 
+#------------------------------------------------------ ModeJT2
+def ModeJT2():
+    global slabel,isync,isync65,textheight,itol
+    ModeJT65()
+    mode.set(&quot;JT2&quot;)
+
+#------------------------------------------------------ ModeJT4
+def ModeJT4():
+    global slabel,isync,isync65,textheight,itol
+    ModeJT65()
+    mode.set(&quot;JT4&quot;)
+
 #------------------------------------------------------ ModeEcho
 #def ModeEcho(event=NONE):
 #    mode.set(&quot;Echo&quot;)
@@ -885,7 +899,8 @@
         labHotAB.configure(text=&quot;&quot;,bg='gray85')
         labDist.configure(text=&quot;&quot;)
     else:
-        if mode.get()[:4]==&quot;JT65&quot; or mode.get()[:2]==&quot;CW&quot;:
+        if mode.get()[:4]=='JT65' or mode.get()[:3]=='JT2' or \
+               mode.get()[:3]=='JT4' or mode.get()[:2]==&quot;CW&quot;:
             labAz.configure(text=&quot;Az: %d&quot; % (naz,))
             labHotAB.configure(text=&quot;&quot;,bg='gray85')
         else:
@@ -991,7 +1006,9 @@
 #------------------------------------------------------ erase
 def erase(event=NONE):
     graph1.delete(ALL)
-    if mode.get()[:4]!=&quot;JT65&quot; and mode.get()[:2]!=&quot;CW&quot;: graph2.delete(ALL)
+    if mode.get()[:4]!=&quot;JT65&quot; and mode.get()[:2]!=&quot;CW&quot; and \
+            mode.get()[:3]!='JT2' and mode.get()[:3]!='JT4':
+        graph2.delete(ALL)
     text.configure(state=NORMAL)
     text.delete('1.0',END)
     text.configure(state=DISABLED)
@@ -1079,7 +1096,8 @@
 #----------------------------------------------------- dtdf_change
 # Readout of graphical cursor location
 def dtdf_change(event):
-    if mode.get()[:4]!=&quot;JT65&quot;:
+    if mode.get()[:4]!='JT65' and mode.get()[:3]!='JT2' and \
+               mode.get()[:3]!='JT4':
         t=&quot;%.1f&quot; % (event.x*30.0/500.0,)
         lab6.configure(text=t,bg='green')
     else:
@@ -1102,7 +1120,8 @@
 def mouse_click_g1(event):
     global nopen
     if not nopen:
-        if mode.get()[:4]==&quot;JT65&quot;:
+        if mode.get()[:4]=='JT65' or mode.get()[:3]=='JT2' or \
+               mode.get()[:3]=='JT4':
             Audio.gcom2.mousedf=int(Audio.gcom2.idf+(event.x-250)*2.4)
         else:
             if Audio.gcom2.ndecoding==0:              #If decoder is busy, ignore
@@ -1117,7 +1136,8 @@
 
 #------------------------------------------------------ double-click_g1
 def double_click_g1(event):
-    if g.mode[:4]=='JT65' and Audio.gcom2.ndecoding==0:
+    if (mode.get()[:4]=='JT65' or mode.get()[:3]=='JT2' or \
+        mode.get()[:3]=='JT4') and Audio.gcom2.ndecoding==0:
         g.freeze_decode=1
     
 #------------------------------------------------------ mouse_up_g1
@@ -1157,7 +1177,8 @@
         tx4.insert(0,setmsg(options.tx4.get(),r))
         tx5.insert(0,setmsg(options.tx5.get(),r))
         tx6.insert(0,setmsg(options.tx6.get(),r))
-    elif mode.get()[:4]==&quot;JT65&quot;:
+    elif mode.get()[:4]=='JT65' or mode.get()[:3]=='JT2' or \
+               mode.get()[:3]=='JT4':
         if ToRadio.get().find(&quot;/&quot;) == -1 and \
                options.MyCall.get().find(&quot;/&quot;) == -1:
             t=ToRadio.get() + &quot; &quot;+options.MyCall.get() + &quot; &quot;+options.MyGrid.get()[:4]
@@ -1187,7 +1208,8 @@
     ToRadio.insert(0,t)
     if k2txb.get()!=0: ntx.set(1)
     Audio.gcom2.hiscall=(ToRadio.get()+'            ')[:12]
-    if mode.get()[:4]==&quot;JT65&quot; and ToRadio.get().find(&quot;/&quot;) == -1 and \
+    if (mode.get()[:4]=='JT65' or mode.get()[:3]=='JT2' or \
+        mode.get()[:3]=='JT4') and ToRadio.get().find(&quot;/&quot;) == -1 and \
                options.MyCall.get().find(&quot;/&quot;) == -1:
         for m in (tx1, tx2, tx3, tx4, tx5, tx6):
             m.delete(0,99)
@@ -1417,7 +1439,8 @@
             Audio.gcom2.ntx2=0
             if ntx.get()==1 and noshjt65.get()==1: Audio.gcom2.ntx2=1
 
-        if mode.get()[:4]=='JT65' or mode.get()[:2]=='CW' :
+        if mode.get()[:4]=='JT65' or mode.get()[:3]=='JT2' or \
+               mode.get()[:3]=='JT4' or mode.get()[:2]=='CW':
             graph2.delete(ALL)
             graph2.create_text(80,13,anchor=CENTER,text=&quot;Moon&quot;,font=g2font)
             graph2.create_text(13,37,anchor=W, text=&quot;Az: %6.2f&quot; % g.AzMoon,font=g2font)
@@ -1425,7 +1448,8 @@
             graph2.create_text(13,85,anchor=W, text=&quot;Dop:%6d&quot; % g.ndop,font=g2font)
             graph2.create_text(13,109,anchor=W,text=&quot;Dgrd:%5.1f&quot; % g.Dgrd,font=g2font)
 
-    if g.freeze_decode and mode.get()[:4]=='JT65':
+    if (mode.get()[:4]=='JT65' or mode.get()[:3]=='JT2' or \
+        mode.get()[:3]=='JT4') and g.freeze_decode:
         itol=2
         ltol.configure(text='Tol    '+str(50))
         Audio.gcom2.dftolerance=50
@@ -1460,6 +1484,10 @@
             msg2.configure(bg='#FF00FF')
         elif mode.get()==&quot;CW&quot;:
             msg2.configure(bg='#00FF00')
+        elif mode.get()==&quot;JT2&quot;:
+            msg2.configure(bg='#8888FF')
+        elif mode.get()==&quot;JT4&quot;:
+            msg2.configure(bg='#88FF88')
 #        elif mode.get()==&quot;Echo&quot;:
 #            msg2.configure(bg='#FF0000')
         g.mode=mode.get()
@@ -1734,6 +1762,8 @@
                          accelerator='Ctrl+F8')
 modemenu.add_radiobutton(label = 'CW', variable=mode, command = ModeCW, \
                          accelerator='Shift+Ctrl+F8')
+modemenu.add_radiobutton(label = 'JT2', variable=mode, command = ModeJT2)
+modemenu.add_radiobutton(label = 'JT4', variable=mode, command = ModeJT4)
 #modemenu.add_radiobutton(label = 'Echo', variable=mode, command = ModeEcho,
 #                         state=DISABLED)
 
@@ -2179,6 +2209,10 @@
                 ModeJT6M()
             elif value=='CW':
                 ModeCW()
+            elif value=='JT2':
+                ModeJT2()
+            elif value=='JT4':
+                ModeJT4()
         elif key == 'MyCall': options.MyCall.set(value)
         elif key == 'MyGrid': options.MyGrid.set(value)
         elif key == 'HisCall':

Modified: trunk/wsjtgen.F90
===================================================================
--- trunk/wsjtgen.F90	2007-09-16 14:32:09 UTC (rev 521)
+++ trunk/wsjtgen.F90	2007-09-17 19:04:41 UTC (rev 522)
@@ -117,12 +117,18 @@
   dt=1.d0/fsample_out
   LTone=2
 
-  if(mode(1:4).eq.'JT65') then
+  if(mode(1:4).eq.'JT65' .or. mode(1:3).eq.'JT2' .or. mode(1:3).eq.'JT4') then
+     if(mode(1:4).eq.'JT65') then
 !  We're in JT65 mode.
-     if(mode(5:5).eq.'A') mode65=1
-     if(mode(5:5).eq.'B') mode65=2
-     if(mode(5:5).eq.'C') mode65=4
-     call gen65(msg,mode65,samfacout,ntxdf,iwave,nwave,sendingsh,msgsent,nmsg0)
+        if(mode(5:5).eq.'A') mode65=1
+        if(mode(5:5).eq.'B') mode65=2
+        if(mode(5:5).eq.'C') mode65=4
+        call gen65(msg,mode65,samfacout,ntxdf,iwave,nwave,sendingsh,   &amp;
+             msgsent,nmsg0)
+     else
+        call gen24(msg,mode,samfacout,ntxdf,iwave,nwave,sendingsh,     &amp;
+             msgsent,nmsg0)
+     endif
 
      if(lcwid) then
 !  Generate and insert the CW ID.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000206.html">[WSJT-SVN] r521 - trunk
</A></li>
	<LI>Next message: <A HREF="000207.html">[WSJT-SVN] r523 - trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#209">[ date ]</a>
              <a href="thread.html#209">[ thread ]</a>
              <a href="subject.html#209">[ subject ]</a>
              <a href="author.html#209">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/wsjt-svn">More information about the wsjt-svn
mailing list</a><br>
</body></html>
