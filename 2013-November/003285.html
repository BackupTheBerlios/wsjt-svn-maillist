<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [WSJT-SVN] r3592 - branches/map65
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/wsjt-svn/2013-November/index.html" >
   <LINK REL="made" HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20r3592%20-%20branches/map65&In-Reply-To=%3C20131103193001.4F22D55B0C%40scm.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003284.html">
   <LINK REL="Next"  HREF="003286.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[WSJT-SVN] r3592 - branches/map65</H1>
    <B>k1jt at scm.berlios.de</B> 
    <A HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20r3592%20-%20branches/map65&In-Reply-To=%3C20131103193001.4F22D55B0C%40scm.berlios.de%3E"
       TITLE="[WSJT-SVN] r3592 - branches/map65">k1jt at scm.berlios.de
       </A><BR>
    <I>Sun Nov  3 20:30:01 CET 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="003284.html">[WSJT-SVN] r3591 - branches/map65
</A></li>
        <LI>Next message: <A HREF="003286.html">[WSJT-SVN] r3593 - branches/map65
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3285">[ date ]</a>
              <a href="thread.html#3285">[ thread ]</a>
              <a href="subject.html#3285">[ subject ]</a>
              <a href="author.html#3285">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: k1jt
Date: 2013-11-03 20:30:00 +0100 (Sun, 03 Nov 2013)
New Revision: 3592

Modified:
   branches/map65/devsetup.ui
   branches/map65/plotter.cpp
   branches/map65/plotter.h
   branches/map65/widegraph.cpp
   branches/map65/widegraph.h
   branches/map65/widegraph.ui
Log:
More progress toward support of IQ+ XT.


Modified: branches/map65/devsetup.ui
===================================================================
--- branches/map65/devsetup.ui	2013-11-02 20:52:10 UTC (rev 3591)
+++ branches/map65/devsetup.ui	2013-11-03 19:30:00 UTC (rev 3592)
@@ -17,7 +17,7 @@
    &lt;item&gt;
     &lt;widget class=&quot;QTabWidget&quot; name=&quot;ioTabWidget&quot;&gt;
      &lt;property name=&quot;currentIndex&quot;&gt;
-      &lt;number&gt;2&lt;/number&gt;
+      &lt;number&gt;0&lt;/number&gt;
      &lt;/property&gt;
      &lt;widget class=&quot;QWidget&quot; name=&quot;tab&quot;&gt;
       &lt;attribute name=&quot;title&quot;&gt;
@@ -948,249 +948,6 @@
        &lt;/layout&gt;
       &lt;/widget&gt;
      &lt;/widget&gt;
-     &lt;widget class=&quot;QWidget&quot; name=&quot;tab_3&quot;&gt;
-      &lt;attribute name=&quot;title&quot;&gt;
-       &lt;string&gt;Si570&lt;/string&gt;
-      &lt;/attribute&gt;
-      &lt;widget class=&quot;QWidget&quot; name=&quot;&quot;&gt;
-       &lt;property name=&quot;geometry&quot;&gt;
-        &lt;rect&gt;
-         &lt;x&gt;40&lt;/x&gt;
-         &lt;y&gt;40&lt;/y&gt;
-         &lt;width&gt;272&lt;/width&gt;
-         &lt;height&gt;220&lt;/height&gt;
-        &lt;/rect&gt;
-       &lt;/property&gt;
-       &lt;layout class=&quot;QVBoxLayout&quot; name=&quot;verticalLayout_9&quot;&gt;
-        &lt;item&gt;
-         &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;horizontalLayout_19&quot;&gt;
-          &lt;item&gt;
-           &lt;widget class=&quot;QLabel&quot; name=&quot;label_24&quot;&gt;
-            &lt;property name=&quot;text&quot;&gt;
-             &lt;string&gt;LO Selection:&lt;/string&gt;
-            &lt;/property&gt;
-           &lt;/widget&gt;
-          &lt;/item&gt;
-          &lt;item&gt;
-           &lt;widget class=&quot;QRadioButton&quot; name=&quot;rbSi570&quot;&gt;
-            &lt;property name=&quot;text&quot;&gt;
-             &lt;string&gt;IQ+, Generic Si570&lt;/string&gt;
-            &lt;/property&gt;
-            &lt;property name=&quot;checked&quot;&gt;
-             &lt;bool&gt;true&lt;/bool&gt;
-            &lt;/property&gt;
-           &lt;/widget&gt;
-          &lt;/item&gt;
-          &lt;item&gt;
-           &lt;widget class=&quot;QRadioButton&quot; name=&quot;rbIQXT&quot;&gt;
-            &lt;property name=&quot;text&quot;&gt;
-             &lt;string&gt;IQ+  Rx/XT&lt;/string&gt;
-            &lt;/property&gt;
-            &lt;property name=&quot;checked&quot;&gt;
-             &lt;bool&gt;false&lt;/bool&gt;
-            &lt;/property&gt;
-           &lt;/widget&gt;
-          &lt;/item&gt;
-         &lt;/layout&gt;
-        &lt;/item&gt;
-        &lt;item&gt;
-         &lt;spacer name=&quot;verticalSpacer_4&quot;&gt;
-          &lt;property name=&quot;orientation&quot;&gt;
-           &lt;enum&gt;Qt::Vertical&lt;/enum&gt;
-          &lt;/property&gt;
-          &lt;property name=&quot;sizeType&quot;&gt;
-           &lt;enum&gt;QSizePolicy::Fixed&lt;/enum&gt;
-          &lt;/property&gt;
-          &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
-           &lt;size&gt;
-            &lt;width&gt;20&lt;/width&gt;
-            &lt;height&gt;40&lt;/height&gt;
-           &lt;/size&gt;
-          &lt;/property&gt;
-         &lt;/spacer&gt;
-        &lt;/item&gt;
-        &lt;item&gt;
-         &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;horizontalLayout_9&quot;&gt;
-          &lt;item&gt;
-           &lt;widget class=&quot;QLabel&quot; name=&quot;label_12&quot;&gt;
-            &lt;property name=&quot;text&quot;&gt;
-             &lt;string&gt;Rx frequency multiplier:&lt;/string&gt;
-            &lt;/property&gt;
-           &lt;/widget&gt;
-          &lt;/item&gt;
-          &lt;item&gt;
-           &lt;spacer name=&quot;horizontalSpacer_12&quot;&gt;
-            &lt;property name=&quot;orientation&quot;&gt;
-             &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
-            &lt;/property&gt;
-            &lt;property name=&quot;sizeType&quot;&gt;
-             &lt;enum&gt;QSizePolicy::Preferred&lt;/enum&gt;
-            &lt;/property&gt;
-            &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
-             &lt;size&gt;
-              &lt;width&gt;47&lt;/width&gt;
-              &lt;height&gt;20&lt;/height&gt;
-             &lt;/size&gt;
-            &lt;/property&gt;
-           &lt;/spacer&gt;
-          &lt;/item&gt;
-          &lt;item&gt;
-           &lt;widget class=&quot;QSpinBox&quot; name=&quot;mult570SpinBox&quot;&gt;
-            &lt;property name=&quot;sizePolicy&quot;&gt;
-             &lt;sizepolicy hsizetype=&quot;Fixed&quot; vsizetype=&quot;Fixed&quot;&gt;
-              &lt;horstretch&gt;0&lt;/horstretch&gt;
-              &lt;verstretch&gt;0&lt;/verstretch&gt;
-             &lt;/sizepolicy&gt;
-            &lt;/property&gt;
-            &lt;property name=&quot;minimumSize&quot;&gt;
-             &lt;size&gt;
-              &lt;width&gt;80&lt;/width&gt;
-              &lt;height&gt;0&lt;/height&gt;
-             &lt;/size&gt;
-            &lt;/property&gt;
-            &lt;property name=&quot;minimum&quot;&gt;
-             &lt;number&gt;1&lt;/number&gt;
-            &lt;/property&gt;
-            &lt;property name=&quot;maximum&quot;&gt;
-             &lt;number&gt;8&lt;/number&gt;
-            &lt;/property&gt;
-            &lt;property name=&quot;value&quot;&gt;
-             &lt;number&gt;2&lt;/number&gt;
-            &lt;/property&gt;
-           &lt;/widget&gt;
-          &lt;/item&gt;
-         &lt;/layout&gt;
-        &lt;/item&gt;
-        &lt;item&gt;
-         &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;horizontalLayout_20&quot;&gt;
-          &lt;item&gt;
-           &lt;widget class=&quot;QLabel&quot; name=&quot;label_25&quot;&gt;
-            &lt;property name=&quot;enabled&quot;&gt;
-             &lt;bool&gt;false&lt;/bool&gt;
-            &lt;/property&gt;
-            &lt;property name=&quot;text&quot;&gt;
-             &lt;string&gt;Tx frequency multiplier:&lt;/string&gt;
-            &lt;/property&gt;
-           &lt;/widget&gt;
-          &lt;/item&gt;
-          &lt;item&gt;
-           &lt;spacer name=&quot;horizontalSpacer_21&quot;&gt;
-            &lt;property name=&quot;orientation&quot;&gt;
-             &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
-            &lt;/property&gt;
-            &lt;property name=&quot;sizeType&quot;&gt;
-             &lt;enum&gt;QSizePolicy::Preferred&lt;/enum&gt;
-            &lt;/property&gt;
-            &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
-             &lt;size&gt;
-              &lt;width&gt;47&lt;/width&gt;
-              &lt;height&gt;20&lt;/height&gt;
-             &lt;/size&gt;
-            &lt;/property&gt;
-           &lt;/spacer&gt;
-          &lt;/item&gt;
-          &lt;item&gt;
-           &lt;widget class=&quot;QSpinBox&quot; name=&quot;mult570TxSpinBox&quot;&gt;
-            &lt;property name=&quot;enabled&quot;&gt;
-             &lt;bool&gt;false&lt;/bool&gt;
-            &lt;/property&gt;
-            &lt;property name=&quot;sizePolicy&quot;&gt;
-             &lt;sizepolicy hsizetype=&quot;Fixed&quot; vsizetype=&quot;Fixed&quot;&gt;
-              &lt;horstretch&gt;0&lt;/horstretch&gt;
-              &lt;verstretch&gt;0&lt;/verstretch&gt;
-             &lt;/sizepolicy&gt;
-            &lt;/property&gt;
-            &lt;property name=&quot;minimumSize&quot;&gt;
-             &lt;size&gt;
-              &lt;width&gt;80&lt;/width&gt;
-              &lt;height&gt;0&lt;/height&gt;
-             &lt;/size&gt;
-            &lt;/property&gt;
-            &lt;property name=&quot;value&quot;&gt;
-             &lt;number&gt;1&lt;/number&gt;
-            &lt;/property&gt;
-           &lt;/widget&gt;
-          &lt;/item&gt;
-         &lt;/layout&gt;
-        &lt;/item&gt;
-        &lt;item&gt;
-         &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;horizontalLayout_10&quot;&gt;
-          &lt;item&gt;
-           &lt;widget class=&quot;QLabel&quot; name=&quot;label_13&quot;&gt;
-            &lt;property name=&quot;text&quot;&gt;
-             &lt;string&gt;Frequency correction (ppm):&lt;/string&gt;
-            &lt;/property&gt;
-           &lt;/widget&gt;
-          &lt;/item&gt;
-          &lt;item&gt;
-           &lt;spacer name=&quot;horizontalSpacer_13&quot;&gt;
-            &lt;property name=&quot;orientation&quot;&gt;
-             &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
-            &lt;/property&gt;
-            &lt;property name=&quot;sizeType&quot;&gt;
-             &lt;enum&gt;QSizePolicy::Preferred&lt;/enum&gt;
-            &lt;/property&gt;
-            &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
-             &lt;size&gt;
-              &lt;width&gt;10&lt;/width&gt;
-              &lt;height&gt;20&lt;/height&gt;
-             &lt;/size&gt;
-            &lt;/property&gt;
-           &lt;/spacer&gt;
-          &lt;/item&gt;
-          &lt;item&gt;
-           &lt;widget class=&quot;QDoubleSpinBox&quot; name=&quot;cal570SpinBox&quot;&gt;
-            &lt;property name=&quot;sizePolicy&quot;&gt;
-             &lt;sizepolicy hsizetype=&quot;Fixed&quot; vsizetype=&quot;Fixed&quot;&gt;
-              &lt;horstretch&gt;0&lt;/horstretch&gt;
-              &lt;verstretch&gt;0&lt;/verstretch&gt;
-             &lt;/sizepolicy&gt;
-            &lt;/property&gt;
-            &lt;property name=&quot;minimumSize&quot;&gt;
-             &lt;size&gt;
-              &lt;width&gt;80&lt;/width&gt;
-              &lt;height&gt;0&lt;/height&gt;
-             &lt;/size&gt;
-            &lt;/property&gt;
-            &lt;property name=&quot;decimals&quot;&gt;
-             &lt;number&gt;3&lt;/number&gt;
-            &lt;/property&gt;
-            &lt;property name=&quot;minimum&quot;&gt;
-             &lt;double&gt;-200.000000000000000&lt;/double&gt;
-            &lt;/property&gt;
-            &lt;property name=&quot;maximum&quot;&gt;
-             &lt;double&gt;200.000000000000000&lt;/double&gt;
-            &lt;/property&gt;
-           &lt;/widget&gt;
-          &lt;/item&gt;
-         &lt;/layout&gt;
-        &lt;/item&gt;
-        &lt;item&gt;
-         &lt;spacer name=&quot;verticalSpacer_5&quot;&gt;
-          &lt;property name=&quot;orientation&quot;&gt;
-           &lt;enum&gt;Qt::Vertical&lt;/enum&gt;
-          &lt;/property&gt;
-          &lt;property name=&quot;sizeType&quot;&gt;
-           &lt;enum&gt;QSizePolicy::Fixed&lt;/enum&gt;
-          &lt;/property&gt;
-          &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
-           &lt;size&gt;
-            &lt;width&gt;20&lt;/width&gt;
-            &lt;height&gt;40&lt;/height&gt;
-           &lt;/size&gt;
-          &lt;/property&gt;
-         &lt;/spacer&gt;
-        &lt;/item&gt;
-        &lt;item&gt;
-         &lt;widget class=&quot;QCheckBox&quot; name=&quot;cbInitIQplus&quot;&gt;
-          &lt;property name=&quot;text&quot;&gt;
-           &lt;string&gt;Initialize IQ+  on startup&lt;/string&gt;
-          &lt;/property&gt;
-         &lt;/widget&gt;
-        &lt;/item&gt;
-       &lt;/layout&gt;
-      &lt;/widget&gt;
-     &lt;/widget&gt;
      &lt;widget class=&quot;QWidget&quot; name=&quot;tab_4&quot;&gt;
       &lt;attribute name=&quot;title&quot;&gt;
        &lt;string&gt;Colors&lt;/string&gt;
@@ -1700,6 +1457,249 @@
        &lt;/layout&gt;
       &lt;/widget&gt;
      &lt;/widget&gt;
+     &lt;widget class=&quot;QWidget&quot; name=&quot;tab_3&quot;&gt;
+      &lt;attribute name=&quot;title&quot;&gt;
+       &lt;string&gt;Si570 Control&lt;/string&gt;
+      &lt;/attribute&gt;
+      &lt;widget class=&quot;QWidget&quot; name=&quot;&quot;&gt;
+       &lt;property name=&quot;geometry&quot;&gt;
+        &lt;rect&gt;
+         &lt;x&gt;40&lt;/x&gt;
+         &lt;y&gt;40&lt;/y&gt;
+         &lt;width&gt;272&lt;/width&gt;
+         &lt;height&gt;220&lt;/height&gt;
+        &lt;/rect&gt;
+       &lt;/property&gt;
+       &lt;layout class=&quot;QVBoxLayout&quot; name=&quot;verticalLayout_9&quot;&gt;
+        &lt;item&gt;
+         &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;horizontalLayout_19&quot;&gt;
+          &lt;item&gt;
+           &lt;widget class=&quot;QLabel&quot; name=&quot;label_24&quot;&gt;
+            &lt;property name=&quot;text&quot;&gt;
+             &lt;string&gt;LO Selection:&lt;/string&gt;
+            &lt;/property&gt;
+           &lt;/widget&gt;
+          &lt;/item&gt;
+          &lt;item&gt;
+           &lt;widget class=&quot;QRadioButton&quot; name=&quot;rbSi570&quot;&gt;
+            &lt;property name=&quot;text&quot;&gt;
+             &lt;string&gt;IQ+, Generic Si570&lt;/string&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;checked&quot;&gt;
+             &lt;bool&gt;true&lt;/bool&gt;
+            &lt;/property&gt;
+           &lt;/widget&gt;
+          &lt;/item&gt;
+          &lt;item&gt;
+           &lt;widget class=&quot;QRadioButton&quot; name=&quot;rbIQXT&quot;&gt;
+            &lt;property name=&quot;text&quot;&gt;
+             &lt;string&gt;IQ+  Rx/XT&lt;/string&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;checked&quot;&gt;
+             &lt;bool&gt;false&lt;/bool&gt;
+            &lt;/property&gt;
+           &lt;/widget&gt;
+          &lt;/item&gt;
+         &lt;/layout&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;spacer name=&quot;verticalSpacer_4&quot;&gt;
+          &lt;property name=&quot;orientation&quot;&gt;
+           &lt;enum&gt;Qt::Vertical&lt;/enum&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;sizeType&quot;&gt;
+           &lt;enum&gt;QSizePolicy::Fixed&lt;/enum&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;20&lt;/width&gt;
+            &lt;height&gt;40&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+         &lt;/spacer&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;horizontalLayout_9&quot;&gt;
+          &lt;item&gt;
+           &lt;widget class=&quot;QLabel&quot; name=&quot;label_12&quot;&gt;
+            &lt;property name=&quot;text&quot;&gt;
+             &lt;string&gt;Rx frequency multiplier:&lt;/string&gt;
+            &lt;/property&gt;
+           &lt;/widget&gt;
+          &lt;/item&gt;
+          &lt;item&gt;
+           &lt;spacer name=&quot;horizontalSpacer_12&quot;&gt;
+            &lt;property name=&quot;orientation&quot;&gt;
+             &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;sizeType&quot;&gt;
+             &lt;enum&gt;QSizePolicy::Preferred&lt;/enum&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+             &lt;size&gt;
+              &lt;width&gt;47&lt;/width&gt;
+              &lt;height&gt;20&lt;/height&gt;
+             &lt;/size&gt;
+            &lt;/property&gt;
+           &lt;/spacer&gt;
+          &lt;/item&gt;
+          &lt;item&gt;
+           &lt;widget class=&quot;QSpinBox&quot; name=&quot;mult570SpinBox&quot;&gt;
+            &lt;property name=&quot;sizePolicy&quot;&gt;
+             &lt;sizepolicy hsizetype=&quot;Fixed&quot; vsizetype=&quot;Fixed&quot;&gt;
+              &lt;horstretch&gt;0&lt;/horstretch&gt;
+              &lt;verstretch&gt;0&lt;/verstretch&gt;
+             &lt;/sizepolicy&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;minimumSize&quot;&gt;
+             &lt;size&gt;
+              &lt;width&gt;80&lt;/width&gt;
+              &lt;height&gt;0&lt;/height&gt;
+             &lt;/size&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;minimum&quot;&gt;
+             &lt;number&gt;1&lt;/number&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;maximum&quot;&gt;
+             &lt;number&gt;8&lt;/number&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;value&quot;&gt;
+             &lt;number&gt;2&lt;/number&gt;
+            &lt;/property&gt;
+           &lt;/widget&gt;
+          &lt;/item&gt;
+         &lt;/layout&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;horizontalLayout_20&quot;&gt;
+          &lt;item&gt;
+           &lt;widget class=&quot;QLabel&quot; name=&quot;label_25&quot;&gt;
+            &lt;property name=&quot;enabled&quot;&gt;
+             &lt;bool&gt;false&lt;/bool&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;text&quot;&gt;
+             &lt;string&gt;Tx frequency multiplier:&lt;/string&gt;
+            &lt;/property&gt;
+           &lt;/widget&gt;
+          &lt;/item&gt;
+          &lt;item&gt;
+           &lt;spacer name=&quot;horizontalSpacer_21&quot;&gt;
+            &lt;property name=&quot;orientation&quot;&gt;
+             &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;sizeType&quot;&gt;
+             &lt;enum&gt;QSizePolicy::Preferred&lt;/enum&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+             &lt;size&gt;
+              &lt;width&gt;47&lt;/width&gt;
+              &lt;height&gt;20&lt;/height&gt;
+             &lt;/size&gt;
+            &lt;/property&gt;
+           &lt;/spacer&gt;
+          &lt;/item&gt;
+          &lt;item&gt;
+           &lt;widget class=&quot;QSpinBox&quot; name=&quot;mult570TxSpinBox&quot;&gt;
+            &lt;property name=&quot;enabled&quot;&gt;
+             &lt;bool&gt;false&lt;/bool&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;sizePolicy&quot;&gt;
+             &lt;sizepolicy hsizetype=&quot;Fixed&quot; vsizetype=&quot;Fixed&quot;&gt;
+              &lt;horstretch&gt;0&lt;/horstretch&gt;
+              &lt;verstretch&gt;0&lt;/verstretch&gt;
+             &lt;/sizepolicy&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;minimumSize&quot;&gt;
+             &lt;size&gt;
+              &lt;width&gt;80&lt;/width&gt;
+              &lt;height&gt;0&lt;/height&gt;
+             &lt;/size&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;value&quot;&gt;
+             &lt;number&gt;1&lt;/number&gt;
+            &lt;/property&gt;
+           &lt;/widget&gt;
+          &lt;/item&gt;
+         &lt;/layout&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;horizontalLayout_10&quot;&gt;
+          &lt;item&gt;
+           &lt;widget class=&quot;QLabel&quot; name=&quot;label_13&quot;&gt;
+            &lt;property name=&quot;text&quot;&gt;
+             &lt;string&gt;Frequency correction (ppm):&lt;/string&gt;
+            &lt;/property&gt;
+           &lt;/widget&gt;
+          &lt;/item&gt;
+          &lt;item&gt;
+           &lt;spacer name=&quot;horizontalSpacer_13&quot;&gt;
+            &lt;property name=&quot;orientation&quot;&gt;
+             &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;sizeType&quot;&gt;
+             &lt;enum&gt;QSizePolicy::Preferred&lt;/enum&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+             &lt;size&gt;
+              &lt;width&gt;10&lt;/width&gt;
+              &lt;height&gt;20&lt;/height&gt;
+             &lt;/size&gt;
+            &lt;/property&gt;
+           &lt;/spacer&gt;
+          &lt;/item&gt;
+          &lt;item&gt;
+           &lt;widget class=&quot;QDoubleSpinBox&quot; name=&quot;cal570SpinBox&quot;&gt;
+            &lt;property name=&quot;sizePolicy&quot;&gt;
+             &lt;sizepolicy hsizetype=&quot;Fixed&quot; vsizetype=&quot;Fixed&quot;&gt;
+              &lt;horstretch&gt;0&lt;/horstretch&gt;
+              &lt;verstretch&gt;0&lt;/verstretch&gt;
+             &lt;/sizepolicy&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;minimumSize&quot;&gt;
+             &lt;size&gt;
+              &lt;width&gt;80&lt;/width&gt;
+              &lt;height&gt;0&lt;/height&gt;
+             &lt;/size&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;decimals&quot;&gt;
+             &lt;number&gt;3&lt;/number&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;minimum&quot;&gt;
+             &lt;double&gt;-200.000000000000000&lt;/double&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;maximum&quot;&gt;
+             &lt;double&gt;200.000000000000000&lt;/double&gt;
+            &lt;/property&gt;
+           &lt;/widget&gt;
+          &lt;/item&gt;
+         &lt;/layout&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;spacer name=&quot;verticalSpacer_5&quot;&gt;
+          &lt;property name=&quot;orientation&quot;&gt;
+           &lt;enum&gt;Qt::Vertical&lt;/enum&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;sizeType&quot;&gt;
+           &lt;enum&gt;QSizePolicy::Fixed&lt;/enum&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;20&lt;/width&gt;
+            &lt;height&gt;40&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+         &lt;/spacer&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;widget class=&quot;QCheckBox&quot; name=&quot;cbInitIQplus&quot;&gt;
+          &lt;property name=&quot;text&quot;&gt;
+           &lt;string&gt;Initialize IQ+  on startup&lt;/string&gt;
+          &lt;/property&gt;
+         &lt;/widget&gt;
+        &lt;/item&gt;
+       &lt;/layout&gt;
+      &lt;/widget&gt;
+     &lt;/widget&gt;
     &lt;/widget&gt;
    &lt;/item&gt;
    &lt;item&gt;

Modified: branches/map65/plotter.cpp
===================================================================
--- branches/map65/plotter.cpp	2013-11-02 20:52:10 UTC (rev 3591)
+++ branches/map65/plotter.cpp	2013-11-03 19:30:00 UTC (rev 3592)
@@ -32,6 +32,7 @@
   m_line = 0;
   m_fSample = 96000;
   m_paintAllZoom = false;
+  m_TxDF=0;
 }
 
 CPlotter::~CPlotter() { }                                      // Destructor
@@ -317,6 +318,10 @@
     painter0.setPen(pen0);
     x = XfromFreq(float(fQSO()));
     painter0.drawLine(x,15,x,30);
+    QPen pen3(Qt::red, 3);                  //Mark Tx freq (kHz) with red tick
+    painter0.setPen(pen3);
+    x = XfromFreq(float(m_TXkHz));
+    painter0.drawLine(x,0,x,15);
   }
 
   // Now make the zoomed scale, using m_ZoomScalePixmap and painter3
@@ -352,7 +357,7 @@
 
   df=m_fSample/32768.0;
   x = (m_DF + m_mode65*66*11025.0/4096.0 - m_ZoomStartFreq)/df;
-  QPen pen2(Qt::red, 3);            //Mark top JT65B tone with red tick
+  QPen pen2(Qt::darkGreen, 3);      //Mark top JT65B tone with dark Green tick
   painter3.setPen(pen2);
   painter3.drawLine(x,15,x,30);
   x = (m_DF - m_ZoomStartFreq)/df;
@@ -367,6 +372,12 @@
   int x2=(m_DF + m_tol - m_ZoomStartFreq)/df;
   pen1.setWidth(6);
   painter3.drawLine(x1,28,x2,28);
+
+  pen1.setWidth(3);
+  pen1.setColor(Qt::red);                  //Mark Tx DF with red tick
+  painter3.setPen(pen1);
+  x = (m_TxDF - m_ZoomStartFreq)/df;
+  painter3.drawLine(x,0,x,15);
 }
 
 void CPlotter::MakeFrequencyStrs()                       //MakeFrequencyStrs
@@ -549,16 +560,30 @@
   int y=event-&gt;y();
   int button=event-&gt;button();
   if(y &lt; h+30) {                                      // Wideband waterfall
-    if(button==1) setFQSO(x,false);
+    if(button==1) {
+      setFQSO(x,false);
+      if(m_bLockTxRx) m_TXkHz=m_fQSO;
+      qDebug() &lt;&lt; &quot;c&quot; &lt;&lt; m_bLockTxRx &lt;&lt; m_fQSO &lt;&lt; m_TXkHz;
+    }
+    if(button==2 and !m_bLockTxRx) {
+      if(x&lt;0) x=0;      // x is pixel number
+      if(x&gt;m_Size.width()) x=m_Size.width();
+      m_TXkHz = int(FreqfromX(x)+0.5);
+      m_TXfreq = floor(datcom_.fcenter) + 0.001*m_TXkHz;
+      setTxFreq(m_TXfreq);
+    }
   } else {                                            // Zoomed waterfall
     if(button==1) m_DF=int(m_ZoomStartFreq + x*m_fSample/32768.0);
-    DrawOverlay();
-    update();
+    if(button==2 and !m_bLockTxRx) m_TxDF=int(m_ZoomStartFreq + x*m_fSample/32768.0);
+    if(m_bLockTxRx) m_TxDF=m_DF;
   }
+  DrawOverlay();
+  update();
 }
 
 void CPlotter::mouseDoubleClickEvent(QMouseEvent *event)  //mouse2click
 {
+  if(event-&gt;button()!=1) return;       //Act only on left double-click
   int h = (m_Size.height()-60)/2;
   int x=event-&gt;x();
   int y=event-&gt;y();
@@ -715,3 +740,20 @@
 {
   return m_fGreen;
 }
+
+void CPlotter::setTxFreq(double dfreq)
+{
+  qDebug() &lt;&lt; &quot;SetTxFreq()&quot; &lt;&lt; dfreq;
+}
+
+void CPlotter::setLockTxRx(bool b)
+{
+  m_bLockTxRx=b;
+  if(m_bLockTxRx) {
+    m_TXkHz=m_fQSO;
+    m_TXfreq=floor(m_TXfreq) + 0.001*m_TXkHz;
+    m_TxDF=m_DF;
+    DrawOverlay();                         //Redraw scales and ticks
+    update();                              //trigger a new paintEvent}
+  }
+}

Modified: branches/map65/plotter.h
===================================================================
--- branches/map65/plotter.h	2013-11-02 20:52:10 UTC (rev 3591)
+++ branches/map65/plotter.h	2013-11-03 19:30:00 UTC (rev 3592)
@@ -56,7 +56,7 @@
   void setBinsPerPixel(int n);
   int  binsPerPixel();
   void setFQSO(int n, bool bf);
-//  void setTxFreq(int)
+  void setTxFreq(double dfreq);
   void setFcal(int n);
   void setNkhz(int n);
   void DrawOverlay();
@@ -68,6 +68,7 @@
   void setMode65(int n);
   void set2Dspec(bool b);
   double fGreen();
+  void setLockTxRx(bool b);
 
 signals:
   void freezeDecode0(int n);
@@ -99,8 +100,10 @@
   bool    m_paintEventBusy;
   bool    m_2Dspec;
   bool    m_paintAllZoom;
+  bool    m_bLockTxRx;
   double  m_CenterFreq;
   double  m_fGreen;
+  double  m_TXfreq;
   qint64  m_StartFreq;
   qint64  m_ZoomStartFreq;
   qint64  m_FreqOffset;
@@ -119,6 +122,8 @@
   qint32  m_mode65;
   qint32  m_i0;
   qint32  m_xClick;
+  qint32  m_TXkHz;
+  qint32  m_TxDF;
 
 private slots:
   void mousePressEvent(QMouseEvent *event);

Modified: branches/map65/widegraph.cpp
===================================================================
--- branches/map65/widegraph.cpp	2013-11-02 20:52:10 UTC (rev 3591)
+++ branches/map65/widegraph.cpp	2013-11-03 19:30:00 UTC (rev 3592)
@@ -40,7 +40,10 @@
   m_bForceCenterFreq=settings.value(&quot;ForceCenterFreqBool&quot;,false).toBool();
   m_dForceCenterFreq=settings.value(&quot;ForceCenterFreqMHz&quot;,144.125).toDouble();
   ui-&gt;cbFcenter-&gt;setChecked(m_bForceCenterFreq);
+  ui-&gt;cbLockTxRx-&gt;setChecked(m_bLockTxRx);
   ui-&gt;fCenterLineEdit-&gt;setText(QString::number(m_dForceCenterFreq));
+  m_bLockTxRx=settings.value(&quot;LockTxRx&quot;,false).toBool();
+  ui-&gt;cbLockTxRx-&gt;setChecked(m_bLockTxRx);
   settings.endGroup();
 }
 
@@ -67,6 +70,7 @@
   settings.setValue(&quot;FreqOffset&quot;,ui-&gt;widePlot-&gt;freqOffset());
   settings.setValue(&quot;ForceCenterFreqBool&quot;,m_bForceCenterFreq);
   settings.setValue(&quot;ForceCenterFreqMHz&quot;,m_dForceCenterFreq);
+  settings.setValue(&quot;LockTxRx&quot;,m_bLockTxRx);
   settings.endGroup();
 }
 
@@ -321,3 +325,9 @@
 {
   m_TRperiod=n;
 }
+
+void WideGraph::on_cbLockTxRx_stateChanged(int n)
+{
+  m_bLockTxRx = (n!=0);
+  ui-&gt;widePlot-&gt;setLockTxRx(m_bLockTxRx);
+}

Modified: branches/map65/widegraph.h
===================================================================
--- branches/map65/widegraph.h	2013-11-02 20:52:10 UTC (rev 3591)
+++ branches/map65/widegraph.h	2013-11-03 19:30:00 UTC (rev 3592)
@@ -15,6 +15,7 @@
   ~WideGraph();
 
   bool   m_bForceCenterFreq;
+  bool   m_bLockTxRx;
   qint32 m_mult570;
   qint32 m_mult570Tx;
   double m_dForceCenterFreq;
@@ -63,6 +64,8 @@
   void on_pbSetRxHardware_clicked();
   void on_cbSpec2d_toggled(bool checked);
 
+  void on_cbLockTxRx_stateChanged(int arg1);
+
 private:
   qint32 m_waterfallAvg;
   qint32 m_fCal;

Modified: branches/map65/widegraph.ui
===================================================================
--- branches/map65/widegraph.ui	2013-11-02 20:52:10 UTC (rev 3591)
+++ branches/map65/widegraph.ui	2013-11-03 19:30:00 UTC (rev 3592)
@@ -348,6 +348,29 @@
         &lt;/widget&gt;
        &lt;/item&gt;
        &lt;item&gt;
+        &lt;spacer name=&quot;horizontalSpacer_9&quot;&gt;
+         &lt;property name=&quot;orientation&quot;&gt;
+          &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+         &lt;/property&gt;
+         &lt;property name=&quot;sizeType&quot;&gt;
+          &lt;enum&gt;QSizePolicy::Preferred&lt;/enum&gt;
+         &lt;/property&gt;
+         &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+          &lt;size&gt;
+           &lt;width&gt;20&lt;/width&gt;
+           &lt;height&gt;20&lt;/height&gt;
+          &lt;/size&gt;
+         &lt;/property&gt;
+        &lt;/spacer&gt;
+       &lt;/item&gt;
+       &lt;item&gt;
+        &lt;widget class=&quot;QCheckBox&quot; name=&quot;cbLockTxRx&quot;&gt;
+         &lt;property name=&quot;text&quot;&gt;
+          &lt;string&gt;Lock Tx=Rx Freq&lt;/string&gt;
+         &lt;/property&gt;
+        &lt;/widget&gt;
+       &lt;/item&gt;
+       &lt;item&gt;
         &lt;spacer name=&quot;horizontalSpacer_5&quot;&gt;
          &lt;property name=&quot;orientation&quot;&gt;
           &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003284.html">[WSJT-SVN] r3591 - branches/map65
</A></li>
	<LI>Next message: <A HREF="003286.html">[WSJT-SVN] r3593 - branches/map65
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3285">[ date ]</a>
              <a href="thread.html#3285">[ thread ]</a>
              <a href="subject.html#3285">[ subject ]</a>
              <a href="author.html#3285">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/wsjt-svn">More information about the wsjt-svn
mailing list</a><br>
</body></html>
