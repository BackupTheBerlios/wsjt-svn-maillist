<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [WSJT-SVN] r1228 - branches/wspr
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/wsjt-svn/2009-May/index.html" >
   <LINK REL="made" HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20r1228%20-%20branches/wspr&In-Reply-To=%3C200905162353.n4GNr1iZ020362%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000921.html">
   <LINK REL="Next"  HREF="000923.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[WSJT-SVN] r1228 - branches/wspr</H1>
    <B>va3db at BerliOS</B> 
    <A HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20r1228%20-%20branches/wspr&In-Reply-To=%3C200905162353.n4GNr1iZ020362%40sheep.berlios.de%3E"
       TITLE="[WSJT-SVN] r1228 - branches/wspr">va3db at mail.berlios.de
       </A><BR>
    <I>Sun May 17 01:53:01 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000921.html">[WSJT-SVN] r1227 - trunk
</A></li>
        <LI>Next message: <A HREF="000923.html">[WSJT-SVN] r1229 - branches/wspr
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#922">[ date ]</a>
              <a href="thread.html#922">[ thread ]</a>
              <a href="subject.html#922">[ subject ]</a>
              <a href="author.html#922">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: va3db
Date: 2009-05-17 01:53:00 +0200 (Sun, 17 May 2009)
New Revision: 1228

Modified:
   branches/wspr/aclocal.m4
   branches/wspr/configure
Log:
- Move fixes from wsjt/aclocal.m4 to wspr and regenerate configure.



Modified: branches/wspr/aclocal.m4
===================================================================
--- branches/wspr/aclocal.m4	2009-05-16 23:52:03 UTC (rev 1227)
+++ branches/wspr/aclocal.m4	2009-05-16 23:53:00 UTC (rev 1228)
@@ -14,12 +14,22 @@
 dnl I'll add a test to confirm this is a gfortran later -db
 dnl
 
+FCV=&quot;&quot;
+
 if test -n $[{FC}] ; then
-	gfortran=$[{FC}]
+	gfortran_name_part=`echo $[{FC}] | cut -c 1-8`
+	if test $[{gfortran_name_part}] = &quot;gfortran&quot; ; then
+		gfortran_name=$[{FC}]
+       		FC_LIB_PATH=`$[{FC}] -print-file-name=`
+		g95=no
+		gfortran=yes
+		FFLAGS=&quot;$[{FFLAGS_GFORTRAN}]&quot;
+		FCV=&quot;gnu95&quot;
+	else
+		unset $[{FC}]
+	fi
 fi
 
-FCV=&quot;&quot;
-
 dnl
 dnl Note regarding the apparent silliness with FCV.
 dnl The FCV value for g95 might be system dependent, this is
@@ -41,8 +51,8 @@
 dnl Pick up current gfortran from ports infrastructure for fbsd
 dnl
         FreeBSD*)
-		if test -z $[{gfortran}] ; then
-			gfortran=`grep FC: /usr/ports/Mk/bsd.gcc.mk | head -1 |awk '{print $[2]}'`
+		if test -z $[{gfortran_name}] ; then
+			gfortran_name=`grep FC: /usr/ports/Mk/bsd.gcc.mk | head -1 |awk '{print $[2]}'`
 		fi
 		FCV_G95=&quot;g95&quot;
 	;;
@@ -56,12 +66,12 @@
 dnl look for gfortran if nothing else was given
 dnl
 
-if test -z $[gfortran] ; then
-	gfortran=&quot;gfortran&quot;
+if test -z $[gfortran_name] ; then
+	gfortran_name=&quot;gfortran&quot;
 fi
 
 AC_PATH_PROG(G95, g95)
-AC_PATH_PROG(GFORTRAN, $[{gfortran}])
+AC_PATH_PROG(GFORTRAN, $[{gfortran_name}])
 
 if test ! -z $[{GFORTRAN}] ; then
 	echo &quot;*** gfortran compiler found at $[{GFORTRAN}]&quot;

Modified: branches/wspr/configure
===================================================================
--- branches/wspr/configure	2009-05-16 23:52:03 UTC (rev 1227)
+++ branches/wspr/configure	2009-05-16 23:53:00 UTC (rev 1228)
@@ -2,7 +2,7 @@
 # Guess values for system-dependent variables and create Makefiles.
 # Generated by GNU Autoconf 2.62 for wspr 1.11.
 #
-# $Id: configure.ac 1187 2009-04-30 19:01:33Z va3db $
+# $Id: configure.ac 1223 2009-05-16 22:39:58Z va3db $
 #
 # Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
 # 2002, 2003, 2004, 2005, 2006, 2007, 2008 Free Software Foundation, Inc.
@@ -1454,7 +1454,7 @@
 This configure script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it.
 
-$Id: configure.ac 1187 2009-04-30 19:01:33Z va3db $
+$Id: configure.ac 1223 2009-05-16 22:39:58Z va3db $
 _ACEOF
   exit
 fi
@@ -3066,8 +3066,20 @@
 
 
 
+FCV=&quot;&quot;
+
 if test -n ${FC} ; then
-	gfortran=${FC}
+	gfortran_name_part=`echo ${FC} | cut -c 1-8`
+	if test ${gfortran_name_part} = &quot;gfortran&quot; ; then
+		gfortran_name=${FC}
+       		FC_LIB_PATH=`${FC} -print-file-name=`
+		g95=no
+		gfortran=yes
+		FFLAGS=&quot;${FFLAGS_GFORTRAN}&quot;
+		FCV=&quot;gnu95&quot;
+	else
+		unset ${FC}
+	fi
 fi
 
 
@@ -3089,8 +3101,8 @@
 
 	;;
         FreeBSD*)
-		if test -z ${gfortran} ; then
-			gfortran=`grep FC: /usr/ports/Mk/bsd.gcc.mk | head -1 |awk '{print $2}'`
+		if test -z ${gfortran_name} ; then
+			gfortran_name=`grep FC: /usr/ports/Mk/bsd.gcc.mk | head -1 |awk '{print $2}'`
 		fi
 		FCV_G95=&quot;g95&quot;
 	;;
@@ -3102,8 +3114,8 @@
 esac
 
 
-if test -z $gfortran ; then
-	gfortran=&quot;gfortran&quot;
+if test -z $gfortran_name ; then
+	gfortran_name=&quot;gfortran&quot;
 fi
 
 # Extract the first word of &quot;g95&quot;, so it can be a program name with args.
@@ -3146,8 +3158,8 @@
 fi
 
 
-# Extract the first word of &quot;${gfortran}&quot;, so it can be a program name with args.
-set dummy ${gfortran}; ac_word=$2
+# Extract the first word of &quot;${gfortran_name}&quot;, so it can be a program name with args.
+set dummy ${gfortran_name}; ac_word=$2
 { $as_echo &quot;$as_me:$LINENO: checking for $ac_word&quot; &gt;&amp;5
 $as_echo_n &quot;checking for $ac_word... &quot; &gt;&amp;6; }
 if test &quot;${ac_cv_path_GFORTRAN+set}&quot; = set; then
@@ -3187,8 +3199,6 @@
 
 
 
-FCV=&quot;&quot;
-
 if test ! -z ${GFORTRAN} ; then
 	echo &quot;*** gfortran compiler found at ${GFORTRAN}&quot;
 	if test &quot;${gfortran}&quot; = yes; then


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000921.html">[WSJT-SVN] r1227 - trunk
</A></li>
	<LI>Next message: <A HREF="000923.html">[WSJT-SVN] r1229 - branches/wspr
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#922">[ date ]</a>
              <a href="thread.html#922">[ thread ]</a>
              <a href="subject.html#922">[ subject ]</a>
              <a href="author.html#922">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/wsjt-svn">More information about the wsjt-svn
mailing list</a><br>
</body></html>
