<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [WSJT-SVN] r1223 - branches/wspr
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/wsjt-svn/2009-May/index.html" >
   <LINK REL="made" HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20r1223%20-%20branches/wspr&In-Reply-To=%3C200905162240.n4GMe466007238%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000916.html">
   <LINK REL="Next"  HREF="000918.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[WSJT-SVN] r1223 - branches/wspr</H1>
    <B>va3db at BerliOS</B> 
    <A HREF="mailto:wsjt-svn%40lists.berlios.de?Subject=Re%3A%20%5BWSJT-SVN%5D%20r1223%20-%20branches/wspr&In-Reply-To=%3C200905162240.n4GMe466007238%40sheep.berlios.de%3E"
       TITLE="[WSJT-SVN] r1223 - branches/wspr">va3db at mail.berlios.de
       </A><BR>
    <I>Sun May 17 00:40:04 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000916.html">[WSJT-SVN] r1222 - branches/map65iq
</A></li>
        <LI>Next message: <A HREF="000918.html">[WSJT-SVN] r1224 - trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#917">[ date ]</a>
              <a href="thread.html#917">[ thread ]</a>
              <a href="subject.html#917">[ subject ]</a>
              <a href="author.html#917">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: va3db
Date: 2009-05-17 00:39:58 +0200 (Sun, 17 May 2009)
New Revision: 1223

Added:
   branches/wspr/aclocal.m4
Modified:
   branches/wspr/configure
   branches/wspr/configure.ac
Log:
- Cleanup configure here the same way as wsjt, using macros in aclocal.m4



Added: branches/wspr/aclocal.m4
===================================================================
--- branches/wspr/aclocal.m4	2009-05-16 22:29:05 UTC (rev 1222)
+++ branches/wspr/aclocal.m4	2009-05-16 22:39:58 UTC (rev 1223)
@@ -0,0 +1,211 @@
+dnl {{{ ax_check_gfortran
+AC_DEFUN([AX_CHECK_GFORTRAN],[
+
+AC_ARG_ENABLE(g95,
+AC_HELP_STRING([--enable-g95],[Use G95 compiler if available.]),
+[g95=$enableval], [g95=no])
+
+AC_ARG_ENABLE(gfortran,
+AC_HELP_STRING([--enable-gfortran],[Use gfortran compiler if available.]),
+[gfortran=$enableval], [gfortran=no])
+
+dnl
+dnl Pick up FC from the environment if present
+dnl I'll add a test to confirm this is a gfortran later -db
+dnl
+
+if test -n $[{FC}] ; then
+	gfortran=$[{FC}]
+fi
+
+dnl
+dnl Note regarding the apparent silliness with FCV.
+dnl The FCV value for g95 might be system dependent, this is
+dnl still to be fully explored. If not, then the FCV_G95
+dnl stuff can go away. -db
+dnl
+
+AC_MSG_CHECKING([uname -s])
+case `uname -s` in
+	CYGWIN*)
+		AC_MSG_RESULT(Cygwin)
+		CYGWIN=yes
+	;;
+	SunOS*)
+		AC_MSG_RESULT(SunOS or Solaris)
+		AC_DEFINE(__EXTENSIONS__, 1, [This is needed to use strtok_r on Solaris.])
+	;;
+dnl
+dnl Pick up current gfortran from ports infrastructure for fbsd
+dnl
+        FreeBSD*)
+		if test -z $[{gfortran}] ; then
+			gfortran=`grep FC: /usr/ports/Mk/bsd.gcc.mk | head -1 |awk '{print $[2]}'`
+		fi
+		FCV_G95=&quot;g95&quot;
+	;;
+	*)
+		FCV_G95=&quot;g95&quot;
+		AC_MSG_RESULT(no)
+	;;
+esac
+
+dnl
+dnl look for gfortran if nothing else was given
+dnl
+
+if test -z $[gfortran] ; then
+	gfortran=&quot;gfortran&quot;
+fi
+
+AC_PATH_PROG(G95, g95)
+AC_PATH_PROG(GFORTRAN, $[{gfortran}])
+
+FCV=&quot;&quot;
+ 
+if test ! -z $[{GFORTRAN}] ; then
+	echo &quot;*** gfortran compiler found at $[{GFORTRAN}]&quot;
+	if test &quot;$[{gfortran}]&quot; = yes; then
+       		FC_LIB_PATH=`$[{GFORTRAN}] -print-file-name=`
+		FC=`basename $[{GFORTRAN}]`
+		g95=no
+		FFLAGS=&quot;$[{FFLAGS_GFORTRAN}]&quot;
+		FCV=&quot;gnu95&quot;
+	fi
+else
+	echo &quot;*** No gfortran compiler found&quot;
+fi
+
+if test ! -z $[{G95}] ; then
+	echo &quot;*** g95 compiler found at $[{G95}]&quot;
+	if test &quot;$[{g95}]&quot; = yes; then
+       		FC_LIB_PATH=`$[{G95}] -print-file-name=`
+		FC=`basename $[{G95}]`
+		gfortran=no
+		FFLAGS=&quot;$[{FFLAGS_G95}]&quot;
+		FCV=$[{FCV_G95}]
+	fi
+else
+	echo &quot;*** No g95 compiler found&quot;
+fi
+
+dnl
+dnl if FC is not set by now, pick a compiler for user
+dnl
+if test -z $[{FC}] ; then
+	if test ! -z $[{GFORTRAN}] ; then
+		if test &quot;$[{g95}]&quot; = yes; then
+			echo &quot;You enabled g95, but no g95 compiler found, defaulting to gfortran instead&quot;
+		fi
+       		FC_LIB_PATH=`$[{GFORTRAN}] -print-file-name=`
+	        FC=`basename $[{GFORTRAN}]`
+		g95=no
+		gfortran=yes
+		FFLAGS=&quot;$[{FFLAGS_GFORTRAN}]&quot;
+		FCV=&quot;gnu95&quot;
+	elif test ! -z $G95 ; then
+		if test &quot;$[{gfortran}]&quot; = yes; then
+			echo &quot;You enabled gfortran, but no gfortran compiler found, defaulting to g95 instead&quot;
+		fi
+       		FC_LIB_PATH=`$[{G95}] -print-file-name=`
+	        FC=`basename $[{G95}]`
+		g95=yes
+		gfortran=no
+		FFLAGS=&quot;$[{FFLAGS_G95}]&quot;
+		FCV=$[{FCV_G95}]
+	fi
+fi
+
+AC_DEFINE_UNQUOTED(FC_LIB_PATH, &quot;${FC_LIB_PATH}&quot;, [Path to fortran libs.])
+AC_SUBST(FC_LIB_PATH, &quot;${FC_LIB_PATH}&quot;)
+AC_DEFINE_UNQUOTED(FC, &quot;${FC}&quot;, [Fortran compiler.])
+AC_SUBST(FC, &quot;${FC}&quot;)
+AC_SUBST(FCV, &quot;${FCV}&quot;)
+AC_SUBST(PREFIX, &quot;${prefix}&quot;)
+
+dnl =========================================
+dnl pick gfortran or g95
+
+])dnl }}}
+
+
+dnl {{{ ax_check_portaudio
+AC_DEFUN([AX_CHECK_PORTAUDIO],[
+
+HAS_PORTAUDIO_H=0
+HAS_PORTAUDIO_LIB=0
+HAS_PORTAUDIO=0
+
+AC_MSG_CHECKING([for a v19 portaudio ])
+
+portaudio_lib_dir=&quot;/usr/lib&quot;
+portaudio_include_dir=&quot;/usr/include&quot;
+
+AC_ARG_WITH([portaudio-include-dir],
+AC_HELP_STRING([--with-portaudio-include-dir=&lt;path&gt;],
+    [path to portaudio include files]),
+    [portaudio_include_dir=$with_portaudio_include_dir])
+
+AC_ARG_WITH([portaudio-lib-dir],
+AC_HELP_STRING([--with-portaudio-lib-dir=&lt;path&gt;],
+    [path to portaudio lib files]),
+    [portaudio_lib_dir=$with_portaudio_lib_dir])
+
+if test -e $[{portaudio_include_dir}]/portaudio.h; then
+	HAS_PORTAUDIO_H=1
+fi
+
+if test -e $[{portaudio_lib_dir}]/libportaudio.so \
+    -o -e $[{portaudio_lib_dir}]/libportaudio.a;then
+	HAS_PORTAUDIO_LIB=1
+fi
+
+if test $[{HAS_PORTAUDIO_H}] -eq 1 -a $[{HAS_PORTAUDIO_LIB}] -eq 1; then
+	LDFLAGS=&quot;-L$[{portaudio_lib_dir}] $[{LDFLAGS}]&quot;
+	LIBS=&quot;$[{LIBS}] -lportaudio&quot;
+	CPPFLAGS=&quot;-I$[{portaudio_include_dir}] $[{CPPFLAGS}]&quot;
+	AC_CHECK_LIB(portaudio, Pa_GetVersion, \
+		[HAS_PORTAUDIO_VERSION=1], [HAS_PORTAUDIO_VERSION=0])
+	if test $[{HAS_PORTAUDIO_VERSION}] -eq 0; then
+		AC_MSG_RESULT([This is likely portaudio v18; you need portaudio v19])
+	else
+		HAS_PORTAUDIO=1
+	fi
+else
+	AC_MSG_RESULT([portaudio not found trying FreeBSD paths ])
+	portaudio_lib_dir=&quot;/usr/local/lib/portaudio2&quot;
+	portaudio_include_dir=&quot;/usr/local/include/portaudio2&quot;
+dnl
+dnl Try again to make sure portaudio dirs are valid
+dnl
+	AC_MSG_CHECKING([for a v19 portaudio in FreeBSD paths.])
+	HAS_PORTAUDIO_H=0
+	HAS_PORTAUDIO_LIB=0
+
+	if test -e $[{portaudio_include_dir}]/portaudio.h; then
+		HAS_PORTAUDIO_H=1
+	fi
+
+	if test -e $[{portaudio_lib_dir}]/libportaudio.so \
+	    -o -e $[{portaudio_lib_dir}]/libportaudio.a;then
+		HAS_PORTAUDIO_LIB=1
+	fi
+
+	if test $[{HAS_PORTAUDIO_H}] -eq 1 -a $[{HAS_PORTAUDIO_LIB}] -eq 1; then
+		AC_MSG_RESULT([found portaudio in FreeBSD paths, double checking it is v19 ])
+		LDFLAGS=&quot;-L$[{portaudio_lib_dir}] $[{LDFLAGS}]&quot;
+		LIBS=&quot;$[{LIBS}] -lportaudio&quot;
+		CPPFLAGS=&quot;-I$[{portaudio_include_dir}] $[{CPPFLAGS}]&quot;
+		AC_CHECK_LIB(portaudio, Pa_GetVersion, \
+			[HAS_PORTAUDIO_VERSION=1], [HAS_PORTAUDIO_VERSION=0])
+		if test $[{HAS_PORTAUDIO_VERSION}] -eq 0; then
+			AC_MSG_RESULT([How did you end up with a portaudio v18 here?])
+		else
+			AC_MSG_RESULT([found v19])
+			HAS_PORTAUDIO=1
+			HAS_PORTAUDIO_H=1
+		fi
+	fi
+fi
+
+])dnl }}}


Property changes on: branches/wspr/aclocal.m4
___________________________________________________________________
Name: svn:keywords
   + &quot;Author Date Id Revision&quot;
Name: svn:eol-style
   + native

Modified: branches/wspr/configure
===================================================================
--- branches/wspr/configure	2009-05-16 22:29:05 UTC (rev 1222)
+++ branches/wspr/configure	2009-05-16 22:39:58 UTC (rev 1223)
@@ -1,8 +1,8 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.62 for wspr 0.8.
+# Generated by GNU Autoconf 2.62 for wspr 1.11.
 #
-# $Id: configure.ac 1145 2009-04-23 15:32:14Z va3db $
+# $Id: configure.ac 1187 2009-04-30 19:01:33Z va3db $
 #
 # Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
 # 2002, 2003, 2004, 2005, 2006, 2007, 2008 Free Software Foundation, Inc.
@@ -596,8 +596,8 @@
 # Identity of this package.
 PACKAGE_NAME='wspr'
 PACKAGE_TARNAME='wspr'
-PACKAGE_VERSION='0.8'
-PACKAGE_STRING='wspr 0.8'
+PACKAGE_VERSION='1.11'
+PACKAGE_STRING='wspr 1.11'
 PACKAGE_BUGREPORT=''
 
 ac_default_prefix=/usr/local/
@@ -684,6 +684,12 @@
 F77
 FFLAGS
 ac_ct_F77
+G95
+GFORTRAN
+FC_LIB_PATH
+FC
+FCV
+PREFIX
 CPP
 GREP
 EGREP
@@ -701,15 +707,9 @@
 TEST
 PYTHON
 F2PY
-G95
-GFORTRAN
 VERSION
 OS
 CLOBBER
-FC_LIB_PATH
-FC
-FCV
-PREFIX
 LOCAL_PORTAUDIO
 LOCAL_PORTAUDIO_CLEAN
 LIBOBJS
@@ -717,12 +717,12 @@
 ac_subst_files=''
 ac_user_opts='
 enable_option_checking
-enable_clobber
-enable_assert
 enable_g95
 enable_gfortran
 with_portaudio_include_dir
 with_portaudio_lib_dir
+enable_clobber
+enable_assert
 '
       ac_precious_vars='build_alias
 host_alias
@@ -1287,7 +1287,7 @@
   # Omit some internal or obsolete options to make the list less imposing.
   # This message is too long to be a string in the A/UX 3.1 sh.
   cat &lt;&lt;_ACEOF
-\`configure' configures wspr 0.8 to adapt to many kinds of systems.
+\`configure' configures wspr 1.11 to adapt to many kinds of systems.
 
 Usage: $0 [OPTION]... [VAR=VALUE]...
 
@@ -1348,7 +1348,7 @@
 
 if test -n &quot;$ac_init_help&quot;; then
   case $ac_init_help in
-     short | recursive ) echo &quot;Configuration of wspr 0.8:&quot;;;
+     short | recursive ) echo &quot;Configuration of wspr 1.11:&quot;;;
    esac
   cat &lt;&lt;\_ACEOF
 
@@ -1356,10 +1356,10 @@
   --disable-option-checking  ignore unrecognized --enable/--with options
   --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
   --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
+  --enable-g95            Use G95 compiler if available.
+  --enable-gfortran       Use gfortran compiler if available.
   --enable-clobber        Don't preserve old binaries on make install
   --enable-assert         Enable assert().
-  --enable-g95            Use G95 compiler if available.
-  --enable-gfortran       Use gfortran compiler if available.
 
 Optional Packages:
   --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
@@ -1446,7 +1446,7 @@
 test -n &quot;$ac_init_help&quot; &amp;&amp; exit $ac_status
 if $ac_init_version; then
   cat &lt;&lt;\_ACEOF
-wspr configure 0.8
+wspr configure 1.11
 generated by GNU Autoconf 2.62
 
 Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
@@ -1454,7 +1454,7 @@
 This configure script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it.
 
-$Id: configure.ac 1145 2009-04-23 15:32:14Z va3db $
+$Id: configure.ac 1187 2009-04-30 19:01:33Z va3db $
 _ACEOF
   exit
 fi
@@ -1462,7 +1462,7 @@
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
-It was created by wspr $as_me 0.8, which was
+It was created by wspr $as_me 1.11, which was
 generated by GNU Autoconf 2.62.  Invocation command line was
 
   $ $0 $@
@@ -3046,15 +3046,33 @@
 CPPFLAGS=&quot;-I/usr/local/include ${CPPFLAGS}&quot;
 LDFLAGS=&quot;-L/usr/local/lib ${LDFLAGS}&quot;
 LIBS=&quot; -lpthread ${LIBS}&quot;
-FCV=&quot;&quot;
 
 
+
+# Check whether --enable-g95 was given.
+if test &quot;${enable_g95+set}&quot; = set; then
+  enableval=$enable_g95; g95=$enableval
+else
+  g95=no
+fi
+
+
+# Check whether --enable-gfortran was given.
+if test &quot;${enable_gfortran+set}&quot; = set; then
+  enableval=$enable_gfortran; gfortran=$enableval
+else
+  gfortran=no
+fi
+
+
+
 if test -n ${FC} ; then
 	gfortran=${FC}
 fi
 
-{ $as_echo &quot;$as_me:$LINENO: checking uname -s for Cygwin, Solaris or HPUX&quot; &gt;&amp;5
-$as_echo_n &quot;checking uname -s for Cygwin, Solaris or HPUX... &quot; &gt;&amp;6; }
+
+{ $as_echo &quot;$as_me:$LINENO: checking uname -s&quot; &gt;&amp;5
+$as_echo_n &quot;checking uname -s... &quot; &gt;&amp;6; }
 case `uname -s` in
 	CYGWIN*)
 		{ $as_echo &quot;$as_me:$LINENO: result: Cygwin&quot; &gt;&amp;5
@@ -3074,8 +3092,10 @@
 		if test -z ${gfortran} ; then
 			gfortran=`grep FC: /usr/ports/Mk/bsd.gcc.mk | head -1 |awk '{print $2}'`
 		fi
+		FCV_G95=&quot;g95&quot;
 	;;
 	*)
+		FCV_G95=&quot;g95&quot;
 		{ $as_echo &quot;$as_me:$LINENO: result: no&quot; &gt;&amp;5
 $as_echo &quot;no&quot; &gt;&amp;6; }
 	;;
@@ -3086,6 +3106,389 @@
 	gfortran=&quot;gfortran&quot;
 fi
 
+# Extract the first word of &quot;g95&quot;, so it can be a program name with args.
+set dummy g95; ac_word=$2
+{ $as_echo &quot;$as_me:$LINENO: checking for $ac_word&quot; &gt;&amp;5
+$as_echo_n &quot;checking for $ac_word... &quot; &gt;&amp;6; }
+if test &quot;${ac_cv_path_G95+set}&quot; = set; then
+  $as_echo_n &quot;(cached) &quot; &gt;&amp;6
+else
+  case $G95 in
+  [\\/]* | ?:[\\/]*)
+  ac_cv_path_G95=&quot;$G95&quot; # Let the user override the test with a path.
+  ;;
+  *)
+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z &quot;$as_dir&quot; &amp;&amp; as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f &quot;$as_dir/$ac_word$ac_exec_ext&quot; &amp;&amp; $as_test_x &quot;$as_dir/$ac_word$ac_exec_ext&quot;; }; then
+    ac_cv_path_G95=&quot;$as_dir/$ac_word$ac_exec_ext&quot;
+    $as_echo &quot;$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext&quot; &gt;&amp;5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+  ;;
+esac
+fi
+G95=$ac_cv_path_G95
+if test -n &quot;$G95&quot;; then
+  { $as_echo &quot;$as_me:$LINENO: result: $G95&quot; &gt;&amp;5
+$as_echo &quot;$G95&quot; &gt;&amp;6; }
+else
+  { $as_echo &quot;$as_me:$LINENO: result: no&quot; &gt;&amp;5
+$as_echo &quot;no&quot; &gt;&amp;6; }
+fi
+
+
+# Extract the first word of &quot;${gfortran}&quot;, so it can be a program name with args.
+set dummy ${gfortran}; ac_word=$2
+{ $as_echo &quot;$as_me:$LINENO: checking for $ac_word&quot; &gt;&amp;5
+$as_echo_n &quot;checking for $ac_word... &quot; &gt;&amp;6; }
+if test &quot;${ac_cv_path_GFORTRAN+set}&quot; = set; then
+  $as_echo_n &quot;(cached) &quot; &gt;&amp;6
+else
+  case $GFORTRAN in
+  [\\/]* | ?:[\\/]*)
+  ac_cv_path_GFORTRAN=&quot;$GFORTRAN&quot; # Let the user override the test with a path.
+  ;;
+  *)
+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z &quot;$as_dir&quot; &amp;&amp; as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f &quot;$as_dir/$ac_word$ac_exec_ext&quot; &amp;&amp; $as_test_x &quot;$as_dir/$ac_word$ac_exec_ext&quot;; }; then
+    ac_cv_path_GFORTRAN=&quot;$as_dir/$ac_word$ac_exec_ext&quot;
+    $as_echo &quot;$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext&quot; &gt;&amp;5
+    break 2
+  fi
+done
+done
+IFS=$as_save_IFS
+
+  ;;
+esac
+fi
+GFORTRAN=$ac_cv_path_GFORTRAN
+if test -n &quot;$GFORTRAN&quot;; then
+  { $as_echo &quot;$as_me:$LINENO: result: $GFORTRAN&quot; &gt;&amp;5
+$as_echo &quot;$GFORTRAN&quot; &gt;&amp;6; }
+else
+  { $as_echo &quot;$as_me:$LINENO: result: no&quot; &gt;&amp;5
+$as_echo &quot;no&quot; &gt;&amp;6; }
+fi
+
+
+
+FCV=&quot;&quot;
+
+if test ! -z ${GFORTRAN} ; then
+	echo &quot;*** gfortran compiler found at ${GFORTRAN}&quot;
+	if test &quot;${gfortran}&quot; = yes; then
+       		FC_LIB_PATH=`${GFORTRAN} -print-file-name=`
+		FC=`basename ${GFORTRAN}`
+		g95=no
+		FFLAGS=&quot;${FFLAGS_GFORTRAN}&quot;
+		FCV=&quot;gnu95&quot;
+	fi
+else
+	echo &quot;*** No gfortran compiler found&quot;
+fi
+
+if test ! -z ${G95} ; then
+	echo &quot;*** g95 compiler found at ${G95}&quot;
+	if test &quot;${g95}&quot; = yes; then
+       		FC_LIB_PATH=`${G95} -print-file-name=`
+		FC=`basename ${G95}`
+		gfortran=no
+		FFLAGS=&quot;${FFLAGS_G95}&quot;
+		FCV=${FCV_G95}
+	fi
+else
+	echo &quot;*** No g95 compiler found&quot;
+fi
+
+if test -z ${FC} ; then
+	if test ! -z ${GFORTRAN} ; then
+		if test &quot;${g95}&quot; = yes; then
+			echo &quot;You enabled g95, but no g95 compiler found, defaulting to gfortran instead&quot;
+		fi
+       		FC_LIB_PATH=`${GFORTRAN} -print-file-name=`
+	        FC=`basename ${GFORTRAN}`
+		g95=no
+		gfortran=yes
+		FFLAGS=&quot;${FFLAGS_GFORTRAN}&quot;
+		FCV=&quot;gnu95&quot;
+	elif test ! -z $G95 ; then
+		if test &quot;${gfortran}&quot; = yes; then
+			echo &quot;You enabled gfortran, but no gfortran compiler found, defaulting to g95 instead&quot;
+		fi
+       		FC_LIB_PATH=`${G95} -print-file-name=`
+	        FC=`basename ${G95}`
+		g95=yes
+		gfortran=no
+		FFLAGS=&quot;${FFLAGS_G95}&quot;
+		FCV=${FCV_G95}
+	fi
+fi
+
+
+cat &gt;&gt;confdefs.h &lt;&lt;_ACEOF
+#define FC_LIB_PATH &quot;${FC_LIB_PATH}&quot;
+_ACEOF
+
+FC_LIB_PATH=&quot;${FC_LIB_PATH}&quot;
+
+
+cat &gt;&gt;confdefs.h &lt;&lt;_ACEOF
+#define FC &quot;${FC}&quot;
+_ACEOF
+
+FC=&quot;${FC}&quot;
+
+FCV=&quot;${FCV}&quot;
+
+PREFIX=&quot;${prefix}&quot;
+
+
+
+
+
+
+
+HAS_PORTAUDIO_H=0
+HAS_PORTAUDIO_LIB=0
+HAS_PORTAUDIO=0
+
+{ $as_echo &quot;$as_me:$LINENO: checking for a v19 portaudio &quot; &gt;&amp;5
+$as_echo_n &quot;checking for a v19 portaudio ... &quot; &gt;&amp;6; }
+
+portaudio_lib_dir=&quot;/usr/lib&quot;
+portaudio_include_dir=&quot;/usr/include&quot;
+
+
+# Check whether --with-portaudio-include-dir was given.
+if test &quot;${with_portaudio_include_dir+set}&quot; = set; then
+  withval=$with_portaudio_include_dir; portaudio_include_dir=$with_portaudio_include_dir
+fi
+
+
+
+# Check whether --with-portaudio-lib-dir was given.
+if test &quot;${with_portaudio_lib_dir+set}&quot; = set; then
+  withval=$with_portaudio_lib_dir; portaudio_lib_dir=$with_portaudio_lib_dir
+fi
+
+
+if test -e ${portaudio_include_dir}/portaudio.h; then
+	HAS_PORTAUDIO_H=1
+fi
+
+if test -e ${portaudio_lib_dir}/libportaudio.so \
+    -o -e ${portaudio_lib_dir}/libportaudio.a;then
+	HAS_PORTAUDIO_LIB=1
+fi
+
+if test ${HAS_PORTAUDIO_H} -eq 1 -a ${HAS_PORTAUDIO_LIB} -eq 1; then
+	LDFLAGS=&quot;-L${portaudio_lib_dir} ${LDFLAGS}&quot;
+	LIBS=&quot;${LIBS} -lportaudio&quot;
+	CPPFLAGS=&quot;-I${portaudio_include_dir} ${CPPFLAGS}&quot;
+	{ $as_echo &quot;$as_me:$LINENO: checking for Pa_GetVersion in -lportaudio&quot; &gt;&amp;5
+$as_echo_n &quot;checking for Pa_GetVersion in -lportaudio... &quot; &gt;&amp;6; }
+if test &quot;${ac_cv_lib_portaudio_Pa_GetVersion+set}&quot; = set; then
+  $as_echo_n &quot;(cached) &quot; &gt;&amp;6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS=&quot;-lportaudio  $LIBS&quot;
+cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h &gt;&gt;conftest.$ac_ext
+cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
+/* end confdefs.h.  */
+
+/* Override any GCC internal prototype to avoid an error.
+   Use char because int might match the return type of a GCC
+   builtin and then its argument prototype would still apply.  */
+#ifdef __cplusplus
+extern &quot;C&quot;
+#endif
+char Pa_GetVersion ();
+int
+main ()
+{
+return Pa_GetVersion ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (ac_try=&quot;$ac_link&quot;
+case &quot;(($ac_try&quot; in
+  *\&quot;* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo=&quot;\&quot;\$as_me:$LINENO: $ac_try_echo\&quot;&quot;
+$as_echo &quot;$ac_try_echo&quot;) &gt;&amp;5
+  (eval &quot;$ac_link&quot;) 2&gt;conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 &gt;conftest.err
+  rm -f conftest.er1
+  cat conftest.err &gt;&amp;5
+  $as_echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
+  (exit $ac_status); } &amp;&amp; {
+	 test -z &quot;$ac_c_werror_flag&quot; ||
+	 test ! -s conftest.err
+       } &amp;&amp; test -s conftest$ac_exeext &amp;&amp; {
+	 test &quot;$cross_compiling&quot; = yes ||
+	 $as_test_x conftest$ac_exeext
+       }; then
+  ac_cv_lib_portaudio_Pa_GetVersion=yes
+else
+  $as_echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
+sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
+
+	ac_cv_lib_portaudio_Pa_GetVersion=no
+fi
+
+rm -rf conftest.dSYM
+rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+      conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+{ $as_echo &quot;$as_me:$LINENO: result: $ac_cv_lib_portaudio_Pa_GetVersion&quot; &gt;&amp;5
+$as_echo &quot;$ac_cv_lib_portaudio_Pa_GetVersion&quot; &gt;&amp;6; }
+if test $ac_cv_lib_portaudio_Pa_GetVersion = yes; then
+  \
+		HAS_PORTAUDIO_VERSION=1
+else
+  HAS_PORTAUDIO_VERSION=0
+fi
+
+	if test ${HAS_PORTAUDIO_VERSION} -eq 0; then
+		{ $as_echo &quot;$as_me:$LINENO: result: This is likely portaudio v18; you need portaudio v19&quot; &gt;&amp;5
+$as_echo &quot;This is likely portaudio v18; you need portaudio v19&quot; &gt;&amp;6; }
+	else
+		HAS_PORTAUDIO=1
+	fi
+else
+	{ $as_echo &quot;$as_me:$LINENO: result: portaudio not found trying FreeBSD paths &quot; &gt;&amp;5
+$as_echo &quot;portaudio not found trying FreeBSD paths &quot; &gt;&amp;6; }
+	portaudio_lib_dir=&quot;/usr/local/lib/portaudio2&quot;
+	portaudio_include_dir=&quot;/usr/local/include/portaudio2&quot;
+	{ $as_echo &quot;$as_me:$LINENO: checking for a v19 portaudio in FreeBSD paths.&quot; &gt;&amp;5
+$as_echo_n &quot;checking for a v19 portaudio in FreeBSD paths.... &quot; &gt;&amp;6; }
+	HAS_PORTAUDIO_H=0
+	HAS_PORTAUDIO_LIB=0
+
+	if test -e ${portaudio_include_dir}/portaudio.h; then
+		HAS_PORTAUDIO_H=1
+	fi
+
+	if test -e ${portaudio_lib_dir}/libportaudio.so \
+	    -o -e ${portaudio_lib_dir}/libportaudio.a;then
+		HAS_PORTAUDIO_LIB=1
+	fi
+
+	if test ${HAS_PORTAUDIO_H} -eq 1 -a ${HAS_PORTAUDIO_LIB} -eq 1; then
+		{ $as_echo &quot;$as_me:$LINENO: result: found portaudio in FreeBSD paths, double checking it is v19 &quot; &gt;&amp;5
+$as_echo &quot;found portaudio in FreeBSD paths, double checking it is v19 &quot; &gt;&amp;6; }
+		LDFLAGS=&quot;-L${portaudio_lib_dir} ${LDFLAGS}&quot;
+		LIBS=&quot;${LIBS} -lportaudio&quot;
+		CPPFLAGS=&quot;-I${portaudio_include_dir} ${CPPFLAGS}&quot;
+		{ $as_echo &quot;$as_me:$LINENO: checking for Pa_GetVersion in -lportaudio&quot; &gt;&amp;5
+$as_echo_n &quot;checking for Pa_GetVersion in -lportaudio... &quot; &gt;&amp;6; }
+if test &quot;${ac_cv_lib_portaudio_Pa_GetVersion+set}&quot; = set; then
+  $as_echo_n &quot;(cached) &quot; &gt;&amp;6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS=&quot;-lportaudio  $LIBS&quot;
+cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h &gt;&gt;conftest.$ac_ext
+cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
+/* end confdefs.h.  */
+
+/* Override any GCC internal prototype to avoid an error.
+   Use char because int might match the return type of a GCC
+   builtin and then its argument prototype would still apply.  */
+#ifdef __cplusplus
+extern &quot;C&quot;
+#endif
+char Pa_GetVersion ();
+int
+main ()
+{
+return Pa_GetVersion ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (ac_try=&quot;$ac_link&quot;
+case &quot;(($ac_try&quot; in
+  *\&quot;* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo=&quot;\&quot;\$as_me:$LINENO: $ac_try_echo\&quot;&quot;
+$as_echo &quot;$ac_try_echo&quot;) &gt;&amp;5
+  (eval &quot;$ac_link&quot;) 2&gt;conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 &gt;conftest.err
+  rm -f conftest.er1
+  cat conftest.err &gt;&amp;5
+  $as_echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
+  (exit $ac_status); } &amp;&amp; {
+	 test -z &quot;$ac_c_werror_flag&quot; ||
+	 test ! -s conftest.err
+       } &amp;&amp; test -s conftest$ac_exeext &amp;&amp; {
+	 test &quot;$cross_compiling&quot; = yes ||
+	 $as_test_x conftest$ac_exeext
+       }; then
+  ac_cv_lib_portaudio_Pa_GetVersion=yes
+else
+  $as_echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
+sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
+
+	ac_cv_lib_portaudio_Pa_GetVersion=no
+fi
+
+rm -rf conftest.dSYM
+rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+      conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+{ $as_echo &quot;$as_me:$LINENO: result: $ac_cv_lib_portaudio_Pa_GetVersion&quot; &gt;&amp;5
+$as_echo &quot;$ac_cv_lib_portaudio_Pa_GetVersion&quot; &gt;&amp;6; }
+if test $ac_cv_lib_portaudio_Pa_GetVersion = yes; then
+  \
+			HAS_PORTAUDIO_VERSION=1
+else
+  HAS_PORTAUDIO_VERSION=0
+fi
+
+		if test ${HAS_PORTAUDIO_VERSION} -eq 0; then
+			{ $as_echo &quot;$as_me:$LINENO: result: How did you end up with a portaudio v18 here?&quot; &gt;&amp;5
+$as_echo &quot;How did you end up with a portaudio v18 here?&quot; &gt;&amp;6; }
+		else
+			{ $as_echo &quot;$as_me:$LINENO: result: found v19&quot; &gt;&amp;5
+$as_echo &quot;found v19&quot; &gt;&amp;6; }
+			HAS_PORTAUDIO=1
+			HAS_PORTAUDIO_H=1
+		fi
+	fi
+fi
+
+
+
 if test &quot;$ac_cv_c_compiler_gnu&quot; = yes; then
 	{ $as_echo &quot;$as_me:$LINENO: checking if $CC is Apple GCC&quot; &gt;&amp;5
 $as_echo_n &quot;checking if $CC is Apple GCC... &quot; &gt;&amp;6; }
@@ -3111,7 +3514,6 @@
 fi
 
 
-
 { $as_echo &quot;$as_me:$LINENO: checking for library containing strerror&quot; &gt;&amp;5
 $as_echo_n &quot;checking for library containing strerror... &quot; &gt;&amp;6; }
 if test &quot;${ac_cv_search_strerror+set}&quot; = set; then
@@ -4244,86 +4646,6 @@
 fi
 
 
-# Extract the first word of &quot;g95&quot;, so it can be a program name with args.
-set dummy g95; ac_word=$2
-{ $as_echo &quot;$as_me:$LINENO: checking for $ac_word&quot; &gt;&amp;5
-$as_echo_n &quot;checking for $ac_word... &quot; &gt;&amp;6; }
-if test &quot;${ac_cv_path_G95+set}&quot; = set; then
-  $as_echo_n &quot;(cached) &quot; &gt;&amp;6
-else
-  case $G95 in
-  [\\/]* | ?:[\\/]*)
-  ac_cv_path_G95=&quot;$G95&quot; # Let the user override the test with a path.
-  ;;
-  *)
-  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z &quot;$as_dir&quot; &amp;&amp; as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if { test -f &quot;$as_dir/$ac_word$ac_exec_ext&quot; &amp;&amp; $as_test_x &quot;$as_dir/$ac_word$ac_exec_ext&quot;; }; then
-    ac_cv_path_G95=&quot;$as_dir/$ac_word$ac_exec_ext&quot;
-    $as_echo &quot;$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext&quot; &gt;&amp;5
-    break 2
-  fi
-done
-done
-IFS=$as_save_IFS
-
-  ;;
-esac
-fi
-G95=$ac_cv_path_G95
-if test -n &quot;$G95&quot;; then
-  { $as_echo &quot;$as_me:$LINENO: result: $G95&quot; &gt;&amp;5
-$as_echo &quot;$G95&quot; &gt;&amp;6; }
-else
-  { $as_echo &quot;$as_me:$LINENO: result: no&quot; &gt;&amp;5
-$as_echo &quot;no&quot; &gt;&amp;6; }
-fi
-
-
-# Extract the first word of &quot;${gfortran}&quot;, so it can be a program name with args.
-set dummy ${gfortran}; ac_word=$2
-{ $as_echo &quot;$as_me:$LINENO: checking for $ac_word&quot; &gt;&amp;5
-$as_echo_n &quot;checking for $ac_word... &quot; &gt;&amp;6; }
-if test &quot;${ac_cv_path_GFORTRAN+set}&quot; = set; then
-  $as_echo_n &quot;(cached) &quot; &gt;&amp;6
-else
-  case $GFORTRAN in
-  [\\/]* | ?:[\\/]*)
-  ac_cv_path_GFORTRAN=&quot;$GFORTRAN&quot; # Let the user override the test with a path.
-  ;;
-  *)
-  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z &quot;$as_dir&quot; &amp;&amp; as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if { test -f &quot;$as_dir/$ac_word$ac_exec_ext&quot; &amp;&amp; $as_test_x &quot;$as_dir/$ac_word$ac_exec_ext&quot;; }; then
-    ac_cv_path_GFORTRAN=&quot;$as_dir/$ac_word$ac_exec_ext&quot;
-    $as_echo &quot;$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext&quot; &gt;&amp;5
-    break 2
-  fi
-done
-done
-IFS=$as_save_IFS
-
-  ;;
-esac
-fi
-GFORTRAN=$ac_cv_path_GFORTRAN
-if test -n &quot;$GFORTRAN&quot;; then
-  { $as_echo &quot;$as_me:$LINENO: result: $GFORTRAN&quot; &gt;&amp;5
-$as_echo &quot;$GFORTRAN&quot; &gt;&amp;6; }
-else
-  { $as_echo &quot;$as_me:$LINENO: result: no&quot; &gt;&amp;5
-$as_echo &quot;no&quot; &gt;&amp;6; }
-fi
-
-
 VERSION=&quot;${version}&quot;
 
 { $as_echo &quot;$as_me:$LINENO: checking OS&quot; &gt;&amp;5
@@ -4946,9 +5268,6 @@
 fi
 
 
-HAS_PORTAUDIO_H=0
-HAS_PORTAUDIO_LIB=0
-HAS_PORTAUDIO=0
 
 { $as_echo &quot;$as_me:$LINENO: checking whether string.h and strings.h may both be included&quot; &gt;&amp;5
 $as_echo_n &quot;checking whether string.h and strings.h may both be included... &quot; &gt;&amp;6; }
@@ -5183,74 +5502,8 @@
 fi
 
 
-# Check whether --enable-g95 was given.
-if test &quot;${enable_g95+set}&quot; = set; then
-  enableval=$enable_g95; g95=$enableval
-else
-  g95=no
-fi
 
 
-# Check whether --enable-gfortran was given.
-if test &quot;${enable_gfortran+set}&quot; = set; then
-  enableval=$enable_gfortran; gfortran=$enableval
-else
-  gfortran=no
-fi
-
-
-
-if test ! -z $GFORTRAN ; then
-	echo &quot;*** gfortran compiler found at ${GFORTRAN}&quot;
-	if test &quot;$gfortran&quot; = yes; then
-       		FC_LIB_PATH=`${GFORTRAN} -print-file-name=`
-		FC=`basename ${GFORTRAN}`
-		g95=no
-		FFLAGS=&quot;$FFLAGS -fno-range-check -ffixed-line-length-none&quot;
-		FCV=&quot;gnu95&quot;
-	fi
-else
-	echo &quot;*** No gfortran compiler found&quot;
-fi
-
-if test ! -z $G95 ; then
-	echo &quot;*** g95 compiler found&quot;
-	if test &quot;$g95&quot; = yes; then
-       		FC_LIB_PATH=`${G95} -print-file-name=`
-		FC=`basename ${G95}`
-		gfortran=no
-		FFLAGS=&quot;${FFLAGS} -ftrace=full -cpp&quot;
-		FCV=&quot;g95&quot;
-	fi
-else
-	echo &quot;*** No g95 compiler found&quot;
-fi
-
-if test -z $FC ; then
-	if test ! -z $GFORTRAN ; then
-		if test &quot;$g95&quot; = yes; then
-			echo &quot;You enabled g95, but no g95 compiler found, defaulting to gfortran instead&quot;
-		fi
-       		FC_LIB_PATH=`${GFORTRAN} -print-file-name=`
-	        FC=`basename ${GFORTRAN}`
-		g95=no
-		gfortran=yes
-		FFLAGS=&quot;${FFLAGS} -fno-range-check -ffixed-line-length-none&quot;
-		FCV=&quot;gnu95&quot;
-	elif test ! -z $G95 ; then
-		if test &quot;$gfortran&quot; = yes; then
-			echo &quot;You enabled gfortran, but no gfortran compiler found, defaulting to g95 instead&quot;
-		fi
-       		FC_LIB_PATH=`${G95} -print-file-name=`
-	        FC=`basename ${G95}`
-		g95=yes
-		gfortran=no
-		FFLAGS=&quot;${FFLAGS} -ftrace=full -cpp&quot;
-		FCV=&quot;g95&quot;
-	fi
-fi
-
-
 cat &gt;&gt;confdefs.h &lt;&lt;_ACEOF
 #define FC_LIB_PATH &quot;${FC_LIB_PATH}&quot;
 _ACEOF
@@ -5269,227 +5522,6 @@
 PREFIX=&quot;${prefix}&quot;
 
 
-
-{ $as_echo &quot;$as_me:$LINENO: checking for a v19 portaudio &quot; &gt;&amp;5
-$as_echo_n &quot;checking for a v19 portaudio ... &quot; &gt;&amp;6; }
-
-portaudio_lib_dir=&quot;/usr/lib&quot;
-portaudio_include_dir=&quot;/usr/include&quot;
-
-
-# Check whether --with-portaudio-include-dir was given.
-if test &quot;${with_portaudio_include_dir+set}&quot; = set; then
-  withval=$with_portaudio_include_dir; portaudio_include_dir=$with_portaudio_include_dir
-fi
-
-
-
-# Check whether --with-portaudio-lib-dir was given.
-if test &quot;${with_portaudio_lib_dir+set}&quot; = set; then
-  withval=$with_portaudio_lib_dir; portaudio_lib_dir=$with_portaudio_lib_dir
-fi
-
-
-if test -e ${portaudio_include_dir}/portaudio.h; then
-	HAS_PORTAUDIO_H=1
-fi
-
-if test -e ${portaudio_lib_dir}/libportaudio.so \
-    -o -e ${portaudio_lib_dir}/libportaudio.a;then
-	HAS_PORTAUDIO_LIB=1
-fi
-
-if test $HAS_PORTAUDIO_H -eq 1 -a $HAS_PORTAUDIO_LIB -eq 1; then
-	LDFLAGS=&quot;-L${portaudio_lib_dir} ${LDFLAGS}&quot;
-	LIBS=&quot;${LIBS} -lportaudio&quot;
-	CPPFLAGS=&quot;-I${portaudio_include_dir} ${CPPFLAGS}&quot;
-	{ $as_echo &quot;$as_me:$LINENO: checking for Pa_GetVersion in -lportaudio&quot; &gt;&amp;5
-$as_echo_n &quot;checking for Pa_GetVersion in -lportaudio... &quot; &gt;&amp;6; }
-if test &quot;${ac_cv_lib_portaudio_Pa_GetVersion+set}&quot; = set; then
-  $as_echo_n &quot;(cached) &quot; &gt;&amp;6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS=&quot;-lportaudio  $LIBS&quot;
-cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h &gt;&gt;conftest.$ac_ext
-cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* end confdefs.h.  */
-
-/* Override any GCC internal prototype to avoid an error.
-   Use char because int might match the return type of a GCC
-   builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern &quot;C&quot;
-#endif
-char Pa_GetVersion ();
-int
-main ()
-{
-return Pa_GetVersion ();
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try=&quot;$ac_link&quot;
-case &quot;(($ac_try&quot; in
-  *\&quot;* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval ac_try_echo=&quot;\&quot;\$as_me:$LINENO: $ac_try_echo\&quot;&quot;
-$as_echo &quot;$ac_try_echo&quot;) &gt;&amp;5
-  (eval &quot;$ac_link&quot;) 2&gt;conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 &gt;conftest.err
-  rm -f conftest.er1
-  cat conftest.err &gt;&amp;5
-  $as_echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); } &amp;&amp; {
-	 test -z &quot;$ac_c_werror_flag&quot; ||
-	 test ! -s conftest.err
-       } &amp;&amp; test -s conftest$ac_exeext &amp;&amp; {
-	 test &quot;$cross_compiling&quot; = yes ||
-	 $as_test_x conftest$ac_exeext
-       }; then
-  ac_cv_lib_portaudio_Pa_GetVersion=yes
-else
-  $as_echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
-sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
-
-	ac_cv_lib_portaudio_Pa_GetVersion=no
-fi
-
-rm -rf conftest.dSYM
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
-fi
-{ $as_echo &quot;$as_me:$LINENO: result: $ac_cv_lib_portaudio_Pa_GetVersion&quot; &gt;&amp;5
-$as_echo &quot;$ac_cv_lib_portaudio_Pa_GetVersion&quot; &gt;&amp;6; }
-if test $ac_cv_lib_portaudio_Pa_GetVersion = yes; then
-  \
-		HAS_PORTAUDIO_VERSION=1
-else
-  HAS_PORTAUDIO_VERSION=0
-fi
-
-	if test $HAS_PORTAUDIO_VERSION -eq 0; then
-		{ $as_echo &quot;$as_me:$LINENO: result: This is likely portaudio v18; you need portaudio v19&quot; &gt;&amp;5
-$as_echo &quot;This is likely portaudio v18; you need portaudio v19&quot; &gt;&amp;6; }
-	else
-		HAS_PORTAUDIO=1
-	fi
-else
-	{ $as_echo &quot;$as_me:$LINENO: result: portaudio not found trying FreeBSD paths &quot; &gt;&amp;5
-$as_echo &quot;portaudio not found trying FreeBSD paths &quot; &gt;&amp;6; }
-	portaudio_lib_dir=&quot;/usr/local/lib/portaudio2&quot;
-	portaudio_include_dir=&quot;/usr/local/include/portaudio2&quot;
-	{ $as_echo &quot;$as_me:$LINENO: checking for a v19 portaudio in FreeBSD paths.&quot; &gt;&amp;5
-$as_echo_n &quot;checking for a v19 portaudio in FreeBSD paths.... &quot; &gt;&amp;6; }
-	HAS_PORTAUDIO_H=0
-	HAS_PORTAUDIO_LIB=0
-
-	if test -e ${portaudio_include_dir}/portaudio.h; then
-		HAS_PORTAUDIO_H=1
-	fi
-
-	if test -e ${portaudio_lib_dir}/libportaudio.so \
-	    -o -e ${portaudio_lib_dir}/libportaudio.a;then
-		HAS_PORTAUDIO_LIB=1
-	fi
-
-	if test $HAS_PORTAUDIO_H -eq 1 -a $HAS_PORTAUDIO_LIB -eq 1; then
-		{ $as_echo &quot;$as_me:$LINENO: result: found portaudio in FreeBSD paths, double checking it is v19 &quot; &gt;&amp;5
-$as_echo &quot;found portaudio in FreeBSD paths, double checking it is v19 &quot; &gt;&amp;6; }
-		LDFLAGS=&quot;-L${portaudio_lib_dir} ${LDFLAGS}&quot;
-		LIBS=&quot;${LIBS} -lportaudio&quot;
-		CPPFLAGS=&quot;-I${portaudio_include_dir} ${CPPFLAGS}&quot;
-		{ $as_echo &quot;$as_me:$LINENO: checking for Pa_GetVersion in -lportaudio&quot; &gt;&amp;5
-$as_echo_n &quot;checking for Pa_GetVersion in -lportaudio... &quot; &gt;&amp;6; }
-if test &quot;${ac_cv_lib_portaudio_Pa_GetVersion+set}&quot; = set; then
-  $as_echo_n &quot;(cached) &quot; &gt;&amp;6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS=&quot;-lportaudio  $LIBS&quot;
-cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h &gt;&gt;conftest.$ac_ext
-cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* end confdefs.h.  */
-
-/* Override any GCC internal prototype to avoid an error.
-   Use char because int might match the return type of a GCC
-   builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern &quot;C&quot;
-#endif
-char Pa_GetVersion ();
-int
-main ()
-{
-return Pa_GetVersion ();
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try=&quot;$ac_link&quot;
-case &quot;(($ac_try&quot; in
-  *\&quot;* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval ac_try_echo=&quot;\&quot;\$as_me:$LINENO: $ac_try_echo\&quot;&quot;
-$as_echo &quot;$ac_try_echo&quot;) &gt;&amp;5
-  (eval &quot;$ac_link&quot;) 2&gt;conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 &gt;conftest.err
-  rm -f conftest.er1
-  cat conftest.err &gt;&amp;5
-  $as_echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); } &amp;&amp; {
-	 test -z &quot;$ac_c_werror_flag&quot; ||
-	 test ! -s conftest.err
-       } &amp;&amp; test -s conftest$ac_exeext &amp;&amp; {
-	 test &quot;$cross_compiling&quot; = yes ||
-	 $as_test_x conftest$ac_exeext
-       }; then
-  ac_cv_lib_portaudio_Pa_GetVersion=yes
-else
-  $as_echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
-sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
-
-	ac_cv_lib_portaudio_Pa_GetVersion=no
-fi
-
-rm -rf conftest.dSYM
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
-fi
-{ $as_echo &quot;$as_me:$LINENO: result: $ac_cv_lib_portaudio_Pa_GetVersion&quot; &gt;&amp;5
-$as_echo &quot;$ac_cv_lib_portaudio_Pa_GetVersion&quot; &gt;&amp;6; }
-if test $ac_cv_lib_portaudio_Pa_GetVersion = yes; then
-  \
-			HAS_PORTAUDIO_VERSION=1
-else
-  HAS_PORTAUDIO_VERSION=0
-fi
-
-		if test $HAS_PORTAUDIO_VERSION -eq 0; then
-			{ $as_echo &quot;$as_me:$LINENO: result: How did you end up with a portaudio v18 here?&quot; &gt;&amp;5
-$as_echo &quot;How did you end up with a portaudio v18 here?&quot; &gt;&amp;6; }
-		else
-			{ $as_echo &quot;$as_me:$LINENO: result: found v19&quot; &gt;&amp;5
-$as_echo &quot;found v19&quot; &gt;&amp;6; }
-			HAS_PORTAUDIO=1
-			HAS_PORTAUDIO_H=1
-		fi
-	fi
-fi
-
 echo
 
 if test -z $FC ; then
@@ -5971,7 +6003,7 @@
 # report actual input values of CONFIG_FILES etc. instead of their
 # values after options handling.
 ac_log=&quot;
-This file was extended by wspr $as_me 0.8, which was
+This file was extended by wspr $as_me 1.11, which was
 generated by GNU Autoconf 2.62.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
@@ -6014,7 +6046,7 @@
 _ACEOF
 cat &gt;&gt;$CONFIG_STATUS &lt;&lt;_ACEOF || ac_write_fail=1
 ac_cs_version=&quot;\\
-wspr config.status 0.8
+wspr config.status 1.11
 configured by $0, generated by GNU Autoconf 2.62,
   with options \\&quot;`$as_echo &quot;$ac_configure_args&quot; | sed 's/^ //; s/[\\&quot;&quot;\`\$]/\\\\&amp;/g'`\\&quot;
 
@@ -6666,10 +6698,6 @@
 
 echo
 
-if test $HAS_PORTAUDIO -eq 0; then
-	echo &quot;Using built in portaudio distribution&quot;
-fi
-
 echo
 echo &quot;Compiling $PACKAGE_NAME $PACKAGE_VERSION&quot;
 echo

Modified: branches/wspr/configure.ac
===================================================================
--- branches/wspr/configure.ac	2009-05-16 22:29:05 UTC (rev 1222)
+++ branches/wspr/configure.ac	2009-05-16 22:39:58 UTC (rev 1223)
@@ -25,48 +25,10 @@
 CPPFLAGS=&quot;-I/usr/local/include ${CPPFLAGS}&quot;
 LDFLAGS=&quot;-L/usr/local/lib ${LDFLAGS}&quot;
 LIBS=&quot; -lpthread ${LIBS}&quot;
-FCV=&quot;&quot;
 
-dnl
-dnl Pick up FC from the environment if present
-dnl I'll add a test to confirm this is a gfortran later -db
-dnl
+AX_CHECK_GFORTRAN
+AX_CHECK_PORTAUDIO
 
-if test -n ${FC} ; then
-	gfortran=${FC}
-fi
-
-AC_MSG_CHECKING([uname -s for Cygwin, Solaris or HPUX])
-case `uname -s` in
-	CYGWIN*)
-		AC_MSG_RESULT(Cygwin)
-		CYGWIN=yes
-	;;
-	SunOS*)
-		AC_MSG_RESULT(SunOS or Solaris)
-		AC_DEFINE(__EXTENSIONS__, 1, [This is needed to use strtok_r on Solaris.])
-	;;
-dnl
-dnl Pick up current gfortran from ports infrastructure for fbsd
-dnl
-        FreeBSD*)
-		if test -z ${gfortran} ; then
-			gfortran=`grep FC: /usr/ports/Mk/bsd.gcc.mk | head -1 |awk '{print $2}'`
-		fi
-	;;
-	*)
-		AC_MSG_RESULT(no)
-	;;
-esac
-
-dnl
-dnl look for gfortran if nothing else was given
-dnl
-
-if test -z $gfortran ; then
-	gfortran=&quot;gfortran&quot;
-fi
-
 if test &quot;$ac_cv_c_compiler_gnu&quot; = yes; then
 	AC_MSG_CHECKING(if $CC is Apple GCC)
 	
@@ -109,8 +71,6 @@
 AC_PATH_PROG(TEST, [test], [test])
 AC_PATH_PROG(PYTHON, python)
 AC_PATH_PROG(F2PY, f2py)
-AC_PATH_PROG(G95, g95)
-AC_PATH_PROG(GFORTRAN, ${gfortran})
 AC_SUBST(VERSION, &quot;${version}&quot;)
 AC_MSG_CHECKING([OS])
 OS=`uname`
@@ -127,9 +87,6 @@
 AC_HEADER_TIME
 
 AC_CHECK_HEADER([samplerate.h], [HAS_SAMPLERATE_H=1], [HAS_SAMPLERATE_H=0])
-HAS_PORTAUDIO_H=0
-HAS_PORTAUDIO_LIB=0
-HAS_PORTAUDIO=0
 
 dnl See whether we can include both string.h and strings.h.
 AC_CACHE_CHECK([whether string.h and strings.h may both be included],
@@ -181,73 +138,10 @@
 	
 fi
 
-dnl pick gfortran or g95
-dnl ====================
-
-AC_ARG_ENABLE(g95,
-AC_HELP_STRING([--enable-g95],[Use G95 compiler if available.]),
-[g95=$enableval], [g95=no])
-
-AC_ARG_ENABLE(gfortran,
-AC_HELP_STRING([--enable-gfortran],[Use gfortran compiler if available.]),
-[gfortran=$enableval], [gfortran=no])
-
 dnl now set conf.h,, CPPFLAGS and CFLAGS flags as needed
 dnl ====================================================
 
-if test ! -z $GFORTRAN ; then
-	echo &quot;*** gfortran compiler found at ${GFORTRAN}&quot;
-	if test &quot;$gfortran&quot; = yes; then
-       		FC_LIB_PATH=`${GFORTRAN} -print-file-name=`
-		FC=`basename ${GFORTRAN}`
-		g95=no
-		FFLAGS=&quot;$FFLAGS -fno-range-check -ffixed-line-length-none&quot;
-		FCV=&quot;gnu95&quot;
-	fi
-else
-	echo &quot;*** No gfortran compiler found&quot;
-fi
 
-if test ! -z $G95 ; then
-	echo &quot;*** g95 compiler found&quot;
-	if test &quot;$g95&quot; = yes; then
-       		FC_LIB_PATH=`${G95} -print-file-name=`
-		FC=`basename ${G95}`
-		gfortran=no
-		FFLAGS=&quot;${FFLAGS} -ftrace=full -cpp&quot;
-		FCV=&quot;g95&quot;
-	fi
-else
-	echo &quot;*** No g95 compiler found&quot;
-fi
-
-dnl
-dnl if FC is not set by now, pick a compiler for user
-dnl
-if test -z $FC ; then
-	if test ! -z $GFORTRAN ; then
-		if test &quot;$g95&quot; = yes; then
-			echo &quot;You enabled g95, but no g95 compiler found, defaulting to gfortran instead&quot;
-		fi
-       		FC_LIB_PATH=`${GFORTRAN} -print-file-name=`
-	        FC=`basename ${GFORTRAN}`
-		g95=no
-		gfortran=yes
-		FFLAGS=&quot;${FFLAGS} -fno-range-check -ffixed-line-length-none&quot;
-		FCV=&quot;gnu95&quot;
-	elif test ! -z $G95 ; then
-		if test &quot;$gfortran&quot; = yes; then
-			echo &quot;You enabled gfortran, but no gfortran compiler found, defaulting to g95 instead&quot;
-		fi
-       		FC_LIB_PATH=`${G95} -print-file-name=`
-	        FC=`basename ${G95}`
-		g95=yes
-		gfortran=no
-		FFLAGS=&quot;${FFLAGS} -ftrace=full -cpp&quot;
-		FCV=&quot;g95&quot;
-	fi
-fi
-
 AC_DEFINE_UNQUOTED(FC_LIB_PATH, &quot;${FC_LIB_PATH}&quot;, [Path to fortran libs.])
 AC_SUBST(FC_LIB_PATH, &quot;${FC_LIB_PATH}&quot;)
 AC_DEFINE_UNQUOTED(FC, &quot;${FC}&quot;, [Fortran compiler.])
@@ -255,81 +149,6 @@
 AC_SUBST(FCV, &quot;${FCV}&quot;)
 AC_SUBST(PREFIX, &quot;${prefix}&quot;)
 
-dnl set defaults
-dnl ============
-
-AC_MSG_CHECKING([for a v19 portaudio ])
-
-portaudio_lib_dir=&quot;/usr/lib&quot;
-portaudio_include_dir=&quot;/usr/include&quot;
-
-AC_ARG_WITH([portaudio-include-dir],
-AC_HELP_STRING([--with-portaudio-include-dir=&lt;path&gt;],
-    [path to portaudio include files]),
-    [portaudio_include_dir=$with_portaudio_include_dir])
-
-AC_ARG_WITH([portaudio-lib-dir],
-AC_HELP_STRING([--with-portaudio-lib-dir=&lt;path&gt;],
-    [path to portaudio lib files]),
-    [portaudio_lib_dir=$with_portaudio_lib_dir])
-
-if test -e ${portaudio_include_dir}/portaudio.h; then
-	HAS_PORTAUDIO_H=1
-fi
-
-if test -e ${portaudio_lib_dir}/libportaudio.so \
-    -o -e ${portaudio_lib_dir}/libportaudio.a;then
-	HAS_PORTAUDIO_LIB=1
-fi
-
-if test $HAS_PORTAUDIO_H -eq 1 -a $HAS_PORTAUDIO_LIB -eq 1; then
-	LDFLAGS=&quot;-L${portaudio_lib_dir} ${LDFLAGS}&quot;
-	LIBS=&quot;${LIBS} -lportaudio&quot;
-	CPPFLAGS=&quot;-I${portaudio_include_dir} ${CPPFLAGS}&quot;
-	AC_CHECK_LIB(portaudio, Pa_GetVersion, \
-		[HAS_PORTAUDIO_VERSION=1], [HAS_PORTAUDIO_VERSION=0])
-	if test $HAS_PORTAUDIO_VERSION -eq 0; then
-		AC_MSG_RESULT([This is likely portaudio v18; you need portaudio v19])
-	else
-		HAS_PORTAUDIO=1
-	fi
-else
-	AC_MSG_RESULT([portaudio not found trying FreeBSD paths ])
-	portaudio_lib_dir=&quot;/usr/local/lib/portaudio2&quot;
-	portaudio_include_dir=&quot;/usr/local/include/portaudio2&quot;
-dnl
-dnl Try again to make sure portaudio dirs are valid
-dnl
-	AC_MSG_CHECKING([for a v19 portaudio in FreeBSD paths.])
-	HAS_PORTAUDIO_H=0
-	HAS_PORTAUDIO_LIB=0
-
-	if test -e ${portaudio_include_dir}/portaudio.h; then
-		HAS_PORTAUDIO_H=1
-	fi
-
-	if test -e ${portaudio_lib_dir}/libportaudio.so \
-	    -o -e ${portaudio_lib_dir}/libportaudio.a;then
-		HAS_PORTAUDIO_LIB=1
-	fi
-
-	if test $HAS_PORTAUDIO_H -eq 1 -a $HAS_PORTAUDIO_LIB -eq 1; then
-		AC_MSG_RESULT([found portaudio in FreeBSD paths, double checking it is v19 ])
-		LDFLAGS=&quot;-L${portaudio_lib_dir} ${LDFLAGS}&quot;
-		LIBS=&quot;${LIBS} -lportaudio&quot;
-		CPPFLAGS=&quot;-I${portaudio_include_dir} ${CPPFLAGS}&quot;
-		AC_CHECK_LIB(portaudio, Pa_GetVersion, \
-			[HAS_PORTAUDIO_VERSION=1], [HAS_PORTAUDIO_VERSION=0])
-		if test $HAS_PORTAUDIO_VERSION -eq 0; then
-			AC_MSG_RESULT([How did you end up with a portaudio v18 here?])
-		else
-			AC_MSG_RESULT([found v19])
-			HAS_PORTAUDIO=1
-			HAS_PORTAUDIO_H=1
-		fi
-	fi
-fi
-
 dnl sanity tests.
 dnl
 echo
@@ -388,10 +207,6 @@
 
 echo
 
-if test $HAS_PORTAUDIO -eq 0; then
-	echo &quot;Using built in portaudio distribution&quot;
-fi
-
 echo
 echo &quot;Compiling $PACKAGE_NAME $PACKAGE_VERSION&quot;
 echo


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000916.html">[WSJT-SVN] r1222 - branches/map65iq
</A></li>
	<LI>Next message: <A HREF="000918.html">[WSJT-SVN] r1224 - trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#917">[ date ]</a>
              <a href="thread.html#917">[ thread ]</a>
              <a href="subject.html#917">[ subject ]</a>
              <a href="author.html#917">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/wsjt-svn">More information about the wsjt-svn
mailing list</a><br>
</body></html>
